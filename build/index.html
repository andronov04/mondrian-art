<html>
<head>
  <title>Mondrian Art Generator</title>
  <script>
    !function(){"use strict";function e(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function v(){return(v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i,r=arguments[e];for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}function i(t){this.val=t,this.edges={}}function b(){this.vertices={}}var f;function r(){for(var t="0123456789abcdef",e="0x",i=64;0<i;--i)e+=t[Math.floor(Math.random()*t.length)];return e}b.prototype.addVertex=function(t){this.vertices[t]||(this.vertices[t]=new i(t))},b.prototype.removeVertex=function(i){this.vertices[i]&&(delete this.vertices[i],Object.keys(this.vertices).forEach(function(t,e){this.vertices[t].edges[i]&&delete this.vertices[t].edges[i]}.bind(this)))},b.prototype.getVertex=function(t){return this.vertices[t]},b.prototype.addEdge=function(t,e,i){this.vertices[t]&&this.vertices[e]&&(this.vertices[t].edges[e]?this.vertices[t].edges[e].weight=i:this.vertices[t].edges[e]={weight:i})},(s=f=f||{})[s.custom=0]="custom",s[s.polygon=1]="polygon",s[s.line=2]="line",s[s.rectangle=3]="rectangle",s[s.text=4]="text";var n=((a=t.prototype).random_dec=function(){return this.seed^=this.seed<<13,this.seed^=this.seed>>17,this.seed^=this.seed<<5,(this.seed<0?1+~this.seed:this.seed)%1e3/1e3},a.random_between=function(t,e){return t+(e-t)*this.random_dec()},a.random_int=function(t,e){return Math.floor(this.random_between(t,e+1))},a.random_choice=function(t){return t[Math.floor(this.random_between(0,.99*t.length))]},t);function t(t){this.seed=t}function x(t,e){return i=t,t=e,e=r(),e=parseInt(e.slice(0,16),16),new n(e).random_between(i,t);var i}function u(t){return e=t,t=r(),t=parseInt(t.slice(0,16),16),new n(t).random_choice(e);var e}var V,s={exports:{}};V=s,function(h){var l=/^\s+/,c=/\s+$/,r=0,s=h.round,f=h.min,u=h.max,t=h.random;function d(t,e){if(e=e||{},(t=t||"")instanceof d)return t;if(!(this instanceof d))return new d(t,e);var i=function(t){var e={r:0,g:0,b:0},i=1,r=null,n=null,s=null,a=!1,o=!1;"string"==typeof t&&(t=function(t){t=t.replace(l,"").replace(c,"").toLowerCase();var e,i=!1;if(S[t])t=S[t],i=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};if(e=z.rgb.exec(t))return{r:e[1],g:e[2],b:e[3]};if(e=z.rgba.exec(t))return{r:e[1],g:e[2],b:e[3],a:e[4]};if(e=z.hsl.exec(t))return{h:e[1],s:e[2],l:e[3]};if(e=z.hsla.exec(t))return{h:e[1],s:e[2],l:e[3],a:e[4]};if(e=z.hsv.exec(t))return{h:e[1],s:e[2],v:e[3]};if(e=z.hsva.exec(t))return{h:e[1],s:e[2],v:e[3],a:e[4]};if(e=z.hex8.exec(t))return{r:E(e[1]),g:E(e[2]),b:E(e[3]),a:L(e[4]),format:i?"name":"hex8"};if(e=z.hex6.exec(t))return{r:E(e[1]),g:E(e[2]),b:E(e[3]),format:i?"name":"hex"};if(e=z.hex4.exec(t))return{r:E(e[1]+""+e[1]),g:E(e[2]+""+e[2]),b:E(e[3]+""+e[3]),a:L(e[4]+""+e[4]),format:i?"name":"hex8"};if(e=z.hex3.exec(t))return{r:E(e[1]+""+e[1]),g:E(e[2]+""+e[2]),b:E(e[3]+""+e[3]),format:i?"name":"hex"};return!1}(t));"object"==typeof t&&(H(t.r)&&H(t.g)&&H(t.b)?(e=function(t,e,i){return{r:255*F(t,255),g:255*F(e,255),b:255*F(i,255)}}(t.r,t.g,t.b),a=!0,o="%"===String(t.r).substr(-1)?"prgb":"rgb"):H(t.h)&&H(t.s)&&H(t.v)?(r=C(t.s),n=C(t.v),e=function(t,e,i){t=6*F(t,360),e=F(e,100),i=F(i,100);var r=h.floor(t),n=t-r,s=i*(1-e),t=i*(1-n*e),e=i*(1-(1-n)*e),r=r%6;return{r:255*[i,t,s,s,e,i][r],g:255*[e,i,i,t,s,s][r],b:255*[s,s,e,i,i,t][r]}}(t.h,r,n),a=!0,o="hsv"):H(t.h)&&H(t.s)&&H(t.l)&&(r=C(t.s),s=C(t.l),e=function(t,e,i){var r,n,s;function a(t,e,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}t=F(t,360),e=F(e,100),i=F(i,100),0===e?r=n=s=i:(r=a(e=2*i-(i=i<.5?i*(1+e):i+e-i*e),i,t+1/3),n=a(e,i,t),s=a(e,i,t-1/3));return{r:255*r,g:255*n,b:255*s}}(t.h,r,s),a=!0,o="hsl"),t.hasOwnProperty("a")&&(i=t.a));return i=R(i),{ok:a,format:t.format||o,r:f(255,u(e.r,0)),g:f(255,u(e.g,0)),b:f(255,u(e.b,0)),a:i}}(t);this._originalInput=t,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=s(100*this._a)/100,this._format=e.format||i.format,this._gradientType=e.gradientType,this._r<1&&(this._r=s(this._r)),this._g<1&&(this._g=s(this._g)),this._b<1&&(this._b=s(this._b)),this._ok=i.ok,this._tc_id=r++}function n(t,e,i){t=F(t,255),e=F(e,255),i=F(i,255);var r,n=u(t,e,i),s=f(t,e,i),a=(n+s)/2;if(n==s)r=h=0;else{var o=n-s,h=.5<a?o/(2-n-s):o/(n+s);switch(n){case t:r=(e-i)/o+(e<i?6:0);break;case e:r=(i-t)/o+2;break;case i:r=(t-e)/o+4}r/=6}return{h:r,s:h,l:a}}function a(t,e,i){t=F(t,255),e=F(e,255),i=F(i,255);var r,n=u(t,e,i),s=f(t,e,i),a=n,o=n-s,h=0===n?0:o/n;if(n==s)r=0;else{switch(n){case t:r=(e-i)/o+(e<i?6:0);break;case e:r=(i-t)/o+2;break;case i:r=(t-e)/o+4}r/=6}return{h:r,s:h,v:a}}function e(t,e,i,r){i=[P(s(t).toString(16)),P(s(e).toString(16)),P(s(i).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function o(t,e,i,r){return[P(j(r)),P(s(t).toString(16)),P(s(e).toString(16)),P(s(i).toString(16))].join("")}function i(t,e){e=0===e?0:e||10;t=d(t).toHsl();return t.s-=e/100,t.s=T(t.s),d(t)}function g(t,e){e=0===e?0:e||10;t=d(t).toHsl();return t.s+=e/100,t.s=T(t.s),d(t)}function p(t){return d(t).desaturate(100)}function _(t,e){e=0===e?0:e||10;t=d(t).toHsl();return t.l+=e/100,t.l=T(t.l),d(t)}function m(t,e){e=0===e?0:e||10;t=d(t).toRgb();return t.r=u(0,f(255,t.r-s(-e/100*255))),t.g=u(0,f(255,t.g-s(-e/100*255))),t.b=u(0,f(255,t.b-s(-e/100*255))),d(t)}function y(t,e){e=0===e?0:e||10;t=d(t).toHsl();return t.l-=e/100,t.l=T(t.l),d(t)}function v(t,e){t=d(t).toHsl(),e=(t.h+e)%360;return t.h=e<0?360+e:e,d(t)}function b(t){t=d(t).toHsl();return t.h=(t.h+180)%360,d(t)}function x(t){var e=d(t).toHsl(),i=e.h;return[d(t),d({h:(i+120)%360,s:e.s,l:e.l}),d({h:(i+240)%360,s:e.s,l:e.l})]}function w(t){var e=d(t).toHsl(),i=e.h;return[d(t),d({h:(i+90)%360,s:e.s,l:e.l}),d({h:(i+180)%360,s:e.s,l:e.l}),d({h:(i+270)%360,s:e.s,l:e.l})]}function k(t){var e=d(t).toHsl(),i=e.h;return[d(t),d({h:(i+72)%360,s:e.s,l:e.l}),d({h:(i+216)%360,s:e.s,l:e.l})]}function M(t,e,i){e=e||6,i=i||30;var r=d(t).toHsl(),n=360/i,s=[d(t)];for(r.h=(r.h-(n*e>>1)+720)%360;--e;)r.h=(r.h+n)%360,s.push(d(r));return s}function A(t,e){e=e||6;for(var t=d(t).toHsv(),i=t.h,r=t.s,n=t.v,s=[],a=1/e;e--;)s.push(d({h:i,s:r,v:n})),n=(n+a)%1;return s}d.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t=this.toRgb(),e=t.r/255,i=t.g/255,t=t.b/255,e=e<=.03928?e/12.92:h.pow((.055+e)/1.055,2.4),i=i<=.03928?i/12.92:h.pow((.055+i)/1.055,2.4),t=t<=.03928?t/12.92:h.pow((.055+t)/1.055,2.4);return.2126*e+.7152*i+.0722*t},setAlpha:function(t){return this._a=R(t),this._roundA=s(100*this._a)/100,this},toHsv:function(){var t=a(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=a(this._r,this._g,this._b),e=s(360*t.h),i=s(100*t.s),t=s(100*t.v);return 1==this._a?"hsv("+e+", "+i+"%, "+t+"%)":"hsva("+e+", "+i+"%, "+t+"%, "+this._roundA+")"},toHsl:function(){var t=n(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=n(this._r,this._g,this._b),e=s(360*t.h),i=s(100*t.s),t=s(100*t.l);return 1==this._a?"hsl("+e+", "+i+"%, "+t+"%)":"hsla("+e+", "+i+"%, "+t+"%, "+this._roundA+")"},toHex:function(t){return e(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,i,r,n){r=[P(s(t).toString(16)),P(s(e).toString(16)),P(s(i).toString(16)),P(j(r))];if(n&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)&&r[3].charAt(0)==r[3].charAt(1))return r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0);return r.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:s(this._r),g:s(this._g),b:s(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+s(this._r)+", "+s(this._g)+", "+s(this._b)+")":"rgba("+s(this._r)+", "+s(this._g)+", "+s(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:s(100*F(this._r,255))+"%",g:s(100*F(this._g,255))+"%",b:s(100*F(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+s(100*F(this._r,255))+"%, "+s(100*F(this._g,255))+"%, "+s(100*F(this._b,255))+"%)":"rgba("+s(100*F(this._r,255))+"%, "+s(100*F(this._g,255))+"%, "+s(100*F(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&O[e(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var e="#"+o(this._r,this._g,this._b,this._a),i=e;return"progid:DXImageTransform.Microsoft.gradient("+(this._gradientType?"GradientType = 1, ":"")+"startColorstr="+e+",endColorstr="+(i=t?"#"+o((t=d(t))._r,t._g,t._b,t._a):i)+")"},toString:function(t){var e=!!t;t=t||this._format;var i=!1,r=this._a<1&&0<=this._a;return e||!r||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(i=this.toRgbString()),"prgb"===t&&(i=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(i=this.toHexString()),"hex3"===t&&(i=this.toHexString(!0)),"hex4"===t&&(i=this.toHex8String(!0)),"hex8"===t&&(i=this.toHex8String()),"name"===t&&(i=this.toName()),"hsl"===t&&(i=this.toHslString()),(i="hsv"===t?this.toHsvString():i)||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return d(this.toString())},_applyModification:function(t,e){e=t.apply(null,[this].concat([].slice.call(e)));return this._r=e._r,this._g=e._g,this._b=e._b,this.setAlpha(e._a),this},lighten:function(){return this._applyModification(_,arguments)},brighten:function(){return this._applyModification(m,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(i,arguments)},saturate:function(){return this._applyModification(g,arguments)},greyscale:function(){return this._applyModification(p,arguments)},spin:function(){return this._applyModification(v,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(M,arguments)},complement:function(){return this._applyCombination(b,arguments)},monochromatic:function(){return this._applyCombination(A,arguments)},splitcomplement:function(){return this._applyCombination(k,arguments)},triad:function(){return this._applyCombination(x,arguments)},tetrad:function(){return this._applyCombination(w,arguments)}},d.fromRatio=function(t,e){if("object"==typeof t){var i,r={};for(i in t)t.hasOwnProperty(i)&&(r[i]="a"===i?t[i]:C(t[i]));t=r}return d(t,e)},d.equals=function(t,e){return!(!t||!e)&&d(t).toRgbString()==d(e).toRgbString()},d.random=function(){return d.fromRatio({r:t(),g:t(),b:t()})},d.mix=function(t,e,i){i=0===i?0:i||50;t=d(t).toRgb(),e=d(e).toRgb(),i/=100;return d({r:(e.r-t.r)*i+t.r,g:(e.g-t.g)*i+t.g,b:(e.b-t.b)*i+t.b,a:(e.a-t.a)*i+t.a})},d.readability=function(t,e){t=d(t),e=d(e);return(h.max(t.getLuminance(),e.getLuminance())+.05)/(h.min(t.getLuminance(),e.getLuminance())+.05)},d.isReadable=function(t,e,i){var r=d.readability(t,e),n=!1,i=function(t){var e;e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase(),t=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA");"small"!==t&&"large"!==t&&(t="small");return{level:e,size:t}}(i);switch(i.level+i.size){case"AAsmall":case"AAAlarge":n=4.5<=r;break;case"AAlarge":n=3<=r;break;case"AAAsmall":n=7<=r}return n},d.mostReadable=function(t,e,i){for(var r,n=null,s=0,a=(i=i||{}).includeFallbackColors,o=i.level,h=i.size,l=0;l<e.length;l++)s<(r=d.readability(t,e[l]))&&(s=r,n=d(e[l]));return d.isReadable(t,n,{level:o,size:h})||!a?n:(i.includeFallbackColors=!1,d.mostReadable(t,["#fff","#000"],i))};var S=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},O=d.hexNames=function(t){var e,i={};for(e in t)t.hasOwnProperty(e)&&(i[t[e]]=e);return i}(S);function R(t){return t=parseFloat(t),t=isNaN(t)||t<0||1<t?1:t}function F(t,e){"string"==typeof(i=t)&&-1!=i.indexOf(".")&&1===parseFloat(i)&&(t="100%");var i,i="string"==typeof(i=t)&&-1!=i.indexOf("%");return t=f(e,u(0,parseFloat(t))),i&&(t=parseInt(t*e,10)/100),h.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function T(t){return f(1,u(0,t))}function E(t){return parseInt(t,16)}function P(t){return 1==t.length?"0"+t:""+t}function C(t){return t=t<=1?100*t+"%":t}function j(t){return h.round(255*parseFloat(t)).toString(16)}function L(t){return E(t)/255}var I,N,B,z=(N="[\\s|\\(]+("+(I="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+I+")[,|\\s]+("+I+")\\s*\\)?",B="[\\s|\\(]+("+I+")[,|\\s]+("+I+")[,|\\s]+("+I+")[,|\\s]+("+I+")\\s*\\)?",{CSS_UNIT:new RegExp(I),rgb:new RegExp("rgb"+N),rgba:new RegExp("rgba"+B),hsl:new RegExp("hsl"+N),hsla:new RegExp("hsla"+B),hsv:new RegExp("hsv"+N),hsva:new RegExp("hsva"+B),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function H(t){return z.CSS_UNIT.exec(t)}V.exports?V.exports=d:window.tinycolor=d}(Math);var a=Object.freeze(Object.assign(Object.create(null),s.exports,{default:s.exports})),d=a;class h{constructor(t,e){this.key=t,this.data=e,this.left=null,this.right=null}}function o(t,e,i){if(null===e)return e;let r,n,s;var a=new h;for(r=n=a;;){var o=i(t,e.key);if(o<0){if(null===e.left)break;if(i(t,e.left.key)<0&&(s=e.left,e.left=s.right,s.right=e,null===(e=s).left))break;n.left=e,e=(n=e).left}else{if(!(0<o))break;if(null===e.right)break;if(0<i(t,e.right.key)&&(s=e.right,e.right=s.left,s.left=e,null===(e=s).right))break;r.right=e,e=(r=e).right}}return r.right=e.left,n.left=e.right,e.left=a.right,e.right=a.left,e}function l(t,e,i,r,n){const s=new h(t,e);if(n._size++,null===i)return s.left=s.right=null,s;r=r(t,(i=o(t,i,r)).key);return r<0?(s.left=i.left,(s.right=i).left=null):0<=r&&(s.right=i.right,(s.left=i).right=null),s}function c(t,e,i,r){let n;return null===e?null:0===i(t,(e=o(t,e,i)).key)?(null===e.left?n=e.right:(n=o(t,e.left,i),n.right=e.right),r._size--,n):e}function g(t,e,i){let r,n;return null===e?r=n=null:0===(t=i((e=o(t,e,i)).key,t))?(r=e.left,n=e.right):t<0?(n=e.right,e.right=null,r=e):(r=e.left,e.left=null,n=e),{left:r,right:n}}class y{constructor(t=function(t,e){return e<t?1:t<e?-1:0}){this._comparator=t,this._root=null,this._size=0}insert(t,e){return this._root=l(t,e,this._root,this._comparator,this)}add(t,e){return this._root=function(t,e,i,r,n){const s=new h(t,e);return null===i?(s.left=s.right=null,n._size++,s):0===(r=r(t,(i=o(t,i,r)).key))?i:(r<0?(s.left=i.left,(s.right=i).left=null):0<r&&(s.right=i.right,(s.left=i).right=null),n._size++,s)}(t,e,this._root,this._comparator,this)}remove(t){this._root=c(t,this._root,this._comparator,this)}pop(){let t=this._root;if(t){for(;t.left;)t=t.left;return this._root=o(t.key,this._root,this._comparator),this._root=c(t.key,this._root,this._comparator,this),{key:t.key,data:t.data}}return null}findStatic(t){let e=this._root;const i=this._comparator;for(;e;){var r=i(t,e.key);if(0===r)return e;e=r<0?e.left:e.right}return null}find(t){return this._root&&(this._root=o(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root}contains(t){let e=this._root;const i=this._comparator;for(;e;){var r=i(t,e.key);if(0===r)return!0;e=r<0?e.left:e.right}return!1}forEach(t,e){let i=this._root;const r=[];let n=!1;for(;!n;)null!==i?(r.push(i),i=i.left):0!==r.length?(i=r.pop(),t.call(e,i),i=i.right):n=!0;return this}range(t,e,i,r){const n=[],s=this._comparator;let a=this._root;for(;0!==n.length||a;)if(a)n.push(a),a=a.left;else{if(a=n.pop(),0<s(a.key,e))break;if(0<=s(a.key,t)&&i.call(r,a))return this;a=a.right}return this}keys(){const e=[];return this.forEach(({key:t})=>e.push(t)),e}values(){const e=[];return this.forEach(({data:t})=>e.push(t)),e}min(){return this._root?this.minNode(this._root).key:null}max(){return this._root?this.maxNode(this._root).key:null}minNode(t=this._root){if(t)for(;t.left;)t=t.left;return t}maxNode(t=this._root){if(t)for(;t.right;)t=t.right;return t}at(t){let e=this._root,i=!1,r=0;const n=[];for(;!i;)if(e)n.push(e),e=e.left;else if(0<n.length){if(e=n.pop(),r===t)return e;r++,e=e.right}else i=!0;return null}next(t){let e=this._root,i=null;if(t.right){for(i=t.right;i.left;)i=i.left;return i}const r=this._comparator;for(;e;){var n=r(t.key,e.key);if(0===n)break;e=n<0?(i=e,e.left):e.right}return i}prev(t){let e=this._root,i=null;if(null!==t.left){for(i=t.left;i.right;)i=i.right;return i}const r=this._comparator;for(;e;){var n=r(t.key,e.key);if(0===n)break;e=n<0?e.left:(i=e,e.right)}return i}clear(){return this._root=null,this._size=0,this}toList(){return function(t){var e=t,i=[],r=!1;t={next:null};let n=t;for(;!r;)e?(i.push(e),e=e.left):0<i.length?e=(e=n=n.next=i.pop()).right:r=!0;return n.next=null,t.next}(this._root)}load(t=[],e=[],i=!1){let r=t.length;var n=this._comparator;return i&&function t(e,i,r,n,s){if(n<=r)return;const a=e[r+n>>1];let o=r-1;let h=n+1;for(;;){for(;o++,s(e[o],a)<0;);for(;h--,0<s(e[h],a););if(o>=h)break;let t=e[o];e[o]=e[h],e[h]=t,t=i[o],i[o]=i[h],i[h]=t}t(e,i,r,h,s);t(e,i,h+1,n,s)}(t,e,0,r-1,n),null===this._root?(this._root=function t(e,i,r,n,s){const a=s-n;if(0<a){const o=n+Math.floor(a/2),h=i[o],l=r[o],c={key:h,data:l,parent:e};return c.left=t(c,i,r,n,o),c.right=t(c,i,r,o+1,s),c}return null}(this._root,t,e,0,r),this._size=r):(n=function(t,e,i=(t,e)=>t-e){var r={};let n=r,s=t,a=e;for(;null!==s&&null!==a;)i(s.key,a.key)<0?(n.next=s,s=s.next):(n.next=a,a=a.next),n=n.next;null!==s?n.next=s:null!==a&&(n.next=a);return r.next}(this.toList(),function(e,i){var t={next:null};let r=t;for(let t=0;t<e.length;t++)r=r.next={key:e[t],data:i[t]};return r.next=null,t.next}(t,e),n),r=this._size+r,this._root=function t(e,i,r){const n=r-i;if(0<n){const s=i+Math.floor(n/2),a=t(e,i,s),o=e.head;return o.left=a,e.head=e.head.next,o.right=t(e,s+1,r),o}return null}({head:n},0,r)),this}isEmpty(){return null===this._root}get size(){return this._size}toString(t=t=>t.key){const e=[];return function t(e,i,r,n,s){e&&(n(`${i}${r?"└── ":"├── "}${s(e)}\n`),r=i+(r?"    ":"│   "),e.left&&t(e.left,r,!1,n,s),e.right&&t(e.right,r,!0,n,s))}(this._root,"",!0,t=>e.push(t),t),e.join("")}update(t,e,i){const r=this._comparator;let{left:n,right:s}=g(t,this._root,r);this._size--,r(t,e)<0?s=l(e,i,s,r,this):n=l(e,i,n,r,this),this._root=(t=n,e=s,i=r,null===e?t:(null===t||((e=o(t.key,e,i)).left=t),e))}split(t){return g(t,this._root,this._comparator)}}function p(t){const e=new y(t);return{isEmpty:function(){return e.isEmpty()},size:function(){return e.size},pop:function(){var t=e.pop();return t&&t.data},find:function(t){return e.find(t)},insert:function(t){e.add(t.point,t)}}}const _=1e-9;function w(t,e,i){var r=t.from.y-i,n=i-t.to.y,i=t.to.y-t.from.y;if(Math.abs(r)<_)return!(Math.abs(i)<_)||e<=t.from.x?t.from.x:e>t.to.x?t.to.x:e;e=t.to.x-t.from.x;return n<=r?t.from.x-e/i*r:t.to.x+e/i*n}function k(t,e){return Math.abs(t.x-e.x)<_&&Math.abs(t.y-e.y)<_}function m(u,s){var a,o,h,l,c=!1,d=new y(p),g={beforeLeft:null,left:null,right:null,afterRight:null},f={left:null,right:null};return{insertSegments:function(t,e,i){var r;a=i.y,h=i.x;for(var n=0;n<t.length;++n)r=t[n],d.add(r);for(n=0;n<e.length;++n)r=e[n],d.add(r)},deleteSegments:function(t,e,i){var r,n=d._size;for(l=h,o=a,a=i.y,h=i.x,c=!0,r=0;r<t.length;++r)m(t[r],i);for(r=0;r<e.length;++r)m(e[r],i);c=!1,d._size!==n-e.length-t.length&&u("Segments were not removed from a tree properly. Precision error?")},getLeftRightPoint:function(t){var e,i=d._root,r=Number.POSITIVE_INFINITY;for(;i;){var n=w(i.key,t.x,t.y),n=t.x-n;if(0<=n){if(!(n<r))break;r=n,i=(e=i).left}else{if(!(-n<r))break;r=-n,i=(e=i).right}}f.left=e&&e.key;var s=e&&d.next(e);return f.right=s&&s.key,f},getBoundarySegments:function(t,e){var i,r,n,s=t.length;i=r=(0<s?t:e)[0];for(n=1;n<s;++n){var a=t[n],o=p(i,a);0<o&&(i=a),(o=p(r,a))<0&&(r=a)}for(n=0<s?0:1;n<e.length;++n)a=e[n],0<(o=p(i,a))&&(i=a),(o=p(r,a))<0&&(r=a);var h=d.find(i);h||u("Left is missing. Precision error?");var l=d.find(r);l||u("Right is missing. Precision error?");var c=h&&d.prev(h),f=l&&d.next(l);for(;f&&0===l.key.dy&&0===f.key.dy;)f=d.next(f);return g.beforeLeft=c&&c.key,g.left=h&&h.key,g.right=l&&l.key,g.afterRight=f&&f.key,g},findSegmentsWithPoint:function(t,e){var i=d._root;for(;i;){var r=w(i.key,t.x,t.y),r=t.x-r;if(Math.abs(r)<s){_(i,t,e);break}i=r<0?i.left:i.right}},status:d,checkDuplicate:function(){var e;d.forEach(t=>{t=t.key;e&&k(e.from,t.from)&&k(e.to,t.to)&&u("Duplicate key in the status! This may be caused by Floating Point rounding error"),e=t})},printStatus:function(t=""){console.log(t,"status line: ",h,a),d.forEach(t=>{var e=w(t.key,h,a);console.log(e+" "+t.key.name)})},getLastPoint(){return{x:h,y:a}}};function p(t,e){if(t===e)return 0;var i=w(t,h,a)-w(e,h,a);if(Math.abs(i)>=s)return i;var r=Math.abs(t.dy)<s,i=Math.abs(e.dy)<s;if(r&&i)return e.to.x-t.to.x;if(r)return c?-1:1;if(i)return!c||e.from.x>=h?-1:1;r=t.angle,i=e.angle;if(Math.abs(r-i)>=s)return c?r-i:i-r;r=t.from.y-e.from.y;return Math.abs(r)>=s?-r:(r=t.to.y-e.to.y,Math.abs(r)>=s?-r:0)}function _(t,e,i){i(t.key),function t(e,i,r){if(!e)return;var n=w(e.key,i.x,i.y);n=i.x-n;Math.abs(n)<s?_(e,i,r):t(e.right,i,r)}(t.left,e,i),function t(e,i,r){if(!e)return;var n=w(e.key,i.x,i.y);n=i.x-n;Math.abs(n)<s?_(e,i,r):t(e.left,i,r)}(t.right,e,i)}function m(t,e){d.find(t)?d.remove(t):(h=l,a=o,d.find(t)&&d.remove(t),a=e.y,h=e.x)}}class M{constructor(t,e){this.point=t,e&&(this.from=[e])}}var A=[];function S(t,e){var a,o,h,i=[],l=e&&e.onFound||function(t,e){i.push({point:t,segments:e})},r=e&&e.onError||R,c=p(T),f=m(r,_);return t.forEach(s),{run:function(){for(;!c.isEmpty();)if(n(c.pop()))return;return i},step:function(){return!c.isEmpty()&&(n(c.pop()),!0)},addSegment:s,eventQueue:c,sweepStatus:f,results:i};function n(t){h=t.point;var e=t.from||A;a=o=void 0,f.findSegmentsWithPoint(h,u),a=a||A,o=o||A;var i=e.length,r=o.length,n=a.length,s=1<i+r+n,n=!s&&0===i&&0===n&&0<r;if((s||n)&&(t.isReported=!0,l(h,F(o,F(a,e)))))return 1;if(f.deleteSegments(a,o,h),f.insertSegments(o,e,h),i+r===0){var i=f.getLeftRightPoint(h);if(!(r=i.left))return;if(!(i=i.right))return;d(r,i,t)}else{e=f.getBoundarySegments(e,o);d(e.beforeLeft,e.left,t),d(e.right,e.afterRight,t)}}function u(t){k(t.to,h)?a?a.push(t):a=[t]:k(t.from,h)||(o?o.push(t):o=[t])}function d(t,e,i){t&&e&&((t=function(t,e){var i=t.from,r=e.from,n=i.x,s=i.y,a=r.x,o=r.y,h=t.dx,l=t.dy,i=e.dx,r=e.dy;if(!((e=(l*(n-a)-h*(s-o))/(t=h*r-i*l))<0||1<e)){t=(i*(o-s)+r*(n-a))/t;return 0<=t&&t<=1?{x:n-t*h,y:s-t*l}:void 0}}(t,e))&&((e=i.point.y-t.y)<-_||Math.abs(e)<_&&t.x<=i.point.x||(O(t),(i=c.find(t))&&i.isReported?r("We already reported this event."):i||(t=new M(t),c.insert(t)))))}function s(t){var e=t.from,i=t.to;O(e),O(i);var r=e.y-i.y;Math.abs(r)<1e-5&&(e.y=i.y,t.dy=0),(e.y<i.y||e.y===i.y&&e.x>i.x)&&(s=e,e=t.from=i,i=t.to=s),t.dy=e.y-i.y,t.dx=e.x-i.x,t.angle=(r=t.dy,s=t.dx,r/=Math.abs(r)+Math.abs(s),s<0?r-1:1-r);var n,s=t.dy===t.dx&&0===t.dy,r=c.find(e);if(r&&!s){var a=r.data.from;if(a)for(var o=0;o<a.length;++o){var h=a[o];if(k(h.to,i))return l(h.from,[h.from,h.to]),void l(h.to,[h.from,h.to])}}n=(s||(r?r.data.from?r.data.from.push(t):r.data.from=[t]:(n=new M(e,t),c.insert(n))),new M(i)),c.insert(n)}}function O(t){Math.abs(t.x)<_&&(t.x=0),Math.abs(t.y)<_&&(t.y=0)}function R(t){throw new Error(t)}function F(t,e){return t?e?t.concat(e):t:e}function T(t,e){var i=e.y-t.y;return Math.abs(i)<_&&(i=t.x-e.x,Math.abs(i)<_&&(i=0)),i}function E(t){var e,i,r=t.width||500,n=t.height||500,s=(null==(e=t.mondrian)?void 0:e.style)||"random",a=(null==(e=t.mondrian)?void 0:e.lineWidth)||1,o=(null==(e=t.mondrian)?void 0:e.backgroundColor)||"#fff",h=(null==(e=t.mondrian)?void 0:e.enableGradient)||!1,l=(null==(t=t.mondrian)?void 0:t.palette)||["#0e448c","#f61710","transparent","#ffd313","transparent"];"classic"===(s="random"===s?u(["neo","classic"]):s)&&(i=j(r,n)),"neo"===s&&(i=C(r,n));var c=[];return i.lines.forEach(function(t){c.push({type:f.line,points:t,fill:P.isReadable(o,"#fff")?"#fff":"#000",strokeWidth:"random"===a?x(.5,4):a,target:null})}),i.polygons.forEach(function(t){c.push({type:f.polygon,points:t,gradient:h?function(t,e){var i=d(t),r=i.triad();0===x(0,4)&&(r=i.tetrad()),1===x(0,4)&&(r=i.splitcomplement()),2===x(0,4)&&(r=i.monochromatic()),3===x(0,4)&&(r=i.analogous());r=u(r).toHexString();return{x1:0,y1:e,x2:0,y2:e,stops:["transparent"===t?"transparent":i.toHexString(),"transparent"===t?"transparent":r]}}(u(l),n):void 0,fill:u(l),target:null})}),c}var P=a,C=function(t,e){var p,_,m=Math.floor((e<t?t:e)/100*30),i=x(30,t-Math.floor(t/100*10)),r=x(30,e-Math.floor(e/100*10)),s={x:(t-i)/2,y:(e-r)/2,w:i,h:r},o=[],r=3===x(1,5),a=r?x(-20,20):0,h=r?x(-20,20):0,y=!(3===x(1,5)),l=[{x:s.x,y:s.x,toIdx:1,line0:0,line1:1},{x:s.x+s.w,y:s.y,toIdx:2,line0:0,line1:1},{x:s.x+s.w,y:s.y+s.h,toIdx:3,line0:0,line1:1},{x:s.x,y:s.y+s.h,toIdx:0,line0:0,line1:1}];(l=l.concat((_=[],(p=l).slice(0,2).forEach(function(t,e){var i=y?x(-m,m):x(-m/2,m/2),r=y?x(-m,m):-i,n=y?x(-m,m):x(-m/2,m/2),s=y?x(-m,m):-n,a=t.x,o=t.y,h=t.toIdx,l=p[h||0],c=l.x,f=l.y,u=Math.atan2(f-o,c-a),d=p[e+2],g=d.x,t=d.y,h=d.toIdx,l=p[h||0],d=l.x,h=l.y,l=Math.atan2(h-t,d-g);_.push.apply(_,[{x:(g+d)/2-i*Math.cos(l),y:(t+h)/2-i*Math.sin(l),toIdx:p.length+_.length+1,line0:0,line1:1},{x:(a+c)/2-r*Math.cos(u),y:(o+f)/2-r*Math.sin(u),line0:0,line1:1}]),e===x(1,2)&&_.push.apply(_,[{x:(g+d)/2-n*Math.cos(l),y:(t+h)/2-n*Math.sin(l),toIdx:p.length+_.length+1,line0:0,line1:1},{x:(a+c)/2-s*Math.cos(u),y:(o+f)/2-s*Math.sin(u),line0:0,line1:1}])}),_)).map(function(t){var e=Math.tan(a*Math.PI/180),i=Math.tan(h*Math.PI/180),r=t.x,n=t.y;return t.origX=r,t.origY=n,t.y=r*i+n-i*s.h,t.x=r+n*e-e*s.w,t.y=r*i+n-i*s.h,t})).filter(function(t){return void 0!==t.toIdx}).forEach(function(t,e){var i=y?x(10,m):0,r=t.x,n=t.y,s=t.toIdx,a=l[void 0===s?0:s],t=a.x,s=a.y,a=Math.atan2(s-n,t-r);o.push([r-i*Math.cos(a),n-i*Math.sin(a),t+i*Math.cos(a),s+i*Math.sin(a)])});var c=S(o.map(function(t,e){return{from:{x:t[0],y:t[1]},to:{x:t[2],y:t[3]},i:e}}),{}).run().map(function(t,e){return v({},t,{index:e})}),f=new b;c.forEach(function(t,e){f.addVertex(e)});var u={};c.forEach(function(a,o){a.segments.forEach(function(i){var r=0,n="",s=0;c.filter(function(t,e){return e!==o&&t.segments.map(function(t){return t.i}).includes(i.i)}).forEach(function(t){var e=Math.hypot(a.point.x-t.point.x,a.point.y-t.point.y);(e<r||0===r)&&(r=e,n=o+"_"+t.index,s=t.index)}),f.addEdge(o,s,r),f.addEdge(s,o,r),u[n]=r})});var d=[],g=Object.keys(f.vertices).length+1;Object.keys(f.vertices).map(function(t){return parseInt(t)}).forEach(function(t){var h=new Array(1e3).fill(Boolean).map(function(t){return[]}),e=new Array(1e3).fill(Boolean).map(function(t){return[]}),i=t;if(f.vertices[i]){var r=f.vertices[i],n=[],t=Object.keys(r.edges).map(function(t){return parseInt(t)});t.forEach(function(e){n.push([i,e]),Object.keys(f.vertices[e].edges).map(function(t){return parseInt(t)}).forEach(function(t){n.push([e,t])})}),t.forEach(function(e){Object.keys(f.vertices[e].edges).map(function(t){return parseInt(t)}).forEach(function(t){n.push([e,t])})}),n.forEach(function(t){var e;e=0===t[0]?g:t[0],t=0===t[1]?g:t[1],h[e].push(t),h[t].push(e)});var r=new Array(1e3).fill(Boolean).map(function(t){return 0}),t=new Array(1e3).fill(Boolean).map(function(t){return 0}),s=new Array(1e3).fill(Boolean).map(function(t){return 0}),l=0;(function t(e,i,r,n,s){if(2!==r[e])if(1!==r[e]){for(var a in s[e]=i,r[e]=1,h[e]){a=h[e][parseInt(a)];a!==s[e]&&t(a,e,r,n,s)}r[e]=2}else{l+=1;var o=i;for(n[o]=l;o!==e;)n[o=s[o]]=l}})(i,0,r,s,t);for(var a=1;a<24;a++)0!==s[a]&&e[s[a]].push(a);for(var o,c=1;c<l+1;c++)3<=e[c].length&&(o=e[c].flat().map(function(t){return t===g?0:t}),d.map(function(t){return t.join()}).includes(o.join())||d.push(o))}});var n=[];return d.forEach(function(t){var r=t.map(function(t){return{x:c[t].point.x,y:c[t].point.y,angle:0}}),i=r.reduce(function(t,e){var i=e.x,e=e.y;return t.x+=i/r.length,t.y+=e/r.length,t},{x:0,y:0}),t=r.map(function(t){var e=t.x,t=t.y;return{x:e,y:t,angle:180*Math.atan2(t-i.y,e-i.x)/Math.PI}}).sort(function(t,e){return t.angle-e.angle});n.push(t.map(function(t){return[t.x,t.y]}).flat())}),{lines:o,polygons:n}},j=function(g,p){var e=[],i=[];return function(){for(var t=Math.floor(g/Math.floor(g/100*15)),e=Math.floor(p/Math.floor(p/100*15)),i=Array(e).fill(0).map(function(){return Array(t).fill(0)}),r=0,n=0,s=e,a=t,o=[];r<e;){var h=Math.floor(Math.random()*s+1),l=Math.floor(Math.random()*a+1);o.push({x:r/e*g,y:n/t*p,width:(r+h)/e*g-r/e*g,height:(n+l)/t*p-n/t*p});for(var c=r;c<r+h;c++)for(var f=n;f<n+l;f++)i[c][f]=1;if(t<=n+l?(r++,n=0):n+=l,e<=r)return o;for(;1===i[r][n];)if(t<=(n+=1)&&(r++,n=0),e<=r)return o;for(var u=r;u<e&&0===i[u][n];u++)s=u-r+1;for(var d=n;d<t&&0===i[r][d];d++)a=d-n+1}return o}().forEach(function(t){e.push([t.x,t.y,t.x+t.width,t.y,t.x+t.width,t.y+t.height,t.x,t.y+t.height]),i.push([t.x,t.y,t.x+t.width,t.y]),i.push([t.x+t.width,t.y+t.height,t.x+t.width,t.y])}),{lines:i,polygons:e}},L={move:"M",line:"L",curve:"C",arc:"A",close:"Z"};"undefined"!=typeof window?X=window:"undefined"!=typeof global?X=global:"undefined"!=typeof self&&(X=self);function I(t){return{translateX:t.e,translateY:t.f,scaleX:Math.sqrt(t.a*t.a+t.b*t.b),scaleY:Math.sqrt(t.c*t.c+t.d*t.d),rotation:180*Math.atan2(t.b,t.a)/Math.PI}}function N(t,e){e=e&&e.identity()||new D;for(var i=t,r=[];i&&i._matrix;)r.push(i._matrix),i=i.parent;r.reverse();for(var n=0;n<r.length;n++){var s=r[n].elements;e.multiply(s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8],s[9])}return e}function B(t,e,i){return i*(e-t)+t}function z(t,e){for(;t<0;)t+=e;return t%e}function H(t){return Math.floor(1e6*t)/1e6}var D,U=X,s=function(t){D=t},q=U.Float32Array||Array,X=Object.freeze({__proto__:null,decomposeMatrix:I,getComputedMatrix:N,setMatrix:s,lerp:B,mod:z,NumArray:q,toFixed:H}),W=Array.prototype.slice,G={isNaN:function(t){return"number"==typeof t&&t!==+t},isElement:function(t){return!(!t||1!==t.nodeType)},isObject:function(t){var e=typeof t;return"function"==e||"object"==e&&!!t},extend:function(t){for(var e=W.call(arguments,1),i=0;i<e.length;i++){var r,n=e[i];for(r in n)t[r]=n[r]}return t},defaults:function(t){for(var e=W.call(arguments,1),i=0;i<e.length;i++){var r,n=e[i];for(r in n)void 0===t[r]&&(t[r]=n[r])}return t},each:function(t,e,i){for(var r=i||this,n=!function(t){if(null==t)return!1;t=t.length;return"number"==typeof t&&0<=t&&t<4294967296}(t)&&Object.keys(t),s=(n||t).length,a=0;a<s;a++){var o=n?n[a]:a;e.call(r,t[o],o,t)}return t},performance:U.performance&&U.performance.now?U.performance:Date},Y={on:$,off:Z,trigger:function(t){var e=this;if(!e._events)return e;var i=Array.prototype.slice.call(arguments,1),t=e._events[t];return t&&function(e,i,r){var t;switch(r.length){case 0:t=function(t){i[t].call(e,r[0])};break;case 1:t=function(t){i[t].call(e,r[0],r[1])};break;case 2:t=function(t){i[t].call(e,r[0],r[1],r[2])};break;case 3:t=function(t){i[t].call(e,r[0],r[1],r[2],r[3])};break;default:t=function(t){i[t].apply(e,r)}}for(var n=0;n<i.length;n++)t(n)}(e,t,i),e},listen:function(t,e,i){var r,n=this;return t&&((r=function(){i.apply(n,arguments)}).obj=t,r.name=e,r.handler=i,t.on(e,r)),n},ignore:function(t,e,i){return t.off(e,i),this},Types:{play:"play",pause:"pause",update:"update",render:"render",resize:"resize",change:"change",remove:"remove",insert:"insert",order:"order",load:"load"}};function $(t,e){var i=this;return i._events||(i._events={}),(i._events[t]||(i._events[t]=[])).push(e),i}function Z(t,e){var i=this;if(!i._events)return i;if(!t&&!e)return i._events={},i;for(var r=t?[t]:Object.keys(i._events),n=0,s=r.length;n<s;n++){t=r[n];var a=i._events[t];if(a){var o=[];if(e)for(var h=0,l=a.length;h<l;h++){var c=(c=a[h]).handler||c;e&&e!==c&&o.push(c)}i._events[t]=o}}return i}function K(t,e){this.x=t||0,this.y=e||0}Y.bind=$,Y.unbind=Z,G.extend(K,{zero:new K,add:function(t,e){return new K(t.x+e.x,t.y+e.y)},sub:function(t,e){return new K(t.x-e.x,t.y-e.y)},subtract:function(t,e){return K.sub(t,e)},ratioBetween:function(t,e){return(t.x*e.x+t.y*e.y)/(t.length()*e.length())},angleBetween:function(t,e){var i,r;return r=4<=arguments.length?(i=t-arguments[2],e-arguments[3]):(i=t.x-e.x,t.y-e.y),Math.atan2(r,i)},distanceBetween:function(t,e){return Math.sqrt(K.distanceBetweenSquared(t,e))},distanceBetweenSquared:function(t,e){var i=t.x-e.x,e=t.y-e.y;return i*i+e*e},MakeObservable:function(t){t.bind=t.on=function(){return this._bound||(this._x=this.x,this._y=this.y,Object.defineProperty(this,"x",Q),Object.defineProperty(this,"y",tt),G.extend(this,J),this._bound=!0),Y.bind.apply(this,arguments),this}}}),G.extend(K.prototype,Y,{constructor:K,set:function(t,e){return this.x=t,this.y=e,this},copy:function(t){return this.x=t.x,this.y=t.y,this},clear:function(){return this.x=0,this.y=0,this},clone:function(){return new K(this.x,this.y)},add:function(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x+=t,this.y+=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x+=t.x,this.y+=t.y):(this.x+=t,this.y+=e)),this},addSelf:function(t){return this.add.apply(this,arguments)},sub:function(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x-=t,this.y-=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x-=t.x,this.y-=t.y):(this.x-=t,this.y-=e)),this},subtract:function(){return this.sub.apply(this,arguments)},subSelf:function(t){return this.sub.apply(this,arguments)},subtractSelf:function(t){return this.sub.apply(this,arguments)},multiply:function(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x*=t,this.y*=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x*=t.x,this.y*=t.y):(this.x*=t,this.y*=e)),this},multiplySelf:function(t){return this.multiply.apply(this,arguments)},multiplyScalar:function(t){return this.multiply(t)},divide:function(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x/=t,this.y/=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x/=t.x,this.y/=t.y):(this.x/=t,this.y/=e),G.isNaN(this.x)&&(this.x=0),G.isNaN(this.y)&&(this.y=0)),this},divideSelf:function(t){return this.divide.apply(this,arguments)},divideScalar:function(t){return this.divide(t)},negate:function(){return this.multiply(-1)},dot:function(t){return this.x*t.x+this.y*t.y},length:function(){return Math.sqrt(this.lengthSquared())},lengthSquared:function(){return this.x*this.x+this.y*this.y},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,t=this.y-t.y;return e*e+t*t},setLength:function(t){return this.normalize().multiplyScalar(t)},equals:function(t,e){return e=void 0===e?1e-4:e,this.distanceTo(t)<e},lerp:function(t,e){var i=(t.x-this.x)*e+this.x,e=(t.y-this.y)*e+this.y;return this.set(i,e)},isZero:function(t){return t=void 0===t?1e-4:t,this.length()<t},toString:function(){return this.x+", "+this.y},toObject:function(){return{x:this.x,y:this.y}},rotate:function(t){var e=Math.cos(t),t=Math.sin(t);return this.x=this.x*e-this.y*t,this.y=this.x*t+this.y*e,this}});var J={constructor:K,set:function(t,e){return this._x=t,this._y=e,this.trigger(Y.Types.change)},copy:function(t){return this._x=t.x,this._y=t.y,this.trigger(Y.Types.change)},clear:function(){return this._x=0,this._y=0,this.trigger(Y.Types.change)},clone:function(){return new K(this._x,this._y)},add:function(t,e){return arguments.length<=0?this:(arguments.length<=1?"number"==typeof t?(this._x+=t,this._y+=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this._x+=t.x,this._y+=t.y):(this._x+=t,this._y+=e),this.trigger(Y.Types.change))},sub:function(t,e){return arguments.length<=0?this:(arguments.length<=1?"number"==typeof t?(this._x-=t,this._y-=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this._x-=t.x,this._y-=t.y):(this._x-=t,this._y-=e),this.trigger(Y.Types.change))},multiply:function(t,e){return arguments.length<=0?this:(arguments.length<=1?"number"==typeof t?(this._x*=t,this._y*=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this._x*=t.x,this._y*=t.y):(this._x*=t,this._y*=e),this.trigger(Y.Types.change))},divide:function(t,e){return arguments.length<=0?this:(arguments.length<=1?"number"==typeof t?(this._x/=t,this._y/=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this._x/=t.x,this._y/=t.y):(this._x/=t,this._y/=e),G.isNaN(this._x)&&(this._x=0),G.isNaN(this._y)&&(this._y=0),this.trigger(Y.Types.change))},dot:function(t){return this._x*t.x+this._y*t.y},lengthSquared:function(){return this._x*this._x+this._y*this._y},distanceToSquared:function(t){var e=this._x-t.x,t=this._y-t.y;return e*e+t*t},lerp:function(t,e){var i=(t.x-this._x)*e+this._x,e=(t.y-this._y)*e+this._y;return this.set(i,e)},toString:function(){return this._x+", "+this._y},toObject:function(){return{x:this._x,y:this._y}},rotate:function(t){var e=Math.cos(t),t=Math.sin(t);return this._x=this._x*e-this._y*t,this._y=this._x*t+this._y*e,this}},Q={enumerable:!0,get:function(){return this._x},set:function(t){this._x=t,this.trigger(Y.Types.change,"x")}},tt={enumerable:!0,get:function(){return this._y},set:function(t){this._y=t,this.trigger(Y.Types.change,"y")}};function et(t,e,i,r,n,s,a){K.call(this,t,e),this._broadcast=function(){this.trigger(Y.Types.change)}.bind(this),this._command=a||L.move,this._relative=!0;var o="number"==typeof i,t="number"==typeof r,e="number"==typeof n,a="number"==typeof s;(o||t||e||a)&&et.AppendCurveProperties(this),o&&(this.controls.left.x=i),t&&(this.controls.left.y=r),e&&(this.controls.right.x=n),a&&(this.controls.right.y=s)}K.MakeObservable(K.prototype),G.extend(et,{AppendCurveProperties:function(t){t.relative=!0,t.controls={},t.controls.left=new K(0,0),t.controls.right=new K(0,0)},MakeObservable:function(t){Object.defineProperty(t,"command",{enumerable:!0,get:function(){return this._command},set:function(t){this._command=t,this._command!==L.curve||G.isObject(this.controls)||et.AppendCurveProperties(this),this.trigger(Y.Types.change)}}),Object.defineProperty(t,"relative",{enumerable:!0,get:function(){return this._relative},set:function(t){this._relative!=t&&(this._relative=!!t,this.trigger(Y.Types.change))}}),G.extend(t,K.prototype,it),t.bind=t.on=function(){var t=this._bound;K.prototype.bind.apply(this,arguments),t||G.extend(this,it)}}});var it={constructor:et,listen:function(){return G.isObject(this.controls)||et.AppendCurveProperties(this),this.controls.left.bind(Y.Types.change,this._broadcast),this.controls.right.bind(Y.Types.change,this._broadcast),this},ignore:function(){return this.controls.left.unbind(Y.Types.change,this._broadcast),this.controls.right.unbind(Y.Types.change,this._broadcast),this},copy:function(t){return this.x=t.x,this.y=t.y,"string"==typeof t.command&&(this.command=t.command),G.isObject(t.controls)&&(G.isObject(this.controls)||et.AppendCurveProperties(this),this.controls.left.copy(t.controls.left),this.controls.right.copy(t.controls.right)),"boolean"==typeof t.relative&&(this.relative=t.relative),this.command===L.arc&&(this.rx=t.rx,this.ry=t.ry,this.xAxisRotation=t.xAxisRotation,this.largeArcFlag=t.largeArcFlag,this.sweepFlag=t.sweepFlag),this},clone:function(){var t=this.controls,t=new et(this.x,this.y,t&&t.left.x,t&&t.left.y,t&&t.right.x,t&&t.right.y,this.command);return t.relative=this._relative,t},toObject:function(){var t={x:this.x,y:this.y};return this._command&&(t.command=this._command),this._relative&&(t.relative=this._relative),this.controls&&(t.controls={left:this.controls.left.toObject(),right:this.controls.right.toObject()}),t},toString:function(){return(this.controls?[this._x,this._y,this.controls.left.x,this.controls.left.y,this.controls.right.x,this.controls.right.y,this._command,this._relative?1:0]:[this._x,this._y]).join(", ")}};et.MakeObservable(et.prototype);var rt=Math.cos,nt=Math.sin,st=Math.tan,at=[];function ot(t,e,i,r,n,s){this.elements=new q(9);Array.isArray(t)||(t=Array.prototype.slice.call(arguments)),this.identity(),0<t.length&&this.set(t)}s(ot),G.extend(ot,{Identity:[1,0,0,0,1,0,0,0,1],Multiply:function(t,e,i){if(e.length<=3){var r=e[0]||0,n=e[1]||0,s=e[2]||0;return{x:t[0]*r+t[1]*n+t[2]*s,y:t[3]*r+t[4]*n+t[5]*s,z:t[6]*r+t[7]*n+t[8]*s}}var a=t[0],o=t[1],h=t[2],l=t[3],c=t[4],f=t[5],u=t[6],d=t[7],g=t[8],p=e[0],_=e[1],m=e[2],y=e[3],r=e[4],n=e[5],s=e[6],t=e[7],e=e[8];return(i=i||new q(9))[0]=a*p+o*y+h*s,i[1]=a*_+o*r+h*t,i[2]=a*m+o*n+h*e,i[3]=l*p+c*y+f*s,i[4]=l*_+c*r+f*t,i[5]=l*m+c*n+f*e,i[6]=u*p+d*y+g*s,i[7]=u*_+d*r+g*t,i[8]=u*m+d*n+g*e,i}}),G.extend(ot.prototype,Y,{constructor:ot,manual:!1,set:function(t,e,i,r,n,s,a,o,h){var l;return void 0===e&&(t=(l=t)[0],e=l[1],i=l[2],r=l[3],n=l[4],s=l[5],a=l[6],o=l[7],h=l[8]),this.elements[0]=t,this.elements[1]=e,this.elements[2]=i,this.elements[3]=r,this.elements[4]=n,this.elements[5]=s,this.elements[6]=a,this.elements[7]=o,this.elements[8]=h,this.trigger(Y.Types.change)},copy:function(t){return this.elements[0]=t.elements[0],this.elements[1]=t.elements[1],this.elements[2]=t.elements[2],this.elements[3]=t.elements[3],this.elements[4]=t.elements[4],this.elements[5]=t.elements[5],this.elements[6]=t.elements[6],this.elements[7]=t.elements[7],this.elements[8]=t.elements[8],this.manual=t.manual,this.trigger(Y.Types.change)},identity:function(){return this.elements[0]=ot.Identity[0],this.elements[1]=ot.Identity[1],this.elements[2]=ot.Identity[2],this.elements[3]=ot.Identity[3],this.elements[4]=ot.Identity[4],this.elements[5]=ot.Identity[5],this.elements[6]=ot.Identity[6],this.elements[7]=ot.Identity[7],this.elements[8]=ot.Identity[8],this.trigger(Y.Types.change)},multiply:function(t,e,i,r,n,s,a,o,h){if(void 0===e)return this.elements[0]*=t,this.elements[1]*=t,this.elements[2]*=t,this.elements[3]*=t,this.elements[4]*=t,this.elements[5]*=t,this.elements[6]*=t,this.elements[7]*=t,this.elements[8]*=t,this.trigger(Y.Types.change);if(void 0===r)return{x:(n=this.elements)[0]*(t=t||0)+n[1]*(e=e||0)+n[2]*(i=i||0),y:n[3]*t+n[4]*e+n[5]*i,z:n[6]*t+n[7]*e+n[8]*i};var l=this.elements,c=[t,e,i,r,n,s,a,o,h],f=l[0],u=l[1],d=l[2],g=l[3],p=l[4],_=l[5],m=l[6],t=l[7],e=l[8],i=c[0],r=c[1],n=c[2],s=c[3],a=c[4],o=c[5],h=c[6],l=c[7],c=c[8];return this.elements[0]=f*i+u*s+d*h,this.elements[1]=f*r+u*a+d*l,this.elements[2]=f*n+u*o+d*c,this.elements[3]=g*i+p*s+_*h,this.elements[4]=g*r+p*a+_*l,this.elements[5]=g*n+p*o+_*c,this.elements[6]=m*i+t*s+e*h,this.elements[7]=m*r+t*a+e*l,this.elements[8]=m*n+t*o+e*c,this.trigger(Y.Types.change)},inverse:function(t){var e=this.elements;t=t||new ot;var i=e[0],r=e[1],n=e[2],s=e[3],a=e[4],o=e[5],h=e[6],l=e[7],c=e[8],f=c*a-o*l,u=-c*s+o*h,d=l*s-a*h,e=i*f+r*u+n*d;return e?(t.elements[0]=f*(e=1/e),t.elements[1]=(-c*r+n*l)*e,t.elements[2]=(o*r-n*a)*e,t.elements[3]=u*e,t.elements[4]=(c*i-n*h)*e,t.elements[5]=(-o*i+n*s)*e,t.elements[6]=d*e,t.elements[7]=(-l*i+r*h)*e,t.elements[8]=(a*i-r*s)*e,t):null},scale:function(t,e){return this.multiply(t,0,0,0,e=arguments.length<=1?t:e,0,0,0,1)},rotate:function(t){var e=rt(t),t=nt(t);return this.multiply(e,-t,0,t,e,0,0,0,1)},translate:function(t,e){return this.multiply(1,0,t,0,1,e,0,0,1)},skewX:function(t){t=st(t);return this.multiply(1,t,0,0,1,0,0,0,1)},skewY:function(t){t=st(t);return this.multiply(1,0,0,t,1,0,0,0,1)},toString:function(t){return at.length=0,this.toTransformArray(t,at),at.map(H).join(" ")},toTransformArray:function(t,e){var i=this.elements,r=!!e,n=i[0],s=i[1],a=i[2],o=i[3],h=i[4],l=i[5];if(t){var c=i[6],t=i[7],i=i[8];return r?(e[0]=n,e[1]=o,e[2]=c,e[3]=s,e[4]=h,e[5]=t,e[6]=a,e[7]=l,void(e[8]=i)):[n,o,c,s,h,t,a,l,i]}return r?(e[0]=n,e[1]=o,e[2]=s,e[3]=h,e[4]=a,void(e[5]=l)):[n,o,s,h,a,l]},toArray:function(t,e){var i=this.elements,r=!!e,n=i[0],s=i[1],a=i[2],o=i[3],h=i[4],l=i[5];if(t){var c=i[6],t=i[7],i=i[8];return r?(e[0]=n,e[1]=s,e[2]=a,e[3]=o,e[4]=h,e[5]=l,e[6]=c,e[7]=t,void(e[8]=i)):[n,s,a,o,h,l,c,t,i]}return r?(e[0]=n,e[1]=s,e[2]=a,e[3]=o,e[4]=h,void(e[5]=l)):[n,s,a,o,h,l]},toObject:function(){return{elements:this.toArray(!0),manual:!!this.manual}},clone:function(){return(new ot).copy(this)}});function ht(t,e,i,r,n){var s=1-t;return s*s*s*e+3*s*s*t*i+3*s*t*t*r+t*t*t*n}function lt(t,e,i,r,n,s,a,o,h){var l=(h=h||yt.RecursionLimit)+1;if(Math.abs(t-a)<.001&&Math.abs(e-o)<.001)return[new et(a,o)];for(var c=[],f=0;f<l;f++){var u=f/l,d=ht(u,t,i,n,a),u=ht(u,e,r,s,o);c.push(new et(d,u))}return c}function ct(t,e,i,r,n,s,a,o,h){if(t===i&&e===r&&n===a&&s===o){var l=a-t,c=o-e;return Math.sqrt(l*l+c*c)}var f=9*(i-n)+3*(a-t),u=6*(t+n)-12*i,d=3*(i-t),g=9*(r-s)+3*(o-e),p=6*(e+s)-12*r,_=3*(r-e);return vt(function(t){var e=(f*t+u)*t+d,t=(g*t+p)*t+_;return Math.sqrt(e*e+t*t)},0,1,h||yt.RecursionLimit)}function ft(t,e,i,r,n,s,a,o){for(var h,l,c,f,u,d=[],g=[[],[]],p=0;p<2;++p)u=0==p?(l=6*t-12*i+6*n,h=-3*t+9*i-9*n+3*a,3*i-3*t):(l=6*e-12*r+6*s,h=-3*e+9*r-9*s+3*o,3*r-3*e),Math.abs(h)<1e-12?Math.abs(l)<1e-12||0<(c=-u/l)&&c<1&&d.push(c):(f=l*l-4*u*h,u=Math.sqrt(f),f<0||(0<(f=(-l+u)/(2*h))&&f<1&&d.push(f),0<(u=(-l-u)/(2*h))&&u<1&&d.push(u)));for(var _,m=d.length,y=m;m--;)c=d[m],g[0][m]=(_=1-c)*_*_*t+3*_*_*c*i+3*_*c*c*n+c*c*c*a,g[1][m]=_*_*_*e+3*_*_*c*r+3*_*c*c*s+c*c*c*o;return g[0][y]=t,g[1][y]=e,g[0][y+1]=a,g[1][y+1]=o,g[0].length=g[1].length=y+2,{min:{x:Math.min.apply(0,g[0]),y:Math.min.apply(0,g[1])},max:{x:Math.max.apply(0,g[0]),y:Math.max.apply(0,g[1])}}}function ut(t,e){for(var i=t.length,r=i-1,n=0;n<i;n++){var s=t[n];G.isObject(s.controls)||et.AppendCurveProperties(s);var a=e?z(n-1,i):Math.max(n-1,0),o=e?z(n+1,i):Math.min(n+1,r),a=t[a],s=s,o=t[o];bt(a,s,o),s.command=0===n?L.move:L.curve}}function dt(t,e,i){return new K(2*t.x-(e.x+t.x)-(i?t.x:0),2*t.y-(e.y+t.y)-(i?t.y:0))}function gt(t){return xt/((t=t).webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}var pt=0,_t={nextFrameID:null,Types:{webgl:"WebGLRenderer",svg:"SVGRenderer",canvas:"CanvasRenderer"},Version:"v0.7.5",PublishDate:"2021-04-23T17:59:51.706Z",Identifier:"two-",Resolution:12,AutoCalculateImportedMatrices:!0,Instances:[],uniqueId:function(){return pt++}},mt=Math.PI/2,yt={CollinearityEpsilon:Math.pow(10,-30),RecursionLimit:16,CuspLimit:0,Tolerance:{distance:.25,angle:0,epsilon:Number.EPSILON},abscissas:[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],weights:[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]]},vt=function(t,e,i,r){for(var n=yt.abscissas[r-2],s=yt.weights[r-2],a=.5*(i-e),o=a+e,h=0,l=r+1>>1,c=1&r?s[h++]*t(o):0;h<l;){var f=a*n[h];c+=s[h++]*(t(o+f)+t(o-f))}return a*c},bt=function(t,e,i){var r=K.angleBetween(t,e),n=K.angleBetween(i,e),s=K.distanceBetween(t,e),t=K.distanceBetween(i,e),i=(r+n)/2;return s<1e-4||t<1e-4?"boolean"!=typeof e.relative||e.relative||(e.controls.left.copy(e),e.controls.right.copy(e)):(s*=.33,t*=.33,n<r?i+=mt:i-=mt,e.controls.left.x=Math.cos(i)*s,e.controls.left.y=Math.sin(i)*s,i-=Math.PI,e.controls.right.x=Math.cos(i)*t,e.controls.right.y=Math.sin(i)*t,"boolean"!=typeof e.relative||e.relative||(e.controls.left.x+=e.x,e.controls.left.y+=e.y,e.controls.right.x+=e.x,e.controls.right.y+=e.y)),e},s=Object.freeze({__proto__:null,Curve:yt,getComponentOnCubicBezier:ht,subdivide:lt,getCurveLength:ct,getCurveBoundingBox:ft,integrate:vt,getCurveFromPoints:ut,getControlPoints:bt,getReflection:dt,getAnchorsFromArcData:function(t,e,i,r,n,s,a){(new ot).translate(t.x,t.y).rotate(e);for(var o=_t.Resolution,h=0;h<o;h++){var l=(h+1)/o,l=(l=a?1-l:l)*s+n,l=new et(i*Math.cos(l),r*Math.sin(l));et.AppendCurveProperties(l),l.command=L.line}}}),xt=U.devicePixelRatio||1;function wt(){Array.call(this),arguments[0]&&Array.isArray(arguments[0])?0<arguments[0].length&&Array.prototype.push.apply(this,arguments[0]):0<arguments.length&&Array.prototype.push.apply(this,arguments)}function kt(){this.renderer={},this._renderer.flagMatrix=kt.FlagMatrix.bind(this),this.isShape=!0,this.id=_t.Identifier+_t.uniqueId(),this.classList=[],this.matrix=new ot,this.translation=new K,this.rotation=0,this.scale=1,this.skewX=0,this.skewY=0}function Mt(t){wt.apply(this,arguments),Object.defineProperty(this,"_events",{value:{},enumerable:!1}),this.ids={},this.attach(Array.isArray(t)?t:Array.prototype.slice.call(arguments)),this.on(Y.Types.insert,this.attach),this.on(Y.Types.remove,this.detach)}wt.prototype=new Array,G.extend(wt.prototype,Y,{constructor:wt,pop:function(){var t=Array.prototype.pop.apply(this,arguments);return this.trigger(Y.Types.remove,[t]),t},shift:function(){var t=Array.prototype.shift.apply(this,arguments);return this.trigger(Y.Types.remove,[t]),t},push:function(){var t=Array.prototype.push.apply(this,arguments);return this.trigger(Y.Types.insert,arguments),t},unshift:function(){var t=Array.prototype.unshift.apply(this,arguments);return this.trigger(Y.Types.insert,arguments),t},splice:function(){var t,e=Array.prototype.splice.apply(this,arguments);return this.trigger(Y.Types.remove,e),2<arguments.length&&(t=this.slice(arguments[0],arguments[0]+arguments.length-2),this.trigger(Y.Types.insert,t),this.trigger(Y.Types.order)),e},sort:function(){return Array.prototype.sort.apply(this,arguments),this.trigger(Y.Types.order),this},reverse:function(){return Array.prototype.reverse.apply(this,arguments),this.trigger(Y.Types.order),this},indexOf:function(){return Array.prototype.indexOf.apply(this,arguments)}}),G.extend(kt,{FlagMatrix:function(){this._flagMatrix=!0},MakeObservable:function(t){var e={enumerable:!1,get:function(){return this._translation},set:function(t){this._translation&&this._translation.unbind(Y.Types.change,this._renderer.flagMatrix),this._translation=t,this._translation.bind(Y.Types.change,this._renderer.flagMatrix),kt.FlagMatrix.call(this)}};Object.defineProperty(t,"translation",e),Object.defineProperty(t,"position",e),Object.defineProperty(t,"rotation",{enumerable:!0,get:function(){return this._rotation},set:function(t){this._rotation=t,this._flagMatrix=!0}}),Object.defineProperty(t,"scale",{enumerable:!0,get:function(){return this._scale},set:function(t){this._scale instanceof K&&this._scale.unbind(Y.Types.change,this._renderer.flagMatrix),this._scale=t,this._scale instanceof K&&this._scale.bind(Y.Types.change,this._renderer.flagMatrix),this._flagMatrix=!0,this._flagScale=!0}}),Object.defineProperty(t,"skewX",{enumerable:!0,get:function(){return this._skewX},set:function(t){this._skewX=t,this._flagMatrix=!0}}),Object.defineProperty(t,"skewY",{enumerable:!0,get:function(){return this._skewY},set:function(t){this._skewY=t,this._flagMatrix=!0}}),Object.defineProperty(t,"matrix",{enumerable:!0,get:function(){return this._matrix},set:function(t){this._matrix=t,this._flagMatrix=!0}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return this._id},set:function(t){t!==this._id&&(this._id=t,this._flagId=!0,this.parent&&(this.parent._flagId=!0))}}),Object.defineProperty(t,"className",{enumerable:!0,get:function(){return this._className},set:function(t){if(this._flagClassName=this._className!==t,this._flagClassName){for(var e=this._className.split(/\s+?/),i=t.split(/\s+?/),r=0;r<e.length;r++){var n=e[r],n=Array.prototype.indexOf.call(this.classList,n);0<=n&&this.classList.splice(n,1)}this.classList=this.classList.concat(i)}this._className=t}}),Object.defineProperty(t,"renderer",{enumerable:!1,get:function(){return this._renderer},set:function(t){this._renderer=t}})}}),G.extend(kt.prototype,Y,{constructor:kt,_flagId:!0,_flagMatrix:!0,_flagScale:!1,_flagClassName:!1,_id:"",_translation:null,_rotation:0,_scale:1,_skewX:0,_skewY:0,_className:"",addTo:function(t){return t.add(this),this},clone:function(t){var e=new kt;return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()},_update:function(t){return!this._matrix.manual&&this._flagMatrix&&(this._matrix.identity().translate(this.translation.x,this.translation.y),this._scale instanceof K?this._matrix.scale(this._scale.x,this._scale.y):this._matrix.scale(this._scale),this._matrix.rotate(this.rotation),this._matrix.skewX(this.skewX),this._matrix.skewY(this.skewY)),t&&this.parent&&this.parent._update&&this.parent._update(),this},flagReset:function(){return this._flagId=this._flagMatrix=this._flagScale=this._flagClassName=!1,this}}),kt.MakeObservable(kt.prototype),Mt.prototype=new wt,G.extend(Mt.prototype,{constructor:Mt,attach:function(t){for(var e=0;e<t.length;e++){var i=t[e];i&&i.id&&(this.ids[i.id]=i)}return this},detach:function(t){for(var e=0;e<t.length;e++)delete this.ids[t[e].id];return this}});var At=Math.min,St=Math.max;function Ot(t){kt.call(this,!0),this._renderer.type="group",this.additions=[],this.subtractions=[],this.children=Array.isArray(t)?t:Array.prototype.slice.call(arguments)}function Rt(t,e){var i,r=t.parent;function n(){0<e.subtractions.length&&0<=(i=Array.prototype.indexOf.call(e.subtractions,t))&&e.subtractions.splice(i,1),0<e.additions.length&&0<=(i=Array.prototype.indexOf.call(e.additions,t))&&e.additions.splice(i,1),(t.parent=e).additions.push(t),e._flagAdditions=!0}function s(){0<=(i=Array.prototype.indexOf.call(r.additions,t))&&r.additions.splice(i,1),(i=Array.prototype.indexOf.call(r.subtractions,t))<0&&(r.subtractions.push(t),r._flagSubtractions=!0)}r!==e?(r&&r.children.ids[t.id]&&(i=Array.prototype.indexOf.call(r.children,t),r.children.splice(i,1),s()),e?n():(s(),r._flagAdditions&&0===r.additions.length&&(r._flagAdditions=!1),r._flagSubtractions&&0===r.subtractions.length&&(r._flagSubtractions=!1),delete t.parent)):n()}G.extend(Ot,{Children:Mt,InsertChildren:function(t){for(var e=0;e<t.length;e++)Rt.call(this,t[e],this)},RemoveChildren:function(t){for(var e=0;e<t.length;e++)Rt.call(this,t[e])},OrderChildren:function(t){this._flagOrder=!0},Properties:["fill","stroke","linewidth","cap","join","miter","closed","curved","automatic"],MakeObservable:function(t){var e=Ot.Properties;Object.defineProperty(t,"visible",{enumerable:!0,get:function(){return this._visible},set:function(t){this._flagVisible=this._visible!==t||this._flagVisible,this._visible=t}}),Object.defineProperty(t,"opacity",{enumerable:!0,get:function(){return this._opacity},set:function(t){this._flagOpacity=this._opacity!==t||this._flagOpacity,this._opacity=t}}),Object.defineProperty(t,"beginning",{enumerable:!0,get:function(){return this._beginning},set:function(t){this._flagBeginning=this._beginning!==t||this._flagBeginning,this._beginning=t}}),Object.defineProperty(t,"ending",{enumerable:!0,get:function(){return this._ending},set:function(t){this._flagEnding=this._ending!==t||this._flagEnding,this._ending=t}}),Object.defineProperty(t,"length",{enumerable:!0,get:function(){if(this._flagLength||this._length<=0){if(this._length=0,!this.children)return this._length;for(var t=0;t<this.children.length;t++){var e=this.children[t];this._length+=e.length}}return this._length}}),kt.MakeObservable(t),Ot.MakeGetterSetters(t,e),Object.defineProperty(t,"children",{enumerable:!0,get:function(){return this._children},set:function(t){var e=Ot.InsertChildren.bind(this),i=Ot.RemoveChildren.bind(this),r=Ot.OrderChildren.bind(this);this._children&&(this._children.unbind(),0<this._children.length&&i(this._children)),this._children=new Mt(t),this._children.bind(Y.Types.insert,e),this._children.bind(Y.Types.remove,i),this._children.bind(Y.Types.order,r),0<t.length&&e(t)}}),Object.defineProperty(t,"mask",{enumerable:!0,get:function(){return this._mask},set:function(t){this._mask=t,this._flagMask=!0,t.clip||(t.clip=!0)}})},MakeGetterSetters:function(e,t){Array.isArray(t)||(t=[t]),G.each(t,function(t){Ot.MakeGetterSetter(e,t)})},MakeGetterSetter:function(t,i){var r="_"+i;Object.defineProperty(t,i,{enumerable:!0,get:function(){return this[r]},set:function(t){this[r]=t;for(var e=0;e<this.children.length;e++)this.children[e][i]=t}})}}),G.extend(Ot.prototype,kt.prototype,{constructor:Ot,_flagAdditions:!1,_flagSubtractions:!1,_flagOrder:!1,_flagOpacity:!0,_flagBeginning:!1,_flagEnding:!1,_flagLength:!1,_flagMask:!1,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,_length:0,_mask:null,clone:function(t){var e=new Ot,i=this.children.map(function(t){return t.clone()});return e.add(i),e.opacity=this.opacity,this.mask&&(e.mask=this.mask),e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.className=this.className,this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()},toObject:function(){var i={children:[],translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale instanceof K?this.scale.toObject():this.scale,opacity:this.opacity,className:this.className,mask:this.mask?this.mask.toObject():null};return this.matrix.manual&&(i.matrix=this.matrix.toObject()),G.each(this.children,function(t,e){i.children[e]=t.toObject()},this),i},corner:function(){for(var t=this.getBoundingClientRect(),e=0;e<this.children.length;e++){var i=this.children[e];i.translation.x-=t.left,i.translation.y-=t.top}return this},center:function(){for(var t=this.getBoundingClientRect(),e=t.left+t.width/2-this.translation.x,i=t.top+t.height/2-this.translation.y,r=0;r<this.children.length;r++){var n=this.children[r];n.isShape&&(n.translation.x-=e,n.translation.y-=i)}return this},getById:function(r){var n=null;return function t(e){if(e.id===r)return e;if(e.children)for(var i=0;i<e.children.length;i++)if(n=t(e.children[i]))return n;return null}(this)},getByClassName:function(r){var n=[];return function t(e){if(0<=Array.prototype.indexOf.call(e.classList,r)&&n.push(e),e.children)for(var i=0;i<e.children.length;i++)t(e.children[i]);return n}(this)},getByType:function(r){var n=[];return function t(e){if(e instanceof r&&n.push(e),e.children)for(var i=0;i<e.children.length;i++)t(e.children[i]);return n}(this)},add:function(t){t=t instanceof Array?t.slice():Array.prototype.slice.call(arguments);for(var e=0;e<t.length;e++){var i,r=t[e];r&&r.id&&(0<=(i=Array.prototype.indexOf.call(this.children,r))&&this.children.splice(i,1),this.children.push(r))}return this},remove:function(t){var e=this.parent;if(arguments.length<=0&&e)return e.remove(this),this;t=t instanceof Array?t.slice():Array.prototype.slice.call(arguments);for(var i=0;i<t.length;i++){var r=t[i];r&&this.children.ids[r.id]&&(0<=(r=this.children.indexOf(r))&&this.children.splice(r,1))}return this},getBoundingClientRect:function(t){var e,i,r,n;this._update(!0);for(var s=1/0,a=-1/0,o=1/0,h=-1/0,l=/texture|gradient/i,c=t?this._matrix:N(this),f=0;f<this.children.length;f++){var u=this.children[f];u.visible&&!l.test(u._renderer.type)&&"number"==typeof(e=u.getBoundingClientRect(t)).top&&"number"==typeof e.left&&"number"==typeof e.right&&"number"==typeof e.bottom&&(o=At(e.top,o),s=At(e.left,s),a=St(e.right,a),h=St(e.bottom,h))}return t&&(i=c.multiply(s,o,1),r=c.multiply(s,h,1),n=c.multiply(a,o,1),c=c.multiply(a,h,1),o=At(i.y,r.y,n.y,c.y),s=At(i.x,r.x,n.x,c.x),a=St(i.x,r.x,n.x,c.x),h=St(i.y,r.y,n.y,c.y)),{top:o,left:s,right:a,bottom:h,width:a-s,height:h-o}},noFill:function(){return this.children.forEach(function(t){t.noFill()}),this},noStroke:function(){return this.children.forEach(function(t){t.noStroke()}),this},subdivide:function(){var e=arguments;return this.children.forEach(function(t){t.subdivide.apply(t,e)}),this},_update:function(){var t,e;if(this._flagBeginning||this._flagEnding)for(var i=Math.min(this._beginning,this._ending),r=Math.max(this._beginning,this._ending),n=this.length,s=0,a=i*n,o=r*n,h=0;h<this.children.length;h++)s+(t=(e=this.children[h]).length)<a?(e.beginning=1,e.ending=1):o<s?(e.beginning=0,e.ending=0):s<a&&a<s+t?(e.beginning=(a-s)/t,e.ending=1):s<o&&o<s+t?(e.beginning=0,e.ending=(o-s)/t):(e.beginning=0,e.ending=1),s+=t;if(this._flagId)for(this.children.ids={},h=0;h<this.children.length;h++)e=this.children[h],this.children.ids[e.id]=e;return kt.prototype._update.apply(this,arguments)},flagReset:function(){return this._flagAdditions&&(this.additions.length=0,this._flagAdditions=!1),this._flagSubtractions&&(this.subtractions.length=0,this._flagSubtractions=!1),this._flagOrder=this._flagMask=this._flagOpacity=this._flagBeginning=this._flagEnding=!1,kt.prototype.flagReset.call(this),this}}),Ot.MakeObservable(Ot.prototype);function Ft(t){return 1==t[0]&&0==t[3]&&0==t[1]&&1==t[4]&&0==t[2]&&0==t[5]}var Tt=[],Et=2*Math.PI,Pt=Math.max,Ct=Math.min,jt=Math.abs,Lt=Math.sin,It=Math.cos,Nt=Math.acos,Bt=Math.sqrt,zt={isHidden:/(undefined|none|transparent)/i,alignments:{left:"start",middle:"center",right:"end"},shim:function(t,e){return t.tagName=t.nodeName=e||"canvas",t.nodeType=1,t.getAttribute=function(t){return this[t]},t.setAttribute=function(t,e){return this[t]=e,this},t},group:{renderChild:function(t){zt[t._renderer.type].render.call(t,this.ctx,!0,this.clip)},render:function(t){if(!this._visible)return this;this._update();var e=this._matrix.elements,i=this.parent;this._renderer.opacity=this._opacity*(i&&i._renderer?i._renderer.opacity:1);var r=this._mask,n=Ft(e),i=!n||!!r;if(this._renderer.context||(this._renderer.context={}),this._renderer.context.ctx=t,i&&(t.save(),n||t.transform(e[0],e[3],e[1],e[4],e[2],e[5])),r&&zt[r._renderer.type].render.call(r,t,!0),0<this._opacity&&0!==this._scale)for(var s=0;s<this.children.length;s++){var a=this.children[s];zt[a._renderer.type].render.call(a,t)}return i&&t.restore(),this.flagReset()}},path:{render:function(t,e,i){var r,n,s,a,o,h,l,c,f,u,d,g,p,_,m,y,v,b,x=this._clip,w=this._opacity*this.parent._renderer.opacity,k=this._visible;if(!e&&(!k||x||0==w))return this;this._update(),r=this._matrix.elements,n=this._stroke,s=this._linewidth,a=this._fill,o=this._cap,h=this._join,l=this._miter,c=this._closed,d=(u=(f=this._renderer.vertices).length)-1,e=Ft(r),k=this.dashes,e||(t.save(),t.transform(r[0],r[3],r[1],r[4],r[2],r[5])),a&&("string"==typeof a?t.fillStyle=a:(zt[a._renderer.type].render.call(a,t),t.fillStyle=a._renderer.effect)),n&&("string"==typeof n?t.strokeStyle=n:(zt[n._renderer.type].render.call(n,t),t.strokeStyle=n._renderer.effect),s&&(t.lineWidth=s),l&&(t.miterLimit=l),h&&(t.lineJoin=h),!c&&o&&(t.lineCap=o)),"number"==typeof w&&(t.globalAlpha=w),k&&0<k.length&&(t.lineDashOffset=k.offset||0,t.setLineDash(k)),t.beginPath();for(var M=0;M<f.length;M++)switch(y=(g=f[M]).x,v=g.y,g.command){case L.close:t.closePath();break;case L.arc:var A,S,O=g.rx,R=g.ry,F=g.xAxisRotation,T=g.largeArcFlag,E=g.sweepFlag,P=(S=f[A=c?z(M-1,u):Pt(M-1,0)]).x,C=S.y;zt.renderSvgArcCommand(t,P,C,O,R,T,E,F,y,v);break;case L.curve:A=c?z(M-1,u):Math.max(M-1,0),O=c?z(M+1,u):Math.min(M+1,d),S=f[A],f[O],T=S.controls&&S.controls.right||K.zero,E=g.controls&&g.controls.left||K.zero,F=S._relative?(m=T.x+S.x,T.y+S.y):(m=T.x,T.y),O=g._relative?(_=E.x+g.x,E.y+g.y):(_=E.x,E.y),t.bezierCurveTo(m,F,_,O,y,v),d<=M&&c&&(R=p,T=g.controls&&g.controls.right||K.zero,E=R.controls&&R.controls.left||K.zero,F=g._relative?(m=T.x+g.x,T.y+g.y):(m=T.x,T.y),O=R._relative?(_=E.x+R.x,E.y+R.y):(_=E.x,E.y),y=R.x,v=R.y,t.bezierCurveTo(m,F,_,O,y,v));break;case L.line:t.lineTo(y,v);break;case L.move:p=g,t.moveTo(y,v)}return c&&t.closePath(),x||i||(zt.isHidden.test(a)||((b=a._renderer&&a._renderer.offset)&&(t.save(),t.translate(-a._renderer.offset.x,-a._renderer.offset.y),t.scale(a._renderer.scale.x,a._renderer.scale.y)),t.fill(),b&&t.restore()),zt.isHidden.test(n)||((b=n._renderer&&n._renderer.offset)&&(t.save(),t.translate(-n._renderer.offset.x,-n._renderer.offset.y),t.scale(n._renderer.scale.x,n._renderer.scale.y),t.lineWidth=s/n._renderer.scale.x),t.stroke(),b&&t.restore())),e||t.restore(),x&&!i&&t.clip(),k&&0<k.length&&t.setLineDash(Tt),this.flagReset()}},text:{render:function(t,e,i){var r=this._opacity*this.parent._renderer.opacity,n=this._visible,s=this._clip;if(!e&&(!n||s||0==r))return this;this._update();var a,o,h,l,c,f,u,d,g,p,_=this._matrix.elements,m=this._stroke,y=this._linewidth,v=this._fill,b=this._decoration,x=Ft(_),w=v._renderer&&v._renderer.offset&&m._renderer&&m._renderer.offset,k=this.dashes,e=zt.alignments[this._alignment]||this._alignment,n=this._baseline;if(x||(t.save(),t.transform(_[0],_[3],_[1],_[4],_[2],_[5])),w||(t.font=[this._style,this._weight,this._size+"px/"+this._leading+"px",this._family].join(" ")),t.textAlign=e,t.textBaseline=n,v&&("string"==typeof v?t.fillStyle=v:(zt[v._renderer.type].render.call(v,t),t.fillStyle=v._renderer.effect)),m&&("string"==typeof m?t.strokeStyle=m:(zt[m._renderer.type].render.call(m,t),t.strokeStyle=m._renderer.effect),y&&(t.lineWidth=y)),"number"==typeof r&&(t.globalAlpha=r),k&&0<k.length&&(t.lineDashOffset=k.offset||0,t.setLineDash(k)),s||i||(zt.isHidden.test(v)||(v._renderer&&v._renderer.offset?(c=v._renderer.scale.x,f=v._renderer.scale.y,t.save(),t.translate(-v._renderer.offset.x,-v._renderer.offset.y),t.scale(c,f),a=this._size/v._renderer.scale.y,o=this._leading/v._renderer.scale.y,t.font=[this._style,this._weight,a+"px/",o+"px",this._family].join(" "),h=v._renderer.offset.x/v._renderer.scale.x,l=v._renderer.offset.y/v._renderer.scale.y,t.fillText(this.value,h,l),t.restore()):t.fillText(this.value,0,0)),zt.isHidden.test(m)||(m._renderer&&m._renderer.offset?(c=m._renderer.scale.x,f=m._renderer.scale.y,t.save(),t.translate(-m._renderer.offset.x,-m._renderer.offset.y),t.scale(c,f),a=this._size/m._renderer.scale.y,o=this._leading/m._renderer.scale.y,t.font=[this._style,this._weight,a+"px/",o+"px",this._family].join(" "),h=m._renderer.offset.x/m._renderer.scale.x,l=m._renderer.offset.y/m._renderer.scale.y,m=y/m._renderer.scale.x,t.lineWidth=m,t.strokeText(this.value,h,l),t.restore()):t.strokeText(this.value,0,0))),/(underline|strikethrough)/i.test(b)){var M=t.measureText(this.value),A=1;switch(b){case"underline":d=M.actualBoundingBoxAscent,p=M.actualBoundingBoxAscent;break;case"strikethrough":p=d=0,A=.5}switch(n){case"top":d+=this._size*A,p+=this._size*A;break;case"baseline":case"bottom":d-=this._size*A,p-=this._size*A}switch(e){case"left":case"start":u=0,g=M.width;break;case"right":case"end":u=-M.width,g=0;break;default:u=-M.width/2,g=M.width/2}t.lineWidth=Math.max(Math.floor(this._size/15),1),t.strokeStyle=t.fillStyle,t.beginPath(),t.moveTo(u,d),t.lineTo(g,p),t.stroke()}return x||t.restore(),s&&!i&&t.clip(),k&&0<k.length&&t.setLineDash(Tt),this.flagReset()}},"linear-gradient":{render:function(t){if(this._update(),!this._renderer.effect||this._flagEndPoints||this._flagStops){this._renderer.effect=t.createLinearGradient(this.left._x,this.left._y,this.right._x,this.right._y);for(var e=0;e<this.stops.length;e++){var i=this.stops[e];this._renderer.effect.addColorStop(i._offset,i._color)}}return this.flagReset()}},"radial-gradient":{render:function(t){if(this._update(),!this._renderer.effect||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops){this._renderer.effect=t.createRadialGradient(this.center._x,this.center._y,0,this.focal._x,this.focal._y,this._radius);for(var e=0;e<this.stops.length;e++){var i=this.stops[e];this._renderer.effect.addColorStop(i._offset,i._color)}}return this.flagReset()}},texture:{render:function(t){this._update();var e=this.image;return(!this._renderer.effect||(this._flagLoaded||this._flagImage||this._flagVideo||this._flagRepeat)&&this.loaded)&&(this._renderer.effect=t.createPattern(this.image,this._repeat)),(this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof K||(this._renderer.offset=new K),this._renderer.offset.x=-this._offset.x,this._renderer.offset.y=-this._offset.y,e&&(this._renderer.offset.x+=e.width/2,this._renderer.offset.y+=e.height/2,this._scale instanceof K?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.scale instanceof K||(this._renderer.scale=new K),this._scale instanceof K?this._renderer.scale.copy(this._scale):this._renderer.scale.set(this._scale,this._scale)),this.flagReset()}},renderSvgArcCommand:function(t,e,i,r,n,s,a,o,h,l){o=o*Math.PI/180,r=jt(r),n=jt(n);var c=(e-h)/2,f=(i-l)/2,u=It(o)*c+Lt(o)*f,d=-Lt(o)*c+It(o)*f,g=r*r,p=n*n,_=u*u,c=d*d,f=_/g+c/p;1<f&&(g=(r*=f=Bt(f))*r,p=(n*=f)*n);_=g*c+p*_,_=Bt(Pt(0,(g*p-_)/_)),s=(_=s===a?-_:_)*r*d/n,_=-_*n*u/r,h=It(o)*s-Lt(o)*_+(e+h)/2,i=Lt(o)*s+It(o)*_+(i+l)/2,l=Vt(1,0,(u-s)/r,(d-_)/n);!function(t,e,i,r,n,s,a,o,h){var l=yt.Tolerance.epsilon,c=a-s,a=Math.abs(c)<l;(c=z(c,Et))<l&&(c=a?0:Et);!0!==o||a||(c===Et?c=-Et:c-=Et);for(var f=0;f<_t.Resolution;f++){var u,d,g=f/(_t.Resolution-1),p=s+g*c,_=e+r*Math.cos(p),m=i+n*Math.sin(p);0!==h&&(u=Math.cos(h),d=Math.sin(h),_=(g=_-e)*u-(p=m-i)*d+e,m=g*d+p*u+i),t.lineTo(_,m)}}(t,h,i,r,n,l,l+Vt((u-s)/r,(d-_)/n,(-u-s)/r,(-d-_)/n)%Et,0===a,o)}};function Ht(t){var e=!1!==t.smoothing;this.domElement=t.domElement||document.createElement("canvas"),this.ctx=this.domElement.getContext("2d"),this.overdraw=t.overdraw||!1,void 0!==this.ctx.imageSmoothingEnabled&&(this.ctx.imageSmoothingEnabled=e),this.scene=new Ot,this.scene.parent=this}function Vt(t,e,i,r){var n=t*i+e*r,s=Bt(t*t+e*e)*Bt(i*i+r*r),s=Nt(Pt(-1,Ct(1,n/s)));return s=t*r-e*i<0?-s:s}G.extend(Ht,{Utils:zt}),G.extend(Ht.prototype,Y,{constructor:Ht,setSize:function(t,e,i){return this.width=t,this.height=e,this.ratio=void 0===i?gt(this.ctx):i,this.domElement.width=t*this.ratio,this.domElement.height=e*this.ratio,this.domElement.style&&G.extend(this.domElement.style,{width:t+"px",height:e+"px"}),this.trigger(Y.Types.resize,t,e,i)},render:function(){var t=1===this.ratio;return t||(this.ctx.save(),this.ctx.scale(this.ratio,this.ratio)),this.overdraw||this.ctx.clearRect(0,0,this.width,this.height),zt.group.render.call(this.scene,this.ctx),t||this.ctx.restore(),this}});var Dt={Image:null,isHeadless:!1,shim:function(t,e){return Ht.Utils.shim(t),void 0!==e&&(Dt.Image=e),Dt.isHeadless=!0,t}},Ut={hasEventListeners:"function"==typeof U.addEventListener,bind:function(t,e,i,r){return this.hasEventListeners?t.addEventListener(e,i,!!r):t.attachEvent("on"+e,i),Ut},unbind:function(t,e,i,r){return Ut.hasEventListeners?t.removeEventListeners(e,i,!!r):t.detachEvent("on"+e,i),Ut},getRequestAnimationFrame:function(){var t,s=0,e=["ms","moz","webkit","o"],i=U.requestAnimationFrame;if(!i){for(var r=0;r<e.length;r++)i=U[e[r]+"RequestAnimationFrame"]||i,t=U[e[r]+"CancelAnimationFrame"]||U[e[r]+"CancelRequestAnimationFrame"]||t;i=i||function(t,e){var i=(new Date).getTime(),r=Math.max(0,16-(i-s)),n=U.setTimeout(function(){t(i+r)},r);return s=i+r,n}}return i}},qt=U.document?U.document.createElement("div"):{};function Xt(t){this.name="Two.js",this.message=t}qt.id="help-two-load",Object.defineProperty(Ut,"temp",{enumerable:!0,get:function(){return G.isElement(qt)&&!U.document.head.contains(qt)&&(G.extend(qt.style,{display:"none"}),U.document.head.appendChild(qt)),qt}}),Xt.prototype=new Error,G.extend(Xt.prototype,{constructor:Xt});function Wt(t){var e="_"+t,i="_flag"+t.charAt(0).toUpperCase()+t.slice(1);Object.defineProperty(this,t,{enumerable:!0,get:function(){return this[e]},set:function(t){this[e]=t,this[i]=!0}})}var Gt;function Yt(){this.map={}}function $t(t,e,i){this.renderer={},this._renderer.type="stop",this.offset="number"==typeof t?t:$t.Index<=0?0:1,this.opacity="number"==typeof i?i:1,this.color="string"==typeof e?e:$t.Index<=0?"#fff":"#000",$t.Index=($t.Index+1)%2}function Zt(t){this.renderer={},this._renderer.type="gradient",this.id=_t.Identifier+_t.uniqueId(),this.classList=[],this._renderer.flagStops=Zt.FlagStops.bind(this),this._renderer.bindStops=Zt.BindStops.bind(this),this._renderer.unbindStops=Zt.UnbindStops.bind(this),this.spread="pad",t&&(this.stops=t)}function Kt(t,e,i,r,n){Zt.call(this,n),this._renderer.type="linear-gradient";n=Kt.FlagEndPoints.bind(this);this.left=(new K).bind(Y.Types.change,n),this.right=(new K).bind(Y.Types.change,n),"number"==typeof t&&(this.left.x=t),"number"==typeof e&&(this.left.y=e),"number"==typeof i&&(this.right.x=i),"number"==typeof r&&(this.right.y=r)}function Jt(t,e,i,r,n,s){Zt.call(this,r),this._renderer.type="radial-gradient",this.center=(new K).bind(Y.Types.change,function(){this._flagCenter=!0}.bind(this)),this.radius="number"==typeof i?i:20,this.focal=(new K).bind(Y.Types.change,function(){this._flagFocal=!0}.bind(this)),"number"==typeof t&&(this.center.x=t),"number"==typeof e&&(this.center.y=e),this.focal.copy(this.center),"number"==typeof n&&(this.focal.x=n),"number"==typeof s&&(this.focal.y=s)}G.extend(Yt.prototype,{constructor:Yt,add:function(t,e){return this.map[t]=e,this},remove:function(t){return delete this.map[t],this},get:function(t){return this.map[t]},contains:function(t){return t in this.map}}),G.extend($t,{Index:0,Properties:["offset","opacity","color"],MakeObservable:function(t){G.each($t.Properties,function(t){var e="_"+t,i="_flag"+t.charAt(0).toUpperCase()+t.slice(1);Object.defineProperty(this,t,{enumerable:!0,get:function(){return this[e]},set:function(t){this[e]=t,this[i]=!0,this.parent&&(this.parent._flagStops=!0)}})},t),Object.defineProperty(t,"renderer",{enumerable:!1,get:function(){return this._renderer},set:function(t){this._renderer=t}})}}),G.extend($t.prototype,Y,{constructor:$t,clone:function(){var e=new $t;return G.each($t.Properties,function(t){e[t]=this[t]},this),e},toObject:function(){var e={};return G.each($t.Properties,function(t){e[t]=this[t]},this),e},flagReset:function(){return this._flagOffset=this._flagColor=this._flagOpacity=!1,this}}),$t.MakeObservable($t.prototype),G.extend(Zt,{Stop:$t,Properties:["spread"],MakeObservable:function(t){G.each(Zt.Properties,Wt,t),Object.defineProperty(t,"stops",{enumerable:!0,get:function(){return this._stops},set:function(t){this._renderer.flagStops;var e=this._renderer.bindStops,i=this._renderer.unbindStops;this._stops&&this._stops.unbind(Y.Types.insert,e).unbind(Y.Types.remove,i),this._stops=new wt((t||[]).slice(0)),this._stops.bind(Y.Types.insert,e).bind(Y.Types.remove,i),e(this._stops)}}),Object.defineProperty(t,"renderer",{enumerable:!1,get:function(){return this._renderer},set:function(t){this._renderer=t}})},FlagStops:function(){this._flagStops=!0},BindStops:function(t){for(var e=t.length;e--;)t[e].bind(Y.Types.change,this._renderer.flagStops),t[e].parent=this;this._renderer.flagStops()},UnbindStops:function(t){for(var e=t.length;e--;)t[e].unbind(Y.Types.change,this._renderer.flagStops),delete t[e].parent;this._renderer.flagStops()}}),G.extend(Zt.prototype,Y,{constructor:Zt,_flagStops:!1,_flagSpread:!1,clone:function(t){var e=new Zt(this.stops.map(function(t){return t.clone()}));return G.each(Zt.Properties,function(t){e[t]=this[t]},this),t&&t.add(e),e},toObject:function(){var e={stops:this.stops.map(function(t){return t.toObject()})};return G.each(Zt.Properties,function(t){e[t]=this[t]},this),e},_update:function(){return(this._flagSpread||this._flagStops)&&this.trigger(Y.Types.change),this},flagReset:function(){return this._flagSpread=this._flagStops=!1,this}}),Zt.MakeObservable(Zt.prototype),G.extend(Kt,{Stop:$t,MakeObservable:function(t){Zt.MakeObservable(t)},FlagEndPoints:function(){this._flagEndPoints=!0}}),G.extend(Kt.prototype,Zt.prototype,{constructor:Kt,_flagEndPoints:!1,clone:function(t){var e=this.stops.map(function(t){return t.clone()}),i=new Kt(this.left._x,this.left._y,this.right._x,this.right._y,e);return G.each(Zt.Properties,function(t){i[t]=this[t]},this),t&&t.add(i),i},toObject:function(){var t=Zt.prototype.toObject.call(this);return t.left=this.left.toObject(),t.right=this.right.toObject(),t},_update:function(){return(this._flagEndPoints||this._flagSpread||this._flagStops)&&this.trigger(Y.Types.change),this},flagReset:function(){return this._flagEndPoints=!1,Zt.prototype.flagReset.call(this),this}}),Kt.MakeObservable(Kt.prototype),G.extend(Jt,{Stop:$t,Properties:["radius"],MakeObservable:function(t){Zt.MakeObservable(t),G.each(Jt.Properties,Wt,t)}}),G.extend(Jt.prototype,Zt.prototype,{constructor:Jt,_flagRadius:!1,_flagCenter:!1,_flagFocal:!1,clone:function(t){var e=this.stops.map(function(t){return t.clone()}),i=new Jt(this.center._x,this.center._y,this._radius,e,this.focal._x,this.focal._y);return G.each(Zt.Properties.concat(Jt.Properties),function(t){i[t]=this[t]},this),t&&t.add(i),i},toObject:function(){var e=Zt.prototype.toObject.call(this);return G.each(Jt.Properties,function(t){e[t]=this[t]},this),e.center=this.center.toObject(),e.focal=this.focal.toObject(),e},_update:function(){return(this._flagRadius||this._flatCenter||this._flagFocal||this._flagSpread||this._flagStops)&&this.trigger(Y.Types.change),this},flagReset:function(){return this._flagRadius=this._flagCenter=this._flagFocal=!1,Zt.prototype.flagReset.call(this),this}}),Jt.MakeObservable(Jt.prototype);var Qt={video:/\.(mp4|webm|ogg)$/i,image:/\.(jpe?g|png|gif|tiff|webp)$/i,effect:/texture|gradient/i};function te(t,e){var i,r;this.renderer={},this._renderer.type="texture",this._renderer.flagOffset=te.FlagOffset.bind(this),this._renderer.flagScale=te.FlagScale.bind(this),this.id=_t.Identifier+_t.uniqueId(),this.classList=[],this.loaded=!1,this.repeat="no-repeat",this.offset=new K,"function"==typeof e&&(i=function(){this.unbind(Y.Types.load,i),"function"==typeof e&&e()}.bind(this),this.bind(Y.Types.load,i)),"string"==typeof t?this.src=t:"object"==typeof t&&("[object HTMLImageElement]"!==(r=Object.prototype.toString.call(t))&&"[object HTMLCanvasElement]"!==r&&"[object HTMLVideoElement]"!==r&&"[object Image]"!==r||(this.image=t)),this._update()}U.document&&(Gt=document.createElement("a")),G.extend(te,{Properties:["src","loaded","repeat"],RegularExpressions:Qt,ImageRegistry:new Yt,getAbsoluteURL:function(t){return Gt?(Gt.href=t,Gt.href):t},loadHeadlessBuffer:function(t,e){t.image.onload=e,t.image.src=t.src},getTag:function(t){return t&&t.nodeName&&t.nodeName.toLowerCase()||"img"},getImage:function(t){var e,t=te.getAbsoluteURL(t);return te.ImageRegistry.contains(t)?te.ImageRegistry.get(t):(Dt.Image?(e=new Dt.Image,Ht.Utils.shim(e,"img")):U.document?e=Qt.video.test(t)?document.createElement("video"):document.createElement("img"):console.warn("Two.js: no prototypical image defined for Two.Texture"),e.crossOrigin="anonymous",e)},Register:{canvas:function(t,e){t._src="#"+t.id,te.ImageRegistry.add(t.src,t.image),"function"==typeof e&&e()},img:function(e,i){var r=e.image,n=function(t){!Dt.isHeadless&&r.removeEventListener&&"function"==typeof r.removeEventListener&&(r.removeEventListener("load",n,!1),r.removeEventListener("error",s,!1)),"function"==typeof i&&i()},s=function(t){throw Dt.isHeadless||"function"!=typeof r.removeEventListener||(r.removeEventListener("load",n,!1),r.removeEventListener("error",s,!1)),new Xt("unable to load "+e.src)};"number"==typeof r.width&&0<r.width&&"number"==typeof r.height&&0<r.height?n():Dt.isHeadless||"function"!=typeof r.addEventListener||(r.addEventListener("load",n,!1),r.addEventListener("error",s,!1)),e._src=te.getAbsoluteURL(e._src),!Dt.isHeadless&&r&&r.getAttribute("two-src")||(Dt.isHeadless||r.setAttribute("two-src",e.src),te.ImageRegistry.add(e.src,r),Dt.isHeadless?te.loadHeadlessBuffer(e,n):e.image.src=e.src)},video:function(e,i){if(Dt.isHeadless)throw new Xt("video textures are not implemented in headless environments.");var r=function(t){e.image.removeEventListener("canplaythrough",r,!1),e.image.removeEventListener("error",n,!1),e.image.width=e.image.videoWidth,e.image.height=e.image.videoHeight,"function"==typeof i&&i()},n=function(t){throw e.image.removeEventListener("canplaythrough",r,!1),e.image.removeEventListener("error",n,!1),new Xt("unable to load "+e.src)};e._src=te.getAbsoluteURL(e._src),e.image.getAttribute("two-src")||(e.image.setAttribute("two-src",e.src),te.ImageRegistry.add(e.src,e.image)),4<=e.image.readyState?r():(e.image.addEventListener("canplaythrough",r,!1),e.image.addEventListener("error",n,!1),e.image.src=e.src,e.image.load())}},load:function(t,e){t.src;var i=t.image,r=te.getTag(i);t._flagImage&&(/canvas/i.test(r)?te.Register.canvas(t,e):(t._src=!Dt.isHeadless&&i.getAttribute("two-src")||i.src,te.Register[r](t,e))),t._flagSrc&&(i||(i=te.getImage(t.src),t.image=i),r=te.getTag(i),te.Register[r](t,e))},FlagOffset:function(){this._flagOffset=!0},FlagScale:function(){this._flagScale=!0},MakeObservable:function(t){G.each(te.Properties,Wt,t),Object.defineProperty(t,"image",{enumerable:!0,get:function(){return this._image},set:function(t){var e="canvas"===te.getTag(t)?"#"+t.id:t.src;te.ImageRegistry.contains(e)?this._image=te.ImageRegistry.get(t.src):this._image=t,this._flagImage=!0}}),Object.defineProperty(t,"offset",{enumerable:!0,get:function(){return this._offset},set:function(t){this._offset&&this._offset.unbind(Y.Types.change,this._renderer.flagOffset),this._offset=t,this._offset.bind(Y.Types.change,this._renderer.flagOffset),this._flagOffset=!0}}),Object.defineProperty(t,"scale",{enumerable:!0,get:function(){return this._scale},set:function(t){this._scale instanceof K&&this._scale.unbind(Y.Types.change,this._renderer.flagScale),this._scale=t,this._scale instanceof K&&this._scale.bind(Y.Types.change,this._renderer.flagScale),this._flagScale=!0}}),Object.defineProperty(t,"renderer",{enumerable:!1,get:function(){return this._renderer},set:function(t){this._renderer=t}})}}),G.extend(te.prototype,Y,kt.prototype,{constructor:te,_flagSrc:!1,_flagImage:!1,_flagVideo:!1,_flagLoaded:!1,_flagRepeat:!1,_flagOffset:!1,_flagScale:!1,_src:"",_image:null,_loaded:!1,_repeat:"no-repeat",_scale:1,_offset:null,clone:function(){var t=new te(this.src);return t.repeat=this.repeat,t.offset.copy(this.origin),t.scale=this.scale,t},toObject:function(){return{src:this.src,repeat:this.repeat,origin:this.origin.toObject(),scale:"number"==typeof this.scale?this.scale:this.scale.toObject()}},_update:function(){return(this._flagSrc||this._flagImage)&&(this.trigger(Y.Types.change),(this._flagSrc||this._flagImage)&&(this.loaded=!1,te.load(this,function(){this.loaded=!0,this.trigger(Y.Types.change).trigger(Y.Types.load)}.bind(this)))),this._image&&4<=this._image.readyState&&(this._flagVideo=!0),this},flagReset:function(){return this._flagSrc=this._flagImage=this._flagLoaded=this._flagVideo=this._flagScale=this._flagOffset=!1,this}}),te.MakeObservable(te.prototype);var ee=Math.min,ie=Math.max,re=Math.ceil,ne=Math.floor;function se(t,e,i,r){kt.call(this),this._renderer.type="path",this._renderer.flagVertices=se.FlagVertices.bind(this),this._renderer.bindVertices=se.BindVertices.bind(this),this._renderer.unbindVertices=se.UnbindVertices.bind(this),this._renderer.flagFill=se.FlagFill.bind(this),this._renderer.flagStroke=se.FlagStroke.bind(this),this._renderer.vertices=[],this._renderer.collection=[],this._closed=!!e,this._curved=!!i,this.beginning=0,this.ending=1,this.fill="#fff",this.stroke="#000",this.linewidth=1,this.opacity=1,this.className="",this.visible=!0,this.cap="butt",this.join="miter",this.miter=4,this.vertices=t,this.automatic=!r,this.dashes=[],this.dashes.offset=0}function ae(t,e){if(0===e||1===e)return 1;for(var i=t._length*e,r=0,n=0;n<t._lengths.length;n++){var s=t._lengths[n];if(i<=r)return 0<=i-r;r+=s}}function oe(t,e){var i=t._length;if(e<=0)return 0;if(i<=e)return t._lengths.length-1;for(var r=0,n=0;r<t._lengths.length;r++){if(n+t._lengths[r]>=e)return e-=n,Math.max(r-1,0)+e/t._lengths[r];n+=t._lengths[r]}return-1}function he(t,e,i){var r=e.controls&&e.controls.right,n=t.controls&&t.controls.left,s=e.x,a=e.y,o=(r||e).x,h=(r||e).y,l=(n||t).x,c=(n||t).y,f=t.x,u=t.y;return r&&e._relative&&(o+=e.x,h+=e.y),n&&t._relative&&(l+=t.x,c+=t.y),ct(s,a,o,h,l,c,f,u,i)}function le(t,e,i){var r=e.controls&&e.controls.right,n=t.controls&&t.controls.left,s=e.x,a=e.y,o=(r||e).x,h=(r||e).y,l=(n||t).x,c=(n||t).y,f=t.x,u=t.y;return r&&e._relative&&(o+=e.x,h+=e.y),n&&t._relative&&(l+=t.x,c+=t.y),lt(s,a,o,h,l,c,f,u,i)}G.extend(se,{Properties:["fill","stroke","linewidth","opacity","visible","cap","join","miter","closed","curved","automatic","beginning","ending"],Utils:{getCurveLength:he},FlagVertices:function(){this._flagVertices=!0,this._flagLength=!0,this.parent&&(this.parent._flagLength=!0)},BindVertices:function(t){for(var e=t.length;e--;)t[e].bind(Y.Types.change,this._renderer.flagVertices);this._renderer.flagVertices()},UnbindVertices:function(t){for(var e=t.length;e--;)t[e].unbind(Y.Types.change,this._renderer.flagVertices);this._renderer.flagVertices()},FlagFill:function(){this._flagFill=!0},FlagStroke:function(){this._flagStroke=!0},MakeObservable:function(t){kt.MakeObservable(t),G.each(se.Properties.slice(2,8),Wt,t),Object.defineProperty(t,"fill",{enumerable:!0,get:function(){return this._fill},set:function(t){(this._fill instanceof Zt||this._fill instanceof Kt||this._fill instanceof Jt||this._fill instanceof te)&&this._fill.unbind(Y.Types.change,this._renderer.flagFill),this._fill=t,this._flagFill=!0,(this._fill instanceof Zt||this._fill instanceof Kt||this._fill instanceof Jt||this._fill instanceof te)&&this._fill.bind(Y.Types.change,this._renderer.flagFill)}}),Object.defineProperty(t,"stroke",{enumerable:!0,get:function(){return this._stroke},set:function(t){(this._stroke instanceof Zt||this._stroke instanceof Kt||this._stroke instanceof Jt||this._stroke instanceof te)&&this._stroke.unbind(Y.Types.change,this._renderer.flagStroke),this._stroke=t,this._flagStroke=!0,(this._stroke instanceof Zt||this._stroke instanceof Kt||this._stroke instanceof Jt||this._stroke instanceof te)&&this._stroke.bind(Y.Types.change,this._renderer.flagStroke)}}),Object.defineProperty(t,"length",{get:function(){return this._flagLength&&this._updateLength(),this._length}}),Object.defineProperty(t,"closed",{enumerable:!0,get:function(){return this._closed},set:function(t){this._closed=!!t,this._flagVertices=!0}}),Object.defineProperty(t,"curved",{enumerable:!0,get:function(){return this._curved},set:function(t){this._curved=!!t,this._flagVertices=!0}}),Object.defineProperty(t,"automatic",{enumerable:!0,get:function(){return this._automatic},set:function(t){var e;t!==this._automatic&&(this._automatic=!!t,e=this._automatic?"ignore":"listen",G.each(this.vertices,function(t){t[e]()}))}}),Object.defineProperty(t,"beginning",{enumerable:!0,get:function(){return this._beginning},set:function(t){this._beginning=t,this._flagVertices=!0}}),Object.defineProperty(t,"ending",{enumerable:!0,get:function(){return this._ending},set:function(t){this._ending=t,this._flagVertices=!0}}),Object.defineProperty(t,"vertices",{enumerable:!0,get:function(){return this._collection},set:function(t){this._renderer.flagVertices;var e=this._renderer.bindVertices,i=this._renderer.unbindVertices;this._collection&&this._collection.unbind(Y.Types.insert,e).unbind(Y.Types.remove,i),this._collection=t instanceof wt?t:new wt(t||[]),this._collection.bind(Y.Types.insert,e).bind(Y.Types.remove,i),e(this._collection)}}),Object.defineProperty(t,"clip",{enumerable:!0,get:function(){return this._clip},set:function(t){this._clip=t,this._flagClip=!0}}),Object.defineProperty(t,"dashes",{enumerable:!0,get:function(){return this._dashes},set:function(t){"number"!=typeof t.offset&&(t.offset=this._dashes.offset||0),this._dashes=t}})}}),G.extend(se.prototype,kt.prototype,{constructor:se,_flagVertices:!0,_flagLength:!0,_flagFill:!0,_flagStroke:!0,_flagLinewidth:!0,_flagOpacity:!0,_flagVisible:!0,_flagCap:!0,_flagJoin:!0,_flagMiter:!0,_flagClip:!1,_length:0,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,_clip:!1,_dashes:[],clone:function(t){for(var e=new se,i=0;i<this.vertices.length;i++)e.vertices.push(this.vertices[i].clone());for(var r=0;r<se.Properties.length;r++){var n=se.Properties[r];e[n]=this[n]}return e.className=this.className,e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()},toObject:function(){var e={vertices:this.vertices.map(function(t){return t.toObject()})};return G.each(se.Properties,function(t){e[t]=this[t]},this),e.className=this.className,e.translation=this.translation.toObject(),e.rotation=this.rotation,e.scale=this.scale instanceof K?this.scale.toObject():this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&(e.matrix=this.matrix.toObject()),e},noFill:function(){return this.fill="transparent",this},noStroke:function(){return this.stroke=void 0,this},corner:function(){for(var t=this.getBoundingClientRect(),e=t.width/2,i=t.height/2,r=t.left+t.width/2,n=t.top+t.height/2,s=0;s<this.vertices.length;s++){var a=this.vertices[s];a.x-=r,a.y-=n,a.x+=e,a.y+=i}return this},center:function(){for(var t=this.getBoundingClientRect(),e=t.left+t.width/2-this.translation.x,i=t.top+t.height/2-this.translation.y,r=0;r<this.vertices.length;r++){var n=this.vertices[r];n.x-=e,n.y-=i}return this},remove:function(){return this.parent&&this.parent.remove(this),this},getBoundingClientRect:function(t){var e,i,r,n,s,a,o,h,l,c=1/0,f=-1/0,u=1/0,d=-1/0;if(this._update(!0),l=t?this._matrix:N(this),e=(this.linewidth||0)/2,(i=this._renderer.vertices.length)<=0)return{width:0,height:0};for(r=0;r<i;r++){var g,p,_=this._renderer.vertices[r];d=(p=this._renderer.vertices[(r+i-1)%i]).controls&&_.controls?(n=p.controls.right.x,s=p.controls.right.y,p.relative&&(n+=p.x,s+=p.y),a=_.controls.left.x,g=_.controls.left.y,_.relative&&(a+=_.x,g+=_.y),g=ft(p.x,p.y,n,s,a,g,_.x,_.y),u=ee(g.min.y-e,u),c=ee(g.min.x-e,c),f=ie(g.max.x+e,f),ie(g.max.y+e,d)):(r<=1&&(u=ee(p.y-e,u),c=ee(p.x-e,c),f=ie(p.x+e,f),d=ie(p.y+e,d)),u=ee(_.y-e,u),c=ee(_.x-e,c),f=ie(_.x+e,f),ie(_.y+e,d))}return o=l.multiply(c,u,1),h=l.multiply(c,d,1),t=l.multiply(f,u,1),l=l.multiply(f,d,1),{top:u=ee(o.y,h.y,t.y,l.y),left:c=ee(o.x,h.x,t.x,l.x),right:f=ie(o.x,h.x,t.x,l.x),bottom:d=ie(o.y,h.y,t.y,l.y),width:f-c,height:d-u}},getPointAt:function(t,e){for(var i,r,n,s,a=this.length*Math.min(Math.max(t,0),1),o=this.vertices.length,h=o-1,l=null,c=null,f=0,u=this._lengths.length,d=0;f<u;f++){if(d+this._lengths[f]>=a){this._closed?(i=z(f,o),r=z(f-1,o),0===f&&(i=r,r=f)):(i=f,r=Math.min(Math.max(f-1,0),h)),l=this.vertices[i],c=this.vertices[r],a-=d,t=0!==this._lengths[f]?a/this._lengths[f]:0;break}d+=this._lengths[f]}if(null===l||null===c)return null;if(!l)return c;if(!c)return l;g=c.controls&&c.controls.right,p=l.controls&&l.controls.left,_=c.x,m=c.y,y=(g||c).x,v=(g||c).y,n=(p||l).x,s=(p||l).y,b=l.x,x=l.y,g&&c.relative&&(y+=c.x,v+=c.y),p&&l.relative&&(n+=l.x,s+=l.y);var g=ht(t,_,y,n,b),p=ht(t,m,v,s,x),_=B(_,y,t),m=B(m,v,t),y=B(y,n,t),v=B(v,s,t),b=B(n,b,t),x=B(s,x,t),_=B(_,y,t),m=B(m,v,t),b=B(y,b,t),x=B(v,x,t);return G.isObject(e)?(e.x=g,e.y=p,G.isObject(e.controls)||et.AppendCurveProperties(e),e.controls.left.x=_,e.controls.left.y=m,e.controls.right.x=b,e.controls.right.y=x,e.relative,e.relative&&(e.controls.left.x-=g,e.controls.left.y-=p,e.controls.right.x-=g,e.controls.right.y-=p),e.t=t,e):((p=new et(g,p,_-g,m-p,b-g,x-p,this._curved?L.curve:L.line)).t=t,p)},plot:function(){if(this.curved)return ut(this._collection,this.closed),this;for(var t=0;t<this._collection.length;t++)this._collection[t].command=0===t?L.move:L.line;return this},subdivide:function(r){this._update();var n=this.vertices.length-1,s=this.vertices[n],a=this._closed||this.vertices[n]._command===L.close,o=[];return G.each(this.vertices,function(t,e){if(e<=0&&!a)s=t;else{if(t.command===L.move)return o.push(new et(s.x,s.y)),0<e&&(o[o.length-1].command=L.line),void(s=t);var i=le(t,s,r);o=o.concat(i),G.each(i,function(t,e){e<=0&&s.command===L.move?t.command=L.move:t.command=L.line}),n<=e&&(this._closed&&this._automatic?(i=le(s=t,s,r),o=o.concat(i),G.each(i,function(t,e){e<=0&&s.command===L.move?t.command=L.move:t.command=L.line})):a&&o.push(new et(t.x,t.y)),o[o.length-1].command=a?L.close:L.line),s=t}},this),this._automatic=!1,this._curved=!1,this.vertices=o,this},_updateLength:function(i,t){t||this._update();var t=this.vertices.length,t=t-1,r=this.vertices[t],n=0;return void 0===this._lengths&&(this._lengths=[]),G.each(this.vertices,function(t,e){return e<=0||t.command===L.move?(r=t,void(this._lengths[e]=0)):(this._lengths[e]=he(t,r,i),n+=this._lengths[e],void(r=t))},this),this._length=n,this._flagLength=!1,this},_update:function(){if(this._flagVertices){this._automatic&&this.plot(),this._flagLength&&this._updateLength(void 0,!0);for(var t,e,i,r,n=this._collection.length,s=this._closed,a=Math.min(this._beginning,this._ending),o=Math.max(this._beginning,this._ending),h=oe(this,a*this._length),l=oe(this,o*this._length),c=re(h),f=ne(l),u=this._renderer.vertices.length=0;u<n;u++)this._renderer.collection.length<=u&&this._renderer.collection.push(new et),f<u&&!e?((r=this._renderer.collection[u]).copy(this._collection[u]),this.getPointAt(o,r),r.command=this._renderer.collection[u].command,this._renderer.vertices.push(r),e=r,(i=this._collection[u-1])&&i.controls&&(r.controls.right.clear(),this._renderer.collection[u-1].controls.right.clear().lerp(i.controls.right,r.t))):c<=u&&u<=f&&(r=this._renderer.collection[u].copy(this._collection[u]),this._renderer.vertices.push(r),u===f&&ae(this,o)?(e=r,!s&&e.controls&&e.controls.right.clear()):u===c&&ae(this,a)&&((t=r).command=L.move,!s&&t.controls&&t.controls.left.clear()));0<c&&!t&&((r=this._renderer.collection[u=c-1]).copy(this._collection[u]),this.getPointAt(a,r),r.command=L.move,this._renderer.vertices.unshift(r),t=r,(l=this._collection[u+1])&&l.controls&&(r.controls.left.clear(),this._renderer.collection[u+1].controls.left.copy(l.controls.left).lerp(K.zero,r.t)))}return kt.prototype._update.apply(this,arguments),this},flagReset:function(){return this._flagVertices=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagCap=this._flagJoin=this._flagMiter=this._flagClip=!1,kt.prototype.flagReset.call(this),this}}),se.MakeObservable(se.prototype);var ce=2*Math.PI,fe=Math.PI/2,ue=Math.cos,de=Math.sin;function ge(t,e,i,r){for(var n=r?Math.max(r,2):4,s=[],a=0;a<n;a++)s.push(new et(0,0,0,0,0,0));se.call(this,s,!0,!0,!0),"number"==typeof i&&(this.radius=i),this._update(),"number"==typeof t&&(this.translation.x=t),"number"==typeof e&&(this.translation.y=e)}G.extend(ge,{Properties:["radius"],MakeObservable:function(t){se.MakeObservable(t),G.each(ge.Properties,Wt,t)}}),G.extend(ge.prototype,se.prototype,{constructor:ge,_flagRadius:!1,_radius:0,_update:function(){if(this._flagRadius){var t=this.vertices.length;!this._closed&&2<t&&--t;for(var e=4/3*Math.tan(Math.PI/(2*t)),i=this._radius,r=i*e,n=0;n<this.vertices.length;n++){var s=n/t*ce,a=i*ue(s),o=i*de(s),h=r*ue(s-fe),l=r*de(s-fe),c=r*ue(s+fe),f=r*de(s+fe),s=this.vertices[n];s.command=0===n?L.move:L.curve,s.set(a,o),s.controls.left.set(h,l),s.controls.right.set(c,f)}}return se.prototype._update.call(this),this},flagReset:function(){return this._flagRadius=!1,se.prototype.flagReset.call(this),this},clone:function(t){var e=new ge(0,0,this.radius,this.vertices.length);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&e.matrix.copy(this.matrix),G.each(se.Properties,function(t){e[t]=this[t]},this),t&&t.add(e),e},toObject:function(){var e=se.prototype.toObject.call(this);return G.each(ge.Properties,function(t){e[t]=this[t]},this),e}}),ge.MakeObservable(ge.prototype);var pe=2*Math.PI,_e=Math.PI/2,me=Math.cos,ye=Math.sin;function ve(t,e,i,r,n){"number"!=typeof r&&"number"==typeof i&&(r=i);for(var s=n?Math.max(n,2):4,a=[],o=0;o<s;o++)a.push(new et);se.call(this,a,!0,!0,!0),"number"==typeof i&&(this.width=2*i),"number"==typeof r&&(this.height=2*r),this._update(),this.translation.set(t,e)}function be(t,e,i,r){se.call(this,[new et(t,e),new et(i,r)]),this.vertices[0].command=L.move,this.vertices[1].command=L.line,this.automatic=!1}function xe(t,e,i,r){se.call(this,[new et,new et,new et,new et],!0,!1,!0),this.width=i,this.height=r,this.origin=new K,this.translation.set(t,e),this._update()}function we(t,e,i,r,n){void 0===n&&"number"==typeof i&&"number"==typeof r&&(n=Math.floor(Math.min(i,r)/12));for(var s=[],a=0;a<10;a++)s.push(new et(0,0,0,0,0,0,0===a?L.move:L.curve));se.call(this,s),this.closed=!0,this.automatic=!1,this._renderer.flagRadius=we.FlagRadius.bind(this),"number"==typeof i&&(this.width=i),"number"==typeof r&&(this.height=r),"number"==typeof n&&(this.radius=n),this._update(),this.translation.set(t,e)}G.extend(ve,{Properties:["width","height"],MakeObservable:function(t){se.MakeObservable(t),G.each(ve.Properties,Wt,t)}}),G.extend(ve.prototype,se.prototype,{_flagWidth:!1,_flagHeight:!1,_width:0,_height:0,constructor:ve,_update:function(){if(this._flagWidth||this._flagHeight)for(var t=4/3*Math.tan(Math.PI/(2*this.vertices.length)),e=this._width/2,i=this._height/2,r=0,n=this.vertices.length;r<n;r++){var s=r/n*pe,a=e*me(s),o=i*ye(s),h=e*t*me(s-_e),l=i*t*ye(s-_e),c=e*t*me(s+_e),f=i*t*ye(s+_e),s=this.vertices[r];s.command=0===r?L.move:L.curve,s.set(a,o),s.controls.left.set(h,l),s.controls.right.set(c,f)}return se.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=!1,se.prototype.flagReset.call(this),this},clone:function(t){var e=new ve(0,0,this.width/2,this.height/2,this.vertices.length);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&e.matrix.copy(this.matrix),G.each(se.Properties,function(t){e[t]=this[t]},this),t&&t.add(e),e},toObject:function(){var e=se.prototype.toObject.call(this);return G.each(ve.Properties,function(t){e[t]=this[t]},this),e}}),ve.MakeObservable(ve.prototype),G.extend(be.prototype,se.prototype,{constructor:be}),se.MakeObservable(be.prototype),G.extend(xe,{Properties:["width","height"],MakeObservable:function(t){se.MakeObservable(t),G.each(xe.Properties,Wt,t),Object.defineProperty(t,"origin",{enumerable:!0,get:function(){return this._origin},set:function(t){this._origin&&this._origin.unbind(Y.Types.change,this._renderer.flagVertices),this._origin=t,this._origin.bind(Y.Types.change,this._renderer.flagVertices),this._renderer.flagVertices()}})}}),G.extend(xe.prototype,se.prototype,{constructor:xe,_flagWidth:0,_flagHeight:0,_width:0,_height:0,_origin:null,_update:function(){var t,e;return(this._flagWidth||this._flagHeight)&&(t=this._width/2,e=this._height/2,this.vertices[0].set(-t,-e).add(this._origin).command=L.move,this.vertices[1].set(t,-e).add(this._origin).command=L.line,this.vertices[2].set(t,e).add(this._origin).command=L.line,this.vertices[3].set(-t,e).add(this._origin).command=L.line,this.vertices[4]&&(this.vertices[4].set(-t,-e).add(this._origin).command=L.line)),se.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=!1,se.prototype.flagReset.call(this),this},clone:function(t){var e=new xe(0,0,this.width,this.height);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&e.matrix.copy(this.matrix),G.each(se.Properties,function(t){e[t]=this[t]},this),t&&t.add(e),e},toObject:function(){var t=se.prototype.toObject.call(this);return t.width=this.width,t.height=this.height,t.origin=this.origin.toObject(),t}}),xe.MakeObservable(xe.prototype),G.extend(we,{Properties:["width","height"],FlagRadius:function(){this._flagRadius=!0},MakeObservable:function(t){se.MakeObservable(t),G.each(we.Properties,Wt,t),Object.defineProperty(t,"radius",{enumerable:!0,get:function(){return this._radius},set:function(t){this._radius instanceof K&&this._radius.unbind(Y.Types.change,this._renderer.flagRadius),this._radius=t,this._radius instanceof K&&this._radius.bind(Y.Types.change,this._renderer.flagRadius),this._flagRadius=!0}})}}),G.extend(we.prototype,se.prototype,{constructor:we,_flagWidth:!1,_flagHeight:!1,_flagRadius:!1,_width:0,_height:0,_radius:12,_update:function(){var t,e,i,r,n;return(this._flagWidth||this._flagHeight||this._flagRadius)&&(i=this._width,n=this._height,e=this._radius instanceof K?(t=this._radius.x,this._radius.y):(t=this._radius,this._radius),r=n/2,(n=this.vertices[0]).x=-((i=i/2)-t),n.y=-r,(n=this.vertices[1]).x=i-t,n.y=-r,n.controls.left.clear(),n.controls.right.x=t,n.controls.right.y=0,(n=this.vertices[2]).x=i,n.y=-(r-e),n.controls.right.clear(),n.controls.left.clear(),(n=this.vertices[3]).x=i,n.y=r-e,n.controls.left.clear(),n.controls.right.x=0,n.controls.right.y=e,(n=this.vertices[4]).x=i-t,n.y=r,n.controls.right.clear(),n.controls.left.clear(),(n=this.vertices[5]).x=-(i-t),n.y=r,n.controls.left.clear(),n.controls.right.x=-t,n.controls.right.y=0,(n=this.vertices[6]).x=-i,n.y=r-e,n.controls.left.clear(),n.controls.right.clear(),(n=this.vertices[7]).x=-i,n.y=-(r-e),n.controls.left.clear(),n.controls.right.x=0,n.controls.right.y=-e,(n=this.vertices[8]).x=-(i-t),n.y=-r,n.controls.left.clear(),n.controls.right.clear(),(n=this.vertices[9]).copy(this.vertices[8])),se.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=this._flagRadius=!1,se.prototype.flagReset.call(this),this},clone:function(t){var e=new we(0,0,this.width,this.height,this.radius);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&e.matrix.copy(this.matrix),G.each(se.Properties,function(t){e[t]=this[t]},this),t&&t.add(e),e},toObject:function(){var e=se.prototype.toObject.call(this);return G.each(we.Properties,function(t){e[t]=this[t]},this),e.radius="number"==typeof this.radius?this.radius:this.radius.toObject(),e}}),we.MakeObservable(we.prototype);var ke=Math.min,Me=Math.max;function Ae(t,e,i,r){if(kt.call(this),this._renderer.type="text",this._renderer.flagFill=Ae.FlagFill.bind(this),this._renderer.flagStroke=Ae.FlagStroke.bind(this),this.value=t,"number"==typeof e&&(this.translation.x=e),"number"==typeof i&&(this.translation.y=i),this.dashes=[],this.dashes.offset=0,!G.isObject(r))return this;G.each(Ae.Properties,function(t){t in r&&(this[t]=r[t])},this)}G.extend(Ae,{Ratio:.6,Properties:["value","family","size","leading","alignment","linewidth","style","weight","decoration","baseline","opacity","visible","className","fill","stroke"],FlagFill:function(){this._flagFill=!0},FlagStroke:function(){this._flagStroke=!0},MakeObservable:function(t){kt.MakeObservable(t),G.each(Ae.Properties.slice(0,12),Wt,t),Object.defineProperty(t,"fill",{enumerable:!0,get:function(){return this._fill},set:function(t){(this._fill instanceof Zt||this._fill instanceof Kt||this._fill instanceof Jt||this._fill instanceof te)&&this._fill.unbind(Y.Types.change,this._renderer.flagFill),this._fill=t,this._flagFill=!0,(this._fill instanceof Zt||this._fill instanceof Kt||this._fill instanceof Jt||this._fill instanceof te)&&this._fill.bind(Y.Types.change,this._renderer.flagFill)}}),Object.defineProperty(t,"stroke",{enumerable:!0,get:function(){return this._stroke},set:function(t){(this._stroke instanceof Zt||this._stroke instanceof Kt||this._stroke instanceof Jt||this._stroke instanceof te)&&this._stroke.unbind(Y.Types.change,this._renderer.flagStroke),this._stroke=t,this._flagStroke=!0,(this._stroke instanceof Zt||this._stroke instanceof Kt||this._stroke instanceof Jt||this._stroke instanceof te)&&this._stroke.bind(Y.Types.change,this._renderer.flagStroke)}}),Object.defineProperty(t,"clip",{enumerable:!0,get:function(){return this._clip},set:function(t){this._clip=t,this._flagClip=!0}}),Object.defineProperty(t,"dashes",{enumerable:!0,get:function(){return this._dashes},set:function(t){"number"!=typeof t.offset&&(t.offset=this._dashes.offset||0),this._dashes=t}})}}),G.extend(Ae.prototype,kt.prototype,{constructor:Ae,_flagValue:!0,_flagFamily:!0,_flagSize:!0,_flagLeading:!0,_flagAlignment:!0,_flagBaseline:!0,_flagStyle:!0,_flagWeight:!0,_flagDecoration:!0,_flagFill:!0,_flagStroke:!0,_flagLinewidth:!0,_flagOpacity:!0,_flagClassName:!0,_flagVisible:!0,_flagClip:!1,_value:"",_family:"sans-serif",_size:13,_leading:17,_alignment:"center",_baseline:"middle",_style:"normal",_weight:500,_decoration:"none",_fill:"#000",_stroke:"transparent",_linewidth:1,_opacity:1,_className:"",_visible:!0,_clip:!1,_dashes:[],remove:function(){return this.parent&&this.parent.remove(this),this},clone:function(t){var e=new Ae(this.value);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,G.each(Ae.Properties,function(t){e[t]=this[t]},this),this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()},toObject:function(){var e={translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale};return this.matrix.manual&&(e.matrix=this.matrix.toObject()),G.each(Ae.Properties,function(t){e[t]=this[t]},this),e},noFill:function(){return this.fill="transparent",this},noStroke:function(){return this.stroke=void 0,this.linewidth=void 0,this},getBoundingClientRect:function(t){var e,i,r,n,s,a;this._update(!0);var o=t?this._matrix:N(this),h=this.leading,l=this.value.length*this.size*Ae.Ratio,c=(this._linewidth||0)/2;switch(this.alignment){case"left":r=-c,n=l+c;break;case"right":r=-(l+c),n=c;break;default:r=-(l/2+c),n=l/2+c}switch(this.baseline){case"top":s=-c,a=h+c;break;case"bottom":s=-(h+c),a=c;break;default:s=-(h/2+c),a=h/2+c}return e=o.multiply(r,s,1),i=o.multiply(r,a,1),t=o.multiply(n,s,1),o=o.multiply(n,a,1),{top:s=ke(e.y,i.y,t.y,o.y),left:r=ke(e.x,i.x,t.x,o.x),right:n=Me(e.x,i.x,t.x,o.x),bottom:a=Me(e.y,i.y,t.y,o.y),width:n-r,height:a-s}},flagReset:function(){return this._flagValue=this._flagFamily=this._flagSize=this._flagLeading=this._flagAlignment=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagClip=this._flagDecoration=this._flagClassName=this._flagBaseline=this._flagWeight=this._flagStyle=!1,kt.prototype.flagReset.call(this),this}}),Ae.MakeObservable(Ae.prototype);function Se(t,e){var i=e.split(/\s/),r=parseFloat(i[0]),n=parseFloat(i[1]),e=parseFloat(i[2]),i=parseFloat(i[3]),i=Math.min(this.width/e,this.height/i);return t.translation.x-=r*i,t.translation.y-=n*i,t.scale=i,t}function Oe(t,e,i){var r,n,s,a,o,h,l,c={},f={},u={};if(U.getComputedStyle)for(var d=U.getComputedStyle(t),g=d.length;g--;)void 0!==(s=d[n=d[g]])&&(c[n]=s);for(g=0;g<t.attributes.length;g++)a=t.attributes[g],/style/i.test(a.nodeName)?function(t,e){var i,r;e=e||{};for(var n=t.split(";"),s=0;s<n.length;s++)i=(r=n[s].split(":"))[0],r=r[1],void 0!==i&&void 0!==r&&(e[i]=r.replace(/\s/,""))}(a.value,u):f[a.nodeName]=a.value;for(n in void 0!==c.opacity&&(c["stroke-opacity"]=c.opacity,c["fill-opacity"]=c.opacity,delete c.opacity),i&&G.defaults(c,i),G.extend(c,u,f),c.visible=!(void 0===c.display&&/none/i.test(c.display))||void 0===c.visibility&&/hidden/i.test(c.visibility),c)switch(s=c[n],n){case"transform":if(/none/i.test(s))break;if(null===(r=t.transform&&t.transform.baseVal&&0<t.transform.baseVal.length?t.transform.baseVal[0].matrix:t.getCTM?t.getCTM():null))break;_t.AutoCalculateImportedMatrices?(h=I(r),e.translation.set(h.translateX,h.translateY),e.rotation=Math.PI*(h.rotation/180),e.scale=new K(h.scaleX,h.scaleY),o=parseFloat((c.x+"").replace("px")),h=parseFloat((c.y+"").replace("px")),o&&(e.translation.x=o),h&&(e.translation.y=h)):(r=t.getCTM(),e._matrix.manual=!0,e._matrix.set(r.a,r.b,r.c,r.d,r.e,r.f));break;case"viewBox":Se.call(this,e,s);break;case"visible":if(e instanceof Ot){e._visible=s;break}e.visible=s;break;case"stroke-linecap":if(e instanceof Ot){e._cap=s;break}e.cap=s;break;case"stroke-linejoin":if(e instanceof Ot){e._join=s;break}e.join=s;break;case"stroke-miterlimit":if(e instanceof Ot){e._miter=s;break}e.miter=s;break;case"stroke-width":if(e instanceof Ot){e._linewidth=parseFloat(s);break}e.linewidth=parseFloat(s);break;case"opacity":case"stroke-opacity":case"fill-opacity":if(e instanceof Ot){e._opacity=parseFloat(s);break}e.opacity=parseFloat(s);break;case"fill":case"stroke":e instanceof Ot&&(n="_"+n),/url\(#.*\)/i.test(s)?(l=Ee(this),e[n]=l.getById(s.replace(/url\(#(.*)\)/i,"$1"))):e[n]=/none/i.test(s)?"transparent":s;break;case"id":e.id=s,t.id=s+"-"+_t.Identifier+"applied";break;case"class":case"className":e.classList=s.split(" ");break;case"x":case"y":if(e instanceof Zt||e instanceof Kt||e instanceof Jt)break;s.match("[a-z%]$")&&!s.endsWith("px")&&(l=new Xt("only pixel values are supported with the "+n+" attribute."),console.warn(l.name,l.message)),e.translation[n]=parseFloat(s);break;case"font-family":e instanceof Ae&&(e.family=s);break;case"font-size":e instanceof Ae&&(e.size=s);break;case"font-weight":e instanceof Ae&&(e.weight=s);break;case"font-style":e instanceof Ae&&(e.style=s);break;case"text-decoration":e instanceof Ae&&(e.decoration=s);break;case"line-height":e instanceof Ae&&(e.leading=s)}return c}var Re=/[+-]?(?:\d*\.\d+|\d+)(?:[eE][+-]\d+)?/g,Fe={start:"left",middle:"center",end:"right"},Te=function(t){for(var e=t.getAttributeNames(),i=["id","class","transform","xmlns","viewBox"],r=0;r<i.length;r++){var n=Array.prototype.indexOf.call(e,i[r]);0<=n&&e.splice(n,1)}return e},Ee=function(t){for(;t.parent;)t=t.parent;return t.scene},Pe={svg:function(t){for(var e=Pe.defs.current=new Yt,i=t.getElementsByTagName("defs"),r=0;r<i.length;r++)!function(t,e){for(var i=0,r=t.childNodes.length;i<r;i++){var n=t.childNodes[i];n.id&&"#text"!==n.localName&&e.add(n.id,n)}}(i[r],e);var n=Pe.g.call(this,t);return t.getAttribute("viewBox"),n.defs=e,delete Pe.defs.current,n},defs:function(t){return null},use:function(t,e){var i,r=t.getAttribute("href")||t.getAttribute("xlink:href");if(!r)return i=new Xt("encountered <use /> with no href."),console.warn(i.name,i.message),null;var n=r.slice(1);if(!Pe.defs.current.contains(n))return i=new Xt("unable to find element for reference "+r+"."),console.warn(i.name,i.message),null;for(var s=Pe.defs.current.get(n).cloneNode(!0),a=["x","y","width","height","href","xlink:href"],o=0;o<t.attributes.length;o++){var h=t.attributes[o],l=a.includes(h.nodeName),c=!s.hasAttribute(h.nodeName);(l||c)&&s.setAttribute(h.nodeName,h.value)}n=s.localName;return Pe[n].call(this,s,e)},g:function(t,e){var i=new Ot;Oe.call(this,t,i,e),this.add(i);for(var r=function(t){for(var e={},i=Te(t),r=Math.max(i.length,t.style.length),n=0;n<r;n++){var s=t.style[n],a=i[n];s&&(e[s]=t.style[s]),a&&(e[a]=t.getAttribute(a))}return e}.call(this,t),n=0,s=t.childNodes.length;n<s;n++){var a=t.childNodes[n],o=a.nodeName;if(!o)return;o=o.replace(/svg:/gi,"").toLowerCase();o in Pe&&((a=Pe[o].call(i,a,r))&&!a.parent&&i.add(a))}return i},polygon:function(t,e){var i=t.getAttribute("points"),r=[];i.replace(/(-?[\d.eE-]+)[,|\s](-?[\d.eE-]+)/g,function(t,e,i){r.push(new et(parseFloat(e),parseFloat(i)))});i=new se(r,!0).noStroke();return i.fill="black",Oe.call(this,t,i,e),i},polyline:function(t,e){e=Pe.polygon.call(this,t,e);return e.closed=!1,e},path:function(t,e){var y,v,b,x,f,w,i=t.getAttribute("d"),k=[],M=!1;i&&(v=new et,f=i.match(/[a-df-z][^a-df-z]*/gi),w=f.length-1,G.each(f.slice(0),function(t,e){var i,r,n,s,a,o=t.slice(1).trim().match(Re),h=t[0],l=h.toLowerCase(),c=[];switch(0===e&&(f=[]),l){case"h":case"v":1<o.length&&(i=1);break;case"m":case"l":case"t":2<o.length&&(i=2);break;case"s":case"q":4<o.length&&(i=4);break;case"c":6<o.length&&(i=6);break;case"a":7<o.length&&(i=7)}if(i){for(n=o.length,a=r=0;r<n;r+=i){if(s=h,0<a)switch(h){case"m":s="l";break;case"M":s="L"}c.push(s+o.slice(r,r+i).join(" ")),a++}f=Array.prototype.concat.apply(f,c)}else f.push(t)}),G.each(f,function(t,e){var i=t[0],r=i.toLowerCase();switch(x=t.slice(1).trim().match(Re),y=i===r,r){case"z":if(w<=e)M=!0;else for(var n=new et(v.x,v.y,void 0,void 0,void 0,void 0,L.close),s=k.length-1;0<=s;s--){var a=k[s];if(/m/i.test(a.command)){v=a;break}}break;case"m":case"l":b=void 0,n=new et(parseFloat(x[0]),parseFloat(x[1]),void 0,void 0,void 0,void 0,/m/i.test(r)?L.move:L.line),y&&n.addSelf(v),v=n;break;case"h":case"v":var o=/h/i.test(r)?"x":"y",h=/x/i.test(o)?"y":"x";(n=new et(void 0,void 0,void 0,void 0,void 0,void 0,L.line))[o]=parseFloat(x[0]),n[h]=v[h],y&&(n[o]+=v[o]),v=n;break;case"c":case"s":l=v.x,c=v.y,b=b||new K,m=/c/i.test(r)?(u=parseFloat(x[0]),d=parseFloat(x[1]),g=parseFloat(x[2]),p=parseFloat(x[3]),_=parseFloat(x[4]),parseFloat(x[5])):(u=(f=dt(v,b,y)).x,d=f.y,g=parseFloat(x[0]),p=parseFloat(x[1]),_=parseFloat(x[2]),parseFloat(x[3])),y&&(u+=l,d+=c,g+=l,p+=c,_+=l,m+=c),G.isObject(v.controls)||et.AppendCurveProperties(v),v.controls.right.set(u-v.x,d-v.y),n=new et(_,m,g-_,p-m,void 0,void 0,L.curve),b=(v=n).controls.left;break;case"t":case"q":l=v.x,c=v.y,b=b||new K,m=/q/i.test(r)?(u=parseFloat(x[0]),d=parseFloat(x[1]),g=parseFloat(x[0]),p=parseFloat(x[1]),_=parseFloat(x[2]),parseFloat(x[3])):(u=(f=dt(v,b,y)).x,d=f.y,g=f.x,p=f.y,_=parseFloat(x[0]),parseFloat(x[1])),y&&(u+=l,d+=c,g+=l,p+=c,_+=l,m+=c),G.isObject(v.controls)||et.AppendCurveProperties(v),v.controls.right.set(.33*(u-v.x),.33*(d-v.y)),n=new et(_,m,g-_,p-m,void 0,void 0,L.curve),b=(v=n).controls.left;break;case"a":var l=v.x,c=v.y,f=parseFloat(x[0]),u=parseFloat(x[1]),d=parseFloat(x[2]),g=parseFloat(x[3]),p=parseFloat(x[4]),_=parseFloat(x[5]),m=parseFloat(x[6]);y&&(_+=l,m+=c);m=new et(_,m);m.command=L.arc,m.rx=f,m.ry=u,m.xAxisRotation=d,m.largeArcFlag=g,m.sweepFlag=p,v=n=m,b=void 0}n&&(Array.isArray(n)?k=k.concat(n):k.push(n))})),(i=new se(k,M,void 0,!0).noStroke()).fill="black";var r=i.getBoundingClientRect(!0);return r.centroid={x:r.left+r.width/2,y:r.top+r.height/2},G.each(i.vertices,function(t){t.subSelf(r.centroid)}),Oe.call(this,t,i,e),i.translation.addSelf(r.centroid),i},circle:function(t,e){var i=parseFloat(t.getAttribute("cx")),r=parseFloat(t.getAttribute("cy")),n=new ge(0,0,parseFloat(t.getAttribute("r"))).noStroke();return n.fill="black",Oe.call(this,t,n,e),n.translation.x=i,n.translation.y=r,n},ellipse:function(t,e){var i=parseFloat(t.getAttribute("cx")),r=parseFloat(t.getAttribute("cy")),n=new ve(0,0,parseFloat(t.getAttribute("rx")),parseFloat(t.getAttribute("ry"))).noStroke();return n.fill="black",Oe.call(this,t,n,e),n.translation.x=i,n.translation.y=r,n},rect:function(t,e){var i=parseFloat(t.getAttribute("rx")),r=parseFloat(t.getAttribute("ry"));if(!G.isNaN(i)||!G.isNaN(r))return Pe["rounded-rect"](t);parseFloat(t.getAttribute("x")),parseFloat(t.getAttribute("y"));var n=parseFloat(t.getAttribute("width")),s=parseFloat(t.getAttribute("height")),i=n/2,r=s/2,s=new xe(0,0,n,s).noStroke();return s.fill="black",Oe.call(this,t,s,e),s.translation.x+=i,s.translation.y+=r,s},"rounded-rect":function(t,e){parseFloat(t.getAttribute("x")),parseFloat(t.getAttribute("y"));var i=parseFloat(t.getAttribute("rx"))||0,r=parseFloat(t.getAttribute("ry"))||0,n=parseFloat(t.getAttribute("width")),s=parseFloat(t.getAttribute("height")),a=n/2,o=s/2,r=new we(0,0,n,s,new K(i,r)).noStroke();return r.fill="black",Oe.call(this,t,r,e),r.translation.x+=a,r.translation.y+=o,r},line:function(t,e){var i=new be(parseFloat(t.getAttribute("x1")),parseFloat(t.getAttribute("y1")),parseFloat(t.getAttribute("x2")),parseFloat(t.getAttribute("y2"))).noFill();return Oe.call(this,t,i,e),i},lineargradient:function(t,e){for(var i=parseFloat(t.getAttribute("x1")),r=parseFloat(t.getAttribute("y1")),n=parseFloat(t.getAttribute("x2")),s=parseFloat(t.getAttribute("y2")),a=(n+i)/2,o=(s+r)/2,h=[],l=0;l<t.children.length;l++){var c=t.children[l],f=c.getAttribute("offset");/%/gi.test(f)&&(f=parseFloat(f.replace(/%/gi,""))/100);var u,f=parseFloat(f),d=c.getAttribute("stop-color"),g=c.getAttribute("stop-opacity"),c=c.getAttribute("style");null===d&&(d=(u=!!c&&c.match(/stop-color:\s?([#a-fA-F0-9]*)/))&&1<u.length?u[1]:void 0),g=null===g?(u=!!c&&c.match(/stop-opacity:\s?([0-9.-]*)/))&&1<u.length?parseFloat(u[1]):1:parseFloat(g),h.push(new $t(f,d,g))}o=new Kt(i-a,r-o,n-a,s-o,h);return Oe.call(this,t,o,e),o},radialgradient:function(t,e){var i=parseFloat(t.getAttribute("cx"))||0,r=parseFloat(t.getAttribute("cy"))||0,n=parseFloat(t.getAttribute("r")),s=parseFloat(t.getAttribute("fx")),a=parseFloat(t.getAttribute("fy"));G.isNaN(s)&&(s=i),G.isNaN(a)&&(a=r);for(var o=Math.abs(i+s)/2,h=Math.abs(r+a)/2,l=[],c=0;c<t.children.length;c++){var f=t.children[c],u=f.getAttribute("offset");/%/gi.test(u)&&(u=parseFloat(u.replace(/%/gi,""))/100);var d,u=parseFloat(u),g=f.getAttribute("stop-color"),p=f.getAttribute("stop-opacity"),f=f.getAttribute("style");null===g&&(g=(d=!!f&&f.match(/stop-color:\s?([#a-fA-F0-9]*)/))&&1<d.length?d[1]:void 0),p=null===p?(d=!!f&&f.match(/stop-opacity:\s?([0-9.-]*)/))&&1<d.length?parseFloat(d[1]):1:parseFloat(p),l.push(new $t(u,g,p))}h=new Jt(i-o,r-h,n,l,s-o,a-h);return Oe.call(this,t,h,e),h},text:function(t,e){var i,r=(i=t.getAttribute("text-anchor"),Fe[i]||"left"),i=(i=(n=t).getAttribute("dominant-baseline"),n=n.getAttribute("alignment-baseline"),i||n||"baseline"),n=new Ae(t.textContent);return Oe.call(this,t,n,e),n.alignment=r,n.baseline=i,n}};function Ce(t,e){var i=new XMLHttpRequest;return i.open("GET",t),i.onreadystatechange=function(){4===i.readyState&&200===i.status&&e(i.responseText)},i.send(),i}function je(t,e,i,r){se.call(this,[new et,new et,new et,new et],!0),this._renderer.flagTextures=je.FlagTextures.bind(this),this._renderer.bindTextures=je.BindTextures.bind(this),this._renderer.unbindTextures=je.UnbindTextures.bind(this),this.noStroke(),this.noFill(),Array.isArray(t)?this.textures=t.map(je.GenerateTexture.bind(this)):this.textures=[je.GenerateTexture(t)],this.origin=new K,this._update(),this.translation.set(e||0,i||0),this.frameRate="number"==typeof r?r:je.DefaultFrameRate,this.index=0}function Le(t,e,i,r,n,s){se.call(this,[new et,new et,new et,new et],!0),this.noStroke(),this.noFill(),t instanceof te?this.texture=t:"string"==typeof t&&(this.texture=new te(t)),this.origin=new K,this._update(),this.translation.set(e||0,i||0),"number"==typeof r&&(this.columns=r),"number"==typeof n&&(this.rows=n),"number"==typeof s&&(this.frameRate=s),this.index=0}G.extend(je,{Properties:["frameRate","index"],DefaultFrameRate:30,FlagTextures:function(){this._flagTextures=!0},BindTextures:function(t){for(var e=t.length;e--;)t[e].bind(Y.Types.change,this._renderer.flagTextures);this._renderer.flagTextures()},UnbindTextures:function(t){for(var e=t.length;e--;)t[e].unbind(Y.Types.change,this._renderer.flagTextures);this._renderer.flagTextures()},MakeObservable:function(t){xe.MakeObservable(t),G.each(je.Properties,Wt,t),Object.defineProperty(t,"textures",{enumerable:!0,get:function(){return this._textures},set:function(t){this._renderer.flagTextures;var e=this._renderer.bindTextures,i=this._renderer.unbindTextures;this._textures&&this._textures.unbind(Y.Types.insert,e).unbind(Y.Types.remove,i),this._textures=new wt((t||[]).slice(0)),this._textures.bind(Y.Types.insert,e).bind(Y.Types.remove,i),e(this._textures)}})},GenerateTexture:function(t){return t instanceof te?t:"string"==typeof t?new te(t):void 0}}),G.extend(je.prototype,xe.prototype,{constructor:je,_flagTextures:!1,_flagFrameRate:!1,_flagIndex:!1,_amount:1,_duration:0,_index:0,_startTime:0,_playing:!1,_firstFrame:0,_lastFrame:0,_loop:!0,_textures:null,_frameRate:0,_origin:null,play:function(t,e,i){return this._playing=!0,this._firstFrame=0,this._lastFrame=this.amount-1,this._startTime=G.performance.now(),"number"==typeof t&&(this._firstFrame=t),"number"==typeof e&&(this._lastFrame=e),"function"==typeof i?this._onLastFrame=i:delete this._onLastFrame,this._index!==this._firstFrame&&(this._startTime-=1e3*Math.abs(this._index-this._firstFrame)/this._frameRate),this},pause:function(){return this._playing=!1,this},stop:function(){return this._playing=!1,this._index=this._firstFrame,this},clone:function(t){var e=new je(this.textures,this.translation.x,this.translation.y,this.frameRate);return e._loop=this._loop,this._playing&&e.play(),t&&t.add(e),e},toObject:function(){var t=xe.prototype.toObject.call(this);return t.textures=this.textures.map(function(t){return t.toObject()}),t.frameRate=this.frameRate,t.index=this.index,t._firstFrame=this._firstFrame,t._lastFrame=this._lastFrame,t._loop=this._loop,t},_update:function(){var t,e,i,r,n,s,a=this._textures;return this._flagTextures&&(this._amount=a.length),this._flagFrameRate&&(this._duration=1e3*this._amount/this._frameRate),this._playing&&0<this._frameRate?(n=this._amount,G.isNaN(this._lastFrame)&&(this._lastFrame=n-1),i=G.performance.now()-this._startTime,n=1e3*((s=this._lastFrame+1)-this._firstFrame)/this._frameRate,this._loop?i%=n:i=Math.min(i,n),n=B(this._firstFrame,s,i/n),(n=Math.floor(n))!==this._index&&(this._index=n,(r=a[this._index]).loaded&&(t=r.image.width,e=r.image.height,this.width!==t&&(this.width=t),this.height!==e&&(this.height=e),this.fill=r,n>=this._lastFrame-1&&this._onLastFrame&&this._onLastFrame()))):!this._flagIndex&&this.fill instanceof te||((r=a[this._index]).loaded&&(t=r.image.width,e=r.image.height,this.width!==t&&(this.width=t),this.height!==e&&(this.height=e)),this.fill=r),xe.prototype._update.call(this),this},flagReset:function(){return this._flagTextures=this._flagFrameRate=!1,xe.prototype.flagReset.call(this),this}}),je.MakeObservable(je.prototype),G.extend(Le,{Properties:["texture","columns","rows","frameRate","index"],MakeObservable:function(t){xe.MakeObservable(t),G.each(Le.Properties,Wt,t)}}),G.extend(Le.prototype,xe.prototype,{constructor:Le,_flagTexture:!1,_flagColumns:!1,_flagRows:!1,_flagFrameRate:!1,flagIndex:!1,_amount:1,_duration:0,_startTime:0,_playing:!1,_firstFrame:0,_lastFrame:0,_loop:!0,_texture:null,_columns:1,_rows:1,_frameRate:0,_index:0,_origin:null,play:function(t,e,i){return this._playing=!0,this._firstFrame=0,this._lastFrame=this.amount-1,this._startTime=G.performance.now(),"number"==typeof t&&(this._firstFrame=t),"number"==typeof e&&(this._lastFrame=e),"function"==typeof i?this._onLastFrame=i:delete this._onLastFrame,this._index!==this._firstFrame&&(this._startTime-=1e3*Math.abs(this._index-this._firstFrame)/this._frameRate),this},pause:function(){return this._playing=!1,this},stop:function(){return this._playing=!1,this._index=0,this},clone:function(t){var e=new Le(this.texture,this.translation.x,this.translation.y,this.columns,this.rows,this.frameRate);return this.playing&&(e.play(this._firstFrame,this._lastFrame),e._loop=this._loop),t&&t.add(e),e},toObject:function(){var t=xe.prototype.toObject.call(this);return t.texture=this.texture.toObject(),t.columns=this.columns,t.rows=this.rows,t.frameRate=this.frameRate,t.index=this.index,t._firstFrame=this._firstFrame,t._lastFrame=this._lastFrame,t._loop=this._loop,t},_update:function(){var t,e,i,r,n,s,a=this._texture,o=this._columns,h=this._rows;return(this._flagColumns||this._flagRows)&&(this._amount=this._columns*this._rows),this._flagFrameRate&&(this._duration=1e3*this._amount/this._frameRate),this._flagTexture&&(this.fill=this._texture),this._texture.loaded&&(i=a.image.width,s=(r=a.image.height)/h,e=this._amount,this.width!==(n=i/o)&&(this.width=n),this.height!==s&&(this.height=s),this._playing&&0<this._frameRate&&(G.isNaN(this._lastFrame)&&(this._lastFrame=e-1),t=G.performance.now()-this._startTime,e=1e3*((h=this._lastFrame+1)-this._firstFrame)/this._frameRate,this._loop?t%=e:t=Math.min(t,e),e=B(this._firstFrame,h,t/e),(e=Math.floor(e))!==this._index&&(this._index=e)>=this._lastFrame-1&&this._onLastFrame&&this._onLastFrame()),n=-n*(this._index%o)+(i-n)/2,s=-s*Math.floor(this._index/o)+(r-s)/2,n!==a.offset.x&&(a.offset.x=n),s!==a.offset.y&&(a.offset.y=s)),xe.prototype._update.call(this),this},flagReset:function(){return this._flagTexture=this._flagColumns=this._flagRows=this._flagFrameRate=!1,xe.prototype.flagReset.call(this),this}}),Le.MakeObservable(Le.prototype);var Ie=2*Math.PI,Ne=Math.PI/2;function Be(t,e,i,r,n,s,a){for(var o=a||3*_t.Resolution,h=[],l=0;l<o;l++)h.push(new et);se.call(this,h,!0,!1,!0),"number"==typeof i&&(this.innerRadius=i),"number"==typeof r&&(this.outerRadius=r),"number"==typeof n&&(this.startAngle=n),"number"==typeof s&&(this.endAngle=s),this._update(),"number"==typeof t&&(this.translation.x=t),"number"==typeof e&&(this.translation.y=e)}G.extend(Be,{Properties:["startAngle","endAngle","innerRadius","outerRadius"],MakeObservable:function(t){se.MakeObservable(t),G.each(Be.Properties,Wt,t)}}),G.extend(Be.prototype,se.prototype,{constructor:Be,_flagStartAngle:!1,_flagEndAngle:!1,_flagInnerRadius:!1,_flagOuterRadius:!1,_startAngle:0,_endAngle:Ie,_innerRadius:0,_outerRadius:0,_update:function(){if(this._flagStartAngle||this._flagEndAngle||this._flagInnerRadius||this._flagOuterRadius){var t=this._startAngle,e=this._endAngle,i=this._innerRadius,r=this._outerRadius,n=z(t,Ie)===z(e,Ie),s=0<i,a=this.vertices,o=s?a.length/2:a.length,h=0;n?o--:s||(o-=2);for(var l=0,c=o-1;l<o;l++){var f,u=l/c,d=a[h],g=u*(e-t)+t,p=(e-t)/o,_=r*Math.cos(g),m=r*Math.sin(g),y=0===l?L.move:L.curve;d.command=y,d.x=_,d.y=m,d.controls.left.clear(),d.controls.right.clear(),d.command===L.curve&&(f=r*p/Math.PI,d.controls.left.x=f*Math.cos(g-Ne),d.controls.left.y=f*Math.sin(g-Ne),d.controls.right.x=f*Math.cos(g+Ne),d.controls.right.y=f*Math.sin(g+Ne),1===l&&d.controls.left.multiplyScalar(2),l===c&&d.controls.right.multiplyScalar(2)),h++}if(s){for(n?(a[h].command=L.close,h++):c=--o-1,l=0;l<o;l++)d=a[h],g=(1-(u=l/c))*(e-t)+t,p=(e-t)/o,_=i*Math.cos(g),m=i*Math.sin(g),y=L.curve,l<=0&&(y=n?L.move:L.line),d.command=y,d.x=_,d.y=m,d.controls.left.clear(),d.controls.right.clear(),d.command===L.curve&&(f=i*p/Math.PI,d.controls.left.x=f*Math.cos(g+Ne),d.controls.left.y=f*Math.sin(g+Ne),d.controls.right.x=f*Math.cos(g-Ne),d.controls.right.y=f*Math.sin(g-Ne),1===l&&d.controls.left.multiplyScalar(2),l===c&&d.controls.right.multiplyScalar(2)),h++;a[h].copy(a[0]),a[h].command=L.line}else n||(a[h].command=L.line,a[h].x=0,a[h].y=0,a[++h].copy(a[0]),a[h].command=L.line)}return se.prototype._update.call(this),this},flagReset:function(){return se.prototype.flagReset.call(this),this._flagStartAngle=this._flagEndAngle=this._flagInnerRadius=this._flagOuterRadius=!1,this},clone:function(t){var e=new Be(0,0,this.innerRadius,this.outerradius,this.startAngle,this.endAngle,this.vertices.length);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&e.matrix.copy(this.matrix),G.each(se.Properties,function(t){e[t]=this[t]},this),t&&t.add(e),e},toObject:function(){var e=se.prototype.toObject.call(this);return G.each(Be.Properties,function(t){e[t]=this[t]},this),e}}),Be.MakeObservable(Be.prototype);var ze=2*Math.PI,He=Math.cos,Ve=Math.sin;function De(t,e,i,r){r=Math.max(r||0,3),se.call(this),this.closed=!0,this.automatic=!1,"number"==typeof i&&(this.width=2*i),"number"==typeof i&&(this.height=2*i),"number"==typeof r&&(this.sides=r),this._update(),"number"==typeof t&&(this.translation.x=t),"number"==typeof e&&(this.translation.y=e)}G.extend(De,{Properties:["width","height","sides"],MakeObservable:function(t){se.MakeObservable(t),G.each(De.Properties,Wt,t)}}),G.extend(De.prototype,se.prototype,{constructor:De,_flagWidth:!1,_flagHeight:!1,_flagSides:!1,_width:0,_height:0,_sides:0,_update:function(){if(this._flagWidth||this._flagHeight||this._flagSides){var t=this._sides,e=t+1,i=this.vertices.length;t<i&&(this.vertices.splice(t-1,i-t),i=t);for(var r=0;r<e;r++){var n=ze*((r+.5)/t)+Math.PI/2,s=this._width*He(n)/2,n=this._height*Ve(n)/2;i<=r?this.vertices.push(new et(s,n)):this.vertices[r].set(s,n),this.vertices[r].command=0===r?L.move:L.line}}return se.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=this._flagSides=!1,se.prototype.flagReset.call(this),this},clone:function(t){var e=new De(0,0,this.radius,this.sides);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&e.matrix.copy(this.matrix),G.each(se.Properties,function(t){e[t]=this[t]},this),t&&t.add(e),e},toObject:function(){var e=se.prototype.toObject.call(this);return G.each(De.Properties,function(t){e[t]=this[t]},this),e}}),De.MakeObservable(De.prototype);var Ue=2*Math.PI,qe=Math.cos,Xe=Math.sin;function We(t,e,i,r,n){arguments.length<=3&&(i=(r=i)/2),("number"!=typeof n||n<=0)&&(n=5),se.call(this),this.closed=!0,this.automatic=!1,"number"==typeof i&&(this.innerRadius=i),"number"==typeof r&&(this.outerRadius=r),"number"==typeof n&&(this.sides=n),this._update(),"number"==typeof t&&(this.translation.x=t),"number"==typeof e&&(this.translation.y=e)}G.extend(We,{Properties:["innerRadius","outerRadius","sides"],MakeObservable:function(t){se.MakeObservable(t),G.each(We.Properties,Wt,t)}}),G.extend(We.prototype,se.prototype,{constructor:We,_flagInnerRadius:!1,_flagOuterRadius:!1,_flagSides:!1,_innerRadius:0,_outerRadius:0,_sides:0,_update:function(){if(this._flagInnerRadius||this._flagOuterRadius||this._flagSides){var t=2*this._sides,e=1+t,i=this.vertices.length;t<i&&(this.vertices.splice(t-1,i-t),i=t);for(var r=0;r<e;r++){var n=Ue*((r+.5)/t),s=(r%2?this._outerRadius:this._innerRadius)/2,a=s*qe(n),n=s*Xe(n);i<=r?this.vertices.push(new et(a,n)):this.vertices[r].set(a,n),this.vertices[r].command=0===r?L.move:L.line}}return se.prototype._update.call(this),this},flagReset:function(){return this._flagInnerRadius=this._flagOuterRadius=this._flagSides=!1,se.prototype.flagReset.call(this),this},clone:function(t){var e=new We(0,0,this.innerRadius,this.outerRadius,this.sides);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&e.matrix.copy(this.matrix),G.each(se.Properties,function(t){e[t]=this[t]},this),t&&t.add(e),e},toObject:function(){var e=se.prototype.toObject.call(this);return G.each(We.Properties,function(t){e[t]=this[t]},this),e}}),We.MakeObservable(We.prototype);var Ge={version:1.1,ns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",alignments:{left:"start",center:"middle",right:"end"},createElement:function(t,e){var i=t,t=document.createElementNS(Ge.ns,i);return(e="svg"===i?G.defaults(e||{},{version:Ge.version}):e)&&0<Object.keys(e).length&&Ge.setAttributes(t,e),t},setAttributes:function(t,e){for(var i=Object.keys(e),r=0;r<i.length;r++)/href/.test(i[r])?t.setAttributeNS(Ge.xlink,i[r],e[i[r]]):t.setAttribute(i[r],e[i[r]]);return this},removeAttributes:function(t,e){for(var i in e)t.removeAttribute(i);return this},toString:function(t,e){for(var i,r=t.length,n=r-1,s="",a=0;a<r;a++){var o,h,l,c,f,u,d,g,p,_,m,y=t[a],v=e?z(a-1,r):Math.max(a-1,0),b=e?z(a+1,r):Math.min(a+1,n),x=t[v],w=(t[b],H(y.x)),k=H(y.y);switch(y.command){case L.close:o=L.close;break;case L.arc:d=y.rx,g=y.ry,p=y.xAxisRotation,_=y.largeArcFlag,m=y.sweepFlag,o=L.arc+" "+d+" "+g+" "+p+" "+_+" "+m+" "+w+" "+k;break;case L.curve:_=x.controls&&x.controls.right||K.zero,m=y.controls&&y.controls.left||K.zero,c=x.relative?(l=H(_.x+x.x),H(_.y+x.y)):(l=H(_.x),H(_.y)),u=y.relative?(f=H(m.x+y.x),H(m.y+y.y)):(f=H(m.x),H(m.y)),o=(0===a?L.move:L.curve)+" "+l+" "+c+" "+f+" "+u+" "+w+" "+k;break;case L.move:i=y,o=L.move+" "+w+" "+k;break;default:o=y.command+" "+w+" "+k}n<=a&&e&&(y.command===L.curve&&(h=i,v=y.controls&&y.controls.right||y,b=h.controls&&h.controls.left||h,c=y.relative?(l=H(v.x+y.x),H(v.y+y.y)):(l=H(v.x),H(v.y)),u=h.relative?(f=H(b.x+h.x),H(b.y+h.y)):(f=H(b.x),H(b.y)),o+=" C "+l+" "+c+" "+f+" "+u+" "+(w=H(h.x))+" "+(k=H(h.y))),y.command!==L.close&&(o+=" Z")),s+=o+" "}return s},getClip:function(t){var e=t._renderer.clip;if(!e){for(var i=t;i.parent;)i=i.parent;e=t._renderer.clip=Ge.createElement("clipPath"),i.defs.appendChild(e)}return e},group:{appendChild:function(t){var e,i=t._renderer.elem;i&&(!(e=i.nodeName)||/(radial|linear)gradient/i.test(e)||t._clip||this.elem.appendChild(i))},removeChild:function(t){var e=t._renderer.elem;e&&e.parentNode==this.elem&&e.nodeName&&(t._clip||this.elem.removeChild(e))},orderChild:function(t){this.elem.appendChild(t._renderer.elem)},renderChild:function(t){Ge[t._renderer.type].render.call(t,this)},render:function(t){if(!this._visible&&!this._flagVisible||0===this._opacity&&!this._flagOpacity)return this;this._update(),this._renderer.elem||(this._renderer.elem=Ge.createElement("g",{id:this.id}),t.appendChild(this._renderer.elem));var e=this._matrix.manual||this._flagMatrix,i={domElement:t,elem:this._renderer.elem};e&&this._renderer.elem.setAttribute("transform","matrix("+this._matrix.toString()+")");for(var r=0;r<this.children.length;r++){var n=this.children[r];Ge[n._renderer.type].render.call(n,t)}return this._flagOpacity&&this._renderer.elem.setAttribute("opacity",this._opacity),this._flagVisible&&this._renderer.elem.setAttribute("display",this._visible?"inline":"none"),this._flagClassName&&this._renderer.elem.setAttribute("class",this.classList.join(" ")),this._flagAdditions&&this.additions.forEach(Ge.group.appendChild,i),this._flagSubtractions&&this.subtractions.forEach(Ge.group.removeChild,i),this._flagOrder&&this.children.forEach(Ge.group.orderChild,i),this._flagMask&&(this._mask?this._renderer.elem.setAttribute("clip-path","url(#"+this._mask.id+")"):this._renderer.elem.removeAttribute("clip-path")),this.flagReset()}},path:{render:function(t){if(0===this._opacity&&!this._flagOpacity)return this;this._update();var e,i={};return(this._matrix.manual||this._flagMatrix)&&(i.transform="matrix("+this._matrix.toString()+")"),this._flagVertices&&(e=Ge.toString(this._renderer.vertices,this._closed),i.d=e),this._fill&&this._fill._renderer&&(this._fill._update(),Ge[this._fill._renderer.type].render.call(this._fill,t,!0)),this._flagFill&&(i.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill),this._stroke&&this._stroke._renderer&&(this._stroke._update(),Ge[this._stroke._renderer.type].render.call(this._stroke,t,!0)),this._flagStroke&&(i.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke),this._flagLinewidth&&(i["stroke-width"]=this._linewidth),this._flagOpacity&&(i["stroke-opacity"]=this._opacity,i["fill-opacity"]=this._opacity),this._flagClassName&&(i.class=this.classList.join(" ")),this._flagVisible&&(i.visibility=this._visible?"visible":"hidden"),this._flagCap&&(i["stroke-linecap"]=this._cap),this._flagJoin&&(i["stroke-linejoin"]=this._join),this._flagMiter&&(i["stroke-miterlimit"]=this._miter),this.dashes&&0<this.dashes.length&&(i["stroke-dasharray"]=this.dashes.join(" "),i["stroke-dashoffset"]=this.dashes.offset||0),this._renderer.elem?Ge.setAttributes(this._renderer.elem,i):(i.id=this.id,this._renderer.elem=Ge.createElement("path",i),t.appendChild(this._renderer.elem)),this._flagClip&&(i=Ge.getClip(this),t=this._renderer.elem,this._clip?(t.removeAttribute("id"),i.setAttribute("id",this.id),i.appendChild(t)):(i.removeAttribute("id"),t.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(t))),this.flagReset()}},text:{render:function(t){this._update();var e={};return(this._matrix.manual||this._flagMatrix)&&(e.transform="matrix("+this._matrix.toString()+")"),this._flagFamily&&(e["font-family"]=this._family),this._flagSize&&(e["font-size"]=this._size),this._flagLeading&&(e["line-height"]=this._leading),this._flagAlignment&&(e["text-anchor"]=Ge.alignments[this._alignment]||this._alignment),this._flagBaseline&&(e["alignment-baseline"]=e["dominant-baseline"]=this._baseline),this._flagStyle&&(e["font-style"]=this._style),this._flagWeight&&(e["font-weight"]=this._weight),this._flagDecoration&&(e["text-decoration"]=this._decoration),this._fill&&this._fill._renderer&&(this._fill._update(),Ge[this._fill._renderer.type].render.call(this._fill,t,!0)),this._flagFill&&(e.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill),this._stroke&&this._stroke._renderer&&(this._stroke._update(),Ge[this._stroke._renderer.type].render.call(this._stroke,t,!0)),this._flagStroke&&(e.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke),this._flagLinewidth&&(e["stroke-width"]=this._linewidth),this._flagOpacity&&(e.opacity=this._opacity),this._flagClassName&&(e.class=this.classList.join(" ")),this._flagVisible&&(e.visibility=this._visible?"visible":"hidden"),this.dashes&&0<this.dashes.length&&(e["stroke-dasharray"]=this.dashes.join(" "),e["stroke-dashoffset"]=this.dashes.offset||0),this._renderer.elem?Ge.setAttributes(this._renderer.elem,e):(e.id=this.id,this._renderer.elem=Ge.createElement("text",e),t.defs.appendChild(this._renderer.elem)),this._flagClip&&(e=Ge.getClip(this),t=this._renderer.elem,this._clip?(t.removeAttribute("id"),e.setAttribute("id",this.id),e.appendChild(t)):(e.removeAttribute("id"),t.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(t))),this._flagValue&&(this._renderer.elem.textContent=this._value),this.flagReset()}},"linear-gradient":{render:function(t,e){e||this._update();e={};if(this._flagEndPoints&&(e.x1=this.left._x,e.y1=this.left._y,e.x2=this.right._x,e.y2=this.right._y),this._flagSpread&&(e.spreadMethod=this._spread),this._renderer.elem?Ge.setAttributes(this._renderer.elem,e):(e.id=this.id,e.gradientUnits="userSpaceOnUse",this._renderer.elem=Ge.createElement("linearGradient",e),t.defs.appendChild(this._renderer.elem)),this._flagStops){var i=this._renderer.elem.childNodes.length!==this.stops.length;if(i)for(;this._renderer.elem.lastChild;)this._renderer.elem.removeChild(this._renderer.elem.lastChild);for(var r=0;r<this.stops.length;r++){var n=this.stops[r],s={};n._flagOffset&&(s.offset=100*n._offset+"%"),n._flagColor&&(s["stop-color"]=n._color),n._flagOpacity&&(s["stop-opacity"]=n._opacity),n._renderer.elem?Ge.setAttributes(n._renderer.elem,s):n._renderer.elem=Ge.createElement("stop",s),i&&this._renderer.elem.appendChild(n._renderer.elem),n.flagReset()}}return this.flagReset()}},"radial-gradient":{render:function(t,e){e||this._update();e={};if(this._flagCenter&&(e.cx=this.center._x,e.cy=this.center._y),this._flagFocal&&(e.fx=this.focal._x,e.fy=this.focal._y),this._flagRadius&&(e.r=this._radius),this._flagSpread&&(e.spreadMethod=this._spread),this._renderer.elem?Ge.setAttributes(this._renderer.elem,e):(e.id=this.id,e.gradientUnits="userSpaceOnUse",this._renderer.elem=Ge.createElement("radialGradient",e),t.defs.appendChild(this._renderer.elem)),this._flagStops){var i=this._renderer.elem.childNodes.length!==this.stops.length;if(i)for(;this._renderer.elem.lastChild;)this._renderer.elem.removeChild(this._renderer.elem.lastChild);for(var r=0;r<this.stops.length;r++){var n=this.stops[r],s={};n._flagOffset&&(s.offset=100*n._offset+"%"),n._flagColor&&(s["stop-color"]=n._color),n._flagOpacity&&(s["stop-opacity"]=n._opacity),n._renderer.elem?Ge.setAttributes(n._renderer.elem,s):n._renderer.elem=Ge.createElement("stop",s),i&&this._renderer.elem.appendChild(n._renderer.elem),n.flagReset()}}return this.flagReset()}},texture:{render:function(t,e){e||this._update();var e={},i={x:0,y:0},r=this.image;if(this._flagLoaded&&this.loaded)switch(r.nodeName.toLowerCase()){case"canvas":i.href=i["xlink:href"]=r.toDataURL("image/png");break;case"img":case"image":i.href=i["xlink:href"]=this.src}return(this._flagOffset||this._flagLoaded||this._flagScale)&&(e.x=this._offset.x,e.y=this._offset.y,r&&(e.x-=r.width/2,e.y-=r.height/2,this._scale instanceof K?(e.x*=this._scale.x,e.y*=this._scale.y):(e.x*=this._scale,e.y*=this._scale)),0<e.x&&(e.x*=-1),0<e.y&&(e.y*=-1)),(this._flagScale||this._flagLoaded||this._flagRepeat)&&(e.width=0,e.height=0,r&&(i.width=e.width=r.width,i.height=e.height=r.height,"no-repeat"===this._repeat&&(e.width+=1,e.height+=1),this._scale instanceof K?(e.width*=this._scale.x,e.height*=this._scale.y):(e.width*=this._scale,e.height*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.image?Ge.setAttributes(this._renderer.image,i):this._renderer.image=Ge.createElement("image",i)),this._renderer.elem?0!==Object.keys(e).length&&Ge.setAttributes(this._renderer.elem,e):(e.id=this.id,e.patternUnits="userSpaceOnUse",this._renderer.elem=Ge.createElement("pattern",e),t.defs.appendChild(this._renderer.elem)),this._renderer.elem&&this._renderer.image&&!this._renderer.appended&&(this._renderer.elem.appendChild(this._renderer.image),this._renderer.appended=!0),this.flagReset()}}};function Ye(t){this.domElement=t.domElement||Ge.createElement("svg"),this.scene=new Ot,(this.scene.parent=this).defs=Ge.createElement("defs"),this.domElement.appendChild(this.defs),this.domElement.defs=this.defs,this.domElement.style.overflow="hidden"}G.extend(Ye,{Utils:Ge}),G.extend(Ye.prototype,Y,{constructor:Ye,setSize:function(t,e){return this.width=t,this.height=e,Ge.setAttributes(this.domElement,{width:t,height:e}),this.trigger(Y.Types.resize,t,e)},render:function(){return Ge.group.render.call(this.scene,this.domElement),this}});var $e=ot.Multiply,Ze=[1,0,0,0,1,0,0,0,1],Ke=new q(9),Je=Ht.Utils,Qe={isHidden:/(undefined|none|transparent)/i,canvas:U.document?U.document.createElement("canvas"):{getContext:function(){}},alignments:{left:"start",middle:"center",right:"end"},matrix:new ot,group:{removeChild:function(t,e){if(t.children)for(var i=0;i<t.children.length;i++)Qe.group.removeChild(t.children[i],e);else e.deleteTexture(t._renderer.texture),delete t._renderer.texture},render:function(t,e){if(this._visible){this._update();var i,r=this.parent,n=r._matrix&&r._matrix.manual||r._flagMatrix,s=this._matrix.manual||this._flagMatrix;if((n||s)&&(this._renderer.matrix||(this._renderer.matrix=new q(9)),this._matrix.toTransformArray(!0,Ke),$e(Ke,r._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof K||(this._renderer.scale=new K),this._scale instanceof K?(this._renderer.scale.x=this._scale.x,this._renderer.scale.y=this._scale.y):(this._renderer.scale.x=this._scale,this._renderer.scale.y=this._scale),/renderer/i.test(r._renderer.type)||(this._renderer.scale.x*=r._renderer.scale.x,this._renderer.scale.y*=r._renderer.scale.y),n&&(this._flagMatrix=!0)),this._mask&&(t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,0),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1),Qe[this._mask._renderer.type].render.call(this._mask,t,e,this),t.stencilFunc(t.EQUAL,1,255),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.colorMask(!0,!0,!0,!0)),this._flagOpacity=r._flagOpacity||this._flagOpacity,this._renderer.opacity=this._opacity*(r&&r._renderer?r._renderer.opacity:1),this._flagSubtractions)for(i=0;i<this.subtractions.length;i++)Qe.group.removeChild(this.subtractions[i],t);for(i=0;i<this.children.length;i++){var a=this.children[i];Qe[a._renderer.type].render.call(a,t,e)}return this._mask&&t.disable(t.STENCIL_TEST),this.flagReset()}}},path:{updateCanvas:function(t){var e,i,r,n=t._renderer.vertices,s=this.canvas,a=this.ctx,o=t._renderer.scale,h=t._stroke,l=t._linewidth,c=t._fill,f=t._renderer.opacity||t._opacity,u=t._cap,d=t._join,g=t._miter,p=t._closed,_=t.dashes,m=n.length,y=m-1;s.width=Math.max(Math.ceil(t._renderer.rect.width*o.x),1),s.height=Math.max(Math.ceil(t._renderer.rect.height*o.y),1);var v,b=t._renderer.rect.centroid,x=b.x,b=b.y;a.clearRect(0,0,s.width,s.height),c&&("string"==typeof c?a.fillStyle=c:(Qe[c._renderer.type].render.call(c,a,t),a.fillStyle=c._renderer.effect)),h&&("string"==typeof h?a.strokeStyle=h:(Qe[h._renderer.type].render.call(h,a,t),a.strokeStyle=h._renderer.effect),l&&(a.lineWidth=l),g&&(a.miterLimit=g),d&&(a.lineJoin=d),!p&&u&&(a.lineCap=u)),"number"==typeof f&&(a.globalAlpha=f),_&&0<_.length&&(a.lineDashOffset=_.offset||0,a.setLineDash(_)),a.save(),a.scale(o.x,o.y),a.translate(x,b),a.beginPath();for(var w=0;w<n.length;w++){var k=n[w],M=k.x,A=k.y;switch(k.command){case L.close:a.closePath();break;case L.arc:var S,O,R=k.rx,F=k.ry,T=k.xAxisRotation,E=k.largeArcFlag,P=k.sweepFlag,C=(O=n[S=p?z(w-1,m):Math.max(w-1,0)]).x,j=O.y;Je.renderSvgArcCommand(a,C,j,R,F,E,P,T,M,A);break;case L.curve:S=p?z(w-1,m):Math.max(w-1,0),R=p?z(w+1,m):Math.min(w+1,y),O=n[S],n[R],E=O.controls&&O.controls.right||K.zero,P=k.controls&&k.controls.left||K.zero,T=O._relative?(i=E.x+O.x,E.y+O.y):(i=E.x,E.y),R=k._relative?(e=P.x+k.x,P.y+k.y):(e=P.x,P.y),a.bezierCurveTo(i,T,e,R,M,A),y<=w&&p&&(F=v,E=k.controls&&k.controls.right||K.zero,P=F.controls&&F.controls.left||K.zero,T=k._relative?(i=E.x+k.x,E.y+k.y):(i=E.x,E.y),R=F._relative?(e=P.x+F.x,P.y+F.y):(e=P.x,P.y),M=F.x,A=F.y,a.bezierCurveTo(i,T,e,R,M,A));break;case L.line:a.lineTo(M,A);break;case L.move:v=k,a.moveTo(M,A)}}p&&a.closePath(),Qe.isHidden.test(c)||((r=c._renderer&&c._renderer.offset)&&(a.save(),a.translate(-c._renderer.offset.x,-c._renderer.offset.y),a.scale(c._renderer.scale.x,c._renderer.scale.y)),a.fill(),r&&a.restore()),Qe.isHidden.test(h)||((r=h._renderer&&h._renderer.offset)&&(a.save(),a.translate(-h._renderer.offset.x,-h._renderer.offset.y),a.scale(h._renderer.scale.x,h._renderer.scale.y),a.lineWidth=l/h._renderer.scale.x),a.stroke(),r&&a.restore()),a.restore()},getBoundingClientRect:function(t,e,i){var a=1/0,o=-1/0,h=1/0,l=-1/0;t.forEach(function(t){var e,i,r=t.x,n=t.y,s=t.controls;h=Math.min(n,h),a=Math.min(r,a),o=Math.max(r,o),l=Math.max(n,l),t.controls&&(e=s.left,i=s.right,e&&i&&(s=t._relative?e.x+r:e.x,e=t._relative?e.y+n:e.y,r=t._relative?i.x+r:i.x,i=t._relative?i.y+n:i.y,s&&e&&r&&i&&(h=Math.min(e,i,h),a=Math.min(s,r,a),o=Math.max(s,r,o),l=Math.max(e,i,l))))}),"number"==typeof e&&(h-=e,a-=e,o+=e,l+=e),t=o-a,e=l-h,i.top=h,i.left=a,i.right=o,i.bottom=l,i.width=t,i.height=e,i.centroid||(i.centroid={}),i.centroid.x=-a,i.centroid.y=-h},render:function(t,e,i){if(!this._visible||!this._opacity)return this;this._update();var r=i||this.parent,n=r._matrix.manual||r._flagMatrix,s=this._matrix.manual||this._flagMatrix,a=this._renderer.parent!==r,o=this._flagVertices||this._flagFill||this._fill instanceof Kt&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof Jt&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof te&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagImage||this._fill._flagVideo||this._fill._flagRepeat||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof Kt&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof Jt&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof te&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagImage||this._stroke._flagVideo||this._stroke._flagRepeat||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||r._flagOpacity||this._flagVisible||this._flagCap||this._flagJoin||this._flagMiter||this._flagScale||this.dashes&&0<this.dashes.length||!this._renderer.texture;if((n||s||a)&&(this._renderer.matrix||(this._renderer.matrix=new q(9)),this._matrix.toTransformArray(!0,Ke),$e(Ke,r._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof K||(this._renderer.scale=new K),this._scale instanceof K?(this._renderer.scale.x=this._scale.x*r._renderer.scale.x,this._renderer.scale.y=this._scale.y*r._renderer.scale.y):(this._renderer.scale.x=this._scale*r._renderer.scale.x,this._renderer.scale.y=this._scale*r._renderer.scale.y),a&&(this._renderer.parent=r)),o?(this._renderer.rect||(this._renderer.rect={}),this._renderer.opacity=this._opacity*r._renderer.opacity,Qe.path.getBoundingClientRect(this._renderer.vertices,this._linewidth,this._renderer.rect),Qe.updateTexture.call(Qe,t,this)):(this._fill&&this._fill._update&&this._fill._update(),this._stroke&&this._stroke._update&&this._stroke._update()),!this._clip||i){t.bindTexture(t.TEXTURE_2D,this._renderer.texture);i=this._renderer.rect;return t.uniformMatrix3fv(e.matrix,!1,this._renderer.matrix),t.uniform4f(e.rect,i.left,i.top,i.right,i.bottom),t.drawArrays(t.TRIANGLES,0,6),this.flagReset()}}},text:{updateCanvas:function(t){var e=this.canvas,i=this.ctx,r=t._renderer.scale,n=t._stroke,s=t._linewidth*r,a=t._fill,o=t._renderer.opacity||t._opacity,h=t.dashes,l=t._decoration;Je.alignments[t._alignment]||t._alignment,t._baseline,e.width=Math.max(Math.ceil(t._renderer.rect.width*r.x),1),e.height=Math.max(Math.ceil(t._renderer.rect.height*r.y),1);var c,f,u,d,g,p,_,m,y=t._renderer.rect.centroid,v=y.x,b=y.y,y=a._renderer&&a._renderer.offset&&n._renderer&&n._renderer.offset;if(i.clearRect(0,0,e.width,e.height),y||(i.font=[t._style,t._weight,t._size+"px/"+t._leading+"px",t._family].join(" ")),i.textAlign="center",i.textBaseline="middle",a&&("string"==typeof a?i.fillStyle=a:(Qe[a._renderer.type].render.call(a,i,t),i.fillStyle=a._renderer.effect)),n&&("string"==typeof n?i.strokeStyle=n:(Qe[n._renderer.type].render.call(n,i,t),i.strokeStyle=n._renderer.effect),s&&(i.lineWidth=s)),"number"==typeof o&&(i.globalAlpha=o),h&&0<h.length&&(i.lineDashOffset=h.offset||0,i.setLineDash(h)),i.save(),i.scale(r.x,r.y),i.translate(v,b),Qe.isHidden.test(a)||(a._renderer&&a._renderer.offset?(d=a._renderer.scale.x,g=a._renderer.scale.y,i.save(),i.translate(-a._renderer.offset.x,-a._renderer.offset.y),i.scale(d,g),c=t._size/a._renderer.scale.y,f=t._leading/a._renderer.scale.y,i.font=[t._style,t._weight,c+"px/",f+"px",t._family].join(" "),u=a._renderer.offset.x/a._renderer.scale.x,p=a._renderer.offset.y/a._renderer.scale.y,i.fillText(t.value,u,p),i.restore()):i.fillText(t.value,0,0)),Qe.isHidden.test(n)||(n._renderer&&n._renderer.offset?(d=n._renderer.scale.x,g=n._renderer.scale.y,i.save(),i.translate(-n._renderer.offset.x,-n._renderer.offset.y),i.scale(d,g),c=t._size/n._renderer.scale.y,f=t._leading/n._renderer.scale.y,i.font=[t._style,t._weight,c+"px/",f+"px",t._family].join(" "),u=n._renderer.offset.x/n._renderer.scale.x,p=n._renderer.offset.y/n._renderer.scale.y,n=s/n._renderer.scale.x,i.lineWidth=n,i.strokeText(t.value,u,p),i.restore()):i.strokeText(t.value,0,0)),/(underline|strikethrough)/i.test(l)){var x=i.measureText(t.value);switch(l){case"underline":_=x.actualBoundingBoxAscent,m=x.actualBoundingBoxAscent;break;case"strikethrough":m=_=0}p=-x.width/2,l=x.width/2,i.lineWidth=Math.max(Math.floor(t._size/15),1),i.strokeStyle=i.fillStyle,i.beginPath(),i.moveTo(p,_),i.lineTo(l,m),i.stroke()}i.restore()},getBoundingClientRect:function(t,e){var i=Qe.ctx;i.font=[t._style,t._weight,t._size+"px/"+t._leading+"px",t._family].join(" "),i.textAlign="center",i.textBaseline=t._baseline;var r=1.25*i.measureText(t._value).width,n=1.25*Math.max(t._size,t._leading);this._linewidth&&!Qe.isHidden.test(this._stroke)&&(r+=2*this._linewidth,n+=2*this._linewidth);var s=r/2,a=n/2;switch(Qe.alignments[t._alignment]||t._alignment){case Qe.alignments.left:e.left=0,e.right=r;break;case Qe.alignments.right:e.left=-r,e.right=0;break;default:e.left=-s,e.right=s}switch(t._baseline){case"bottom":e.top=-n,e.bottom=0;break;case"top":e.top=0,e.bottom=n;break;default:e.top=-a,e.bottom=a}e.width=r,e.height=n,e.centroid||(e.centroid={}),e.centroid.x=s,e.centroid.y=a},render:function(t,e,i){if(!this._visible||!this._opacity)return this;this._update();var r=i||this.parent,n=r._matrix.manual||r._flagMatrix,s=this._matrix.manual||this._flagMatrix,a=this._renderer.parent!==r,o=this._flagVertices||this._flagFill||this._fill instanceof Kt&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof Jt&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof te&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagImage||this._fill._flagVideo||this._fill._flagRepeat||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof Kt&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof Jt&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof te&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagImage||this._stroke._flagVideo||this._stroke._flagRepeat||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||r._flagOpacity||this._flagVisible||this._flagScale||this._flagValue||this._flagFamily||this._flagSize||this._flagLeading||this._flagAlignment||this._flagBaseline||this._flagStyle||this._flagWeight||this._flagDecoration||this.dashes&&0<this.dashes.length||!this._renderer.texture;if((n||s||a)&&(this._renderer.matrix||(this._renderer.matrix=new q(9)),this._matrix.toTransformArray(!0,Ke),$e(Ke,r._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof K||(this._renderer.scale=new K),this._scale instanceof K?(this._renderer.scale.x=this._scale.x*r._renderer.scale.x,this._renderer.scale.y=this._scale.y*r._renderer.scale.y):(this._renderer.scale.x=this._scale*r._renderer.scale.x,this._renderer.scale.y=this._scale*r._renderer.scale.y),a&&(this._renderer.parent=r)),o?(this._renderer.rect||(this._renderer.rect={}),this._renderer.opacity=this._opacity*r._renderer.opacity,Qe.text.getBoundingClientRect(this,this._renderer.rect),Qe.updateTexture.call(Qe,t,this)):(this._fill&&this._fill._update&&this._fill._update(),this._stroke&&this._stroke._update&&this._stroke._update()),!this._clip||i){t.bindTexture(t.TEXTURE_2D,this._renderer.texture);i=this._renderer.rect;return t.uniformMatrix3fv(e.matrix,!1,this._renderer.matrix),t.uniform4f(e.rect,i.left,i.top,i.right,i.bottom),t.drawArrays(t.TRIANGLES,0,6),this.flagReset()}}},"linear-gradient":{render:function(t,e){if(t.canvas.getContext("2d")){if(this._update(),!this._renderer.effect||this._flagEndPoints||this._flagStops){this._renderer.effect=t.createLinearGradient(this.left._x,this.left._y,this.right._x,this.right._y);for(var i=0;i<this.stops.length;i++){var r=this.stops[i];this._renderer.effect.addColorStop(r._offset,r._color)}}return this.flagReset()}}},"radial-gradient":{render:function(t,e){if(t.canvas.getContext("2d")){if(this._update(),!this._renderer.effect||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops){this._renderer.effect=t.createRadialGradient(this.center._x,this.center._y,0,this.focal._x,this.focal._y,this._radius);for(var i=0;i<this.stops.length;i++){var r=this.stops[i];this._renderer.effect.addColorStop(r._offset,r._color)}}return this.flagReset()}}},texture:{render:function(t,e){if(t.canvas.getContext("2d")){this._update();var i=this.image;if((this._flagLoaded||this._flagImage||this._flagVideo||this._flagRepeat)&&this.loaded)this._renderer.effect=t.createPattern(i,this._repeat);else if(!this._renderer.effect)return this.flagReset();return(this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof K||(this._renderer.offset=new K),this._renderer.offset.x=-this._offset.x,this._renderer.offset.y=-this._offset.y,i&&(this._renderer.offset.x+=i.width/2,this._renderer.offset.y+=i.height/2,this._scale instanceof K?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.scale instanceof K||(this._renderer.scale=new K),this._scale instanceof K?this._renderer.scale.copy(this._scale):this._renderer.scale.set(this._scale,this._scale)),this.flagReset()}}},updateTexture:function(t,e){this[e._renderer.type].updateCanvas.call(Qe,e),e._renderer.texture||(e._renderer.texture=t.createTexture()),t.bindTexture(t.TEXTURE_2D,e._renderer.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.canvas.width<=0||this.canvas.height<=0||t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.canvas)},program:{create:function(e,t){var i=e.createProgram();if(G.each(t,function(t){e.attachShader(i,t)}),e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS))throw t=e.getProgramInfoLog(i),e.deleteProgram(i),new Xt("unable to link program: "+t);return i}},shaders:{create:function(t,e,i){i=t.createShader(t[i]);if(t.shaderSource(i,e),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))throw e=t.getShaderInfoLog(i),t.deleteShader(i),new Xt("unable to compile shader "+i+": "+e);return i},types:{vertex:"VERTEX_SHADER",fragment:"FRAGMENT_SHADER"},vertex:["precision mediump float;","attribute vec2 a_position;","","uniform mat3 u_matrix;","uniform vec2 u_resolution;","uniform vec4 u_rect;","","varying vec2 v_textureCoords;","","void main() {","   vec2 rectCoords = (a_position * (u_rect.zw - u_rect.xy)) + u_rect.xy;","   vec2 projected = (u_matrix * vec3(rectCoords, 1.0)).xy;","   vec2 normal = projected / u_resolution;","   vec2 clipspace = (normal * 2.0) - 1.0;","","   gl_Position = vec4(clipspace * vec2(1.0, -1.0), 0.0, 1.0);","   v_textureCoords = a_position;","}"].join("\n"),fragment:["precision mediump float;","","uniform sampler2D u_image;","varying vec2 v_textureCoords;","","void main() {","  vec4 texel = texture2D(u_image, v_textureCoords);","  if (texel.a == 0.0) {","    discard;","  }","  gl_FragColor = texel;","}"].join("\n")},TextureRegistry:new Yt};function ti(t){var e,i;if(this.domElement=t.domElement||document.createElement("canvas"),void 0!==t.offscreenElement&&(Qe.canvas=t.offscreenElement,Qe.ctx=Qe.canvas.getContext("2d")),this.scene=new Ot,(this.scene.parent=this)._renderer={type:"renderer",matrix:new q(Ze),scale:1,opacity:1},this._flagMatrix=!0,t=G.defaults(t||{},{antialias:!1,alpha:!0,premultipliedAlpha:!0,stencil:!0,preserveDrawingBuffer:!0,overdraw:!1}),this.overdraw=t.overdraw,e=this.ctx=this.domElement.getContext("webgl",t)||this.domElement.getContext("experimental-webgl",t),!this.ctx)throw new Xt("unable to create a webgl context. Try using another renderer.");i=Qe.shaders.create(e,Qe.shaders.vertex,Qe.shaders.types.vertex),t=Qe.shaders.create(e,Qe.shaders.fragment,Qe.shaders.types.fragment),this.program=Qe.program.create(e,[i,t]),e.useProgram(this.program),this.program.position=e.getAttribLocation(this.program,"a_position"),this.program.matrix=e.getUniformLocation(this.program,"u_matrix"),this.program.rect=e.getUniformLocation(this.program,"u_rect");t=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,t),e.vertexAttribPointer(this.program.position,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.program.position),e.bufferData(e.ARRAY_BUFFER,new q([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enable(e.BLEND),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA)}function ei(t){var e=G.defaults(t||{},{fullscreen:!1,fitted:!1,width:640,height:480,type:ei.Types.svg,autostart:!1});G.each(e,function(t,e){/fullscreen/i.test(e)||/autostart/i.test(e)||(this[e]=t)},this),G.isElement(e.domElement)&&(t=e.domElement.tagName.toLowerCase(),/^(CanvasRenderer-canvas|WebGLRenderer-canvas|SVGRenderer-svg)$/.test(this.type+"-"+t)||(this.type=ei.Types[t])),this.renderer=new ei[this.type](this),this.setPlaying(e.autostart),this.frameCount=0,e.fullscreen?(this.fit=function(){var t=document.body.getBoundingClientRect(),e=this.width=t.width,t=this.height=t.height;this.renderer.setSize(e,t,this.ratio)}.bind(this),this.fit.domElement=window,this.fit.attached=!0,G.extend(document.body.style,{overflow:"hidden",margin:0,padding:0,top:0,left:0,right:0,bottom:0,position:"fixed"}),G.extend(this.renderer.domElement.style,{display:"block",top:0,left:0,right:0,bottom:0,position:"fixed"}),Ut.bind(this.fit.domElement,"resize",this.fit),this.fit()):e.fitted?(this.fit=function(){var t,e=this.renderer.domElement.parentElement;e?(t=e.getBoundingClientRect(),e=this.width=t.width,t=this.height=t.height,this.renderer.setSize(e,t,this.ratio)):console.warn("Two.js: Attempting to fit to parent, but no parent found.")}.bind(this),G.extend(this.renderer.domElement.style,{display:"block"})):G.isElement(e.domElement)||(this.renderer.setSize(e.width,e.height,this.ratio),this.width=e.width,this.height=e.height),this.renderer.bind(Y.Types.resize,function(t,e){this.width=t,this.height=e,this.trigger(Y.Types.resize,t,e)}.bind(this)),this.scene=this.renderer.scene,ei.Instances.push(this),e.autostart&&ii.init()}Qe.ctx=Qe.canvas.getContext("2d"),G.extend(ti,{Utils:Qe}),G.extend(ti.prototype,Y,{constructor:ti,setSize:function(t,e,i){this.width=t,this.height=e,this.ratio=void 0===i?gt(this.ctx):i,this.domElement.width=t*this.ratio,this.domElement.height=e*this.ratio,G.isObject(this.domElement.style)&&G.extend(this.domElement.style,{width:t+"px",height:e+"px"}),this._renderer.matrix[0]=this._renderer.matrix[4]=this._renderer.scale=this.ratio,this._flagMatrix=!0,this.ctx.viewport(0,0,t*this.ratio,e*this.ratio);var r=this.ctx.getUniformLocation(this.program,"u_resolution");return this.ctx.uniform2f(r,t*this.ratio,e*this.ratio),this.trigger(Y.Types.resize,t,e,i)},render:function(){var t=this.ctx;return this.overdraw||t.clear(t.COLOR_BUFFER_BIT),Qe.group.render.call(this.scene,t,this.program),this._flagMatrix=!1,this}}),G.extend(ei,_t),G.extend(ei.prototype,Y,{constructor:ei,appendTo:function(t){return t.appendChild(this.renderer.domElement),this.fit&&(this.fit.domElement!==window&&(this.fit.domElement=t,this.fit.attached=!1),this.update()),this},play:function(){return this.playing=!0,ii.init(),this.trigger(Y.Types.play)},pause:function(){return this.playing=!1,this.trigger(Y.Types.pause)},setPlaying:function(t){this.playing=t},release:function(t){var e,i,r;if(G.isObject(t)){if("function"==typeof t.unbind&&t.unbind(),t.vertices)for("function"==typeof t.vertices.unbind&&t.vertices.unbind(),e=0;e<t.vertices.length;e++)"function"==typeof(i=t.vertices[e]).unbind&&i.unbind();if(t.children)for(e=0;e<t.children.length;e++)r=t.children[e],this.release(r);return t}},update:function(){var t=!!this._lastFrame,e=G.performance.now();t&&(this.timeDelta=parseFloat((e-this._lastFrame).toFixed(3))),this._lastFrame=e,this.fit&&this.fit.domElement&&!this.fit.attached&&(Ut.bind(this.fit.domElement,"resize",this.fit),this.fit.attached=!0,this.fit());var i=this.width,t=this.height,e=this.renderer;return i===e.width&&t===e.height||e.setSize(i,t,this.ratio),this.trigger(Y.Types.update,this.frameCount,this.timeDelta),this.render()},render:function(){return this.renderer.render(),this.trigger(Y.Types.render,this.frameCount++)},add:function(t){var e=t;return t instanceof Array||(e=Array.prototype.slice.call(arguments)),this.scene.add(e),this},remove:function(t){var e=t;return t instanceof Array||(e=Array.prototype.slice.call(arguments)),this.scene.remove(e),this},clear:function(){return this.scene.remove(this.scene.children),this},makeLine:function(t,e,i,r){r=new be(t,e,i,r);return this.scene.add(r),r},makeArrow:function(t,e,i,r,n){var s="number"==typeof n?n:10,n=Math.atan2(r-e,i-t),n=new se([new et(t,e,void 0,void 0,void 0,void 0,L.move),new et(i,r,void 0,void 0,void 0,void 0,L.line),new et(i-s*Math.cos(n-Math.PI/4),r-s*Math.sin(n-Math.PI/4),void 0,void 0,void 0,void 0,L.line),new et(i,r,void 0,void 0,void 0,void 0,L.move),new et(i-s*Math.cos(n+Math.PI/4),r-s*Math.sin(n+Math.PI/4),void 0,void 0,void 0,void 0,L.line)],!1,!1,!0);return n.noFill(),n.cap="round",n.join="round",this.scene.add(n),n},makeRectangle:function(t,e,i,r){r=new xe(t,e,i,r);return this.scene.add(r),r},makeRoundedRectangle:function(t,e,i,r,n){n=new we(t,e,i,r,n);return this.scene.add(n),n},makeCircle:function(t,e,i,r){r=new ge(t,e,i,r);return this.scene.add(r),r},makeEllipse:function(t,e,i,r,n){n=new ve(t,e,i,r,n);return this.scene.add(n),n},makeStar:function(t,e,i,r,n){n=new We(t,e,i,r,n);return this.scene.add(n),n},makeCurve:function(t){var e=arguments.length,i=t;if(!Array.isArray(t))for(var i=[],r=0;r<e;r+=2){var n=arguments[r];if("number"!=typeof n)break;i.push(new et(n,arguments[r+1]))}var s=arguments[e-1],t=new se(i,!("boolean"==typeof s&&s),!0),s=t.getBoundingClientRect();return t.center().translation.set(s.left+s.width/2,s.top+s.height/2),this.scene.add(t),t},makePolygon:function(t,e,i,r){r=new De(t,e,i,r);return this.scene.add(r),r},makeArcSegment:function(t,e,i,r,n,s,a){a=new Be(t,e,i,r,n,s,a);return this.scene.add(a),a},makePath:function(t){var e=arguments.length,i=t;if(!Array.isArray(t))for(var i=[],r=0;r<e;r+=2){var n=arguments[r];if("number"!=typeof n)break;i.push(new et(n,arguments[r+1]))}var s=arguments[e-1],t=new se(i,!("boolean"==typeof s&&s)),s=t.getBoundingClientRect();return"number"==typeof s.top&&"number"==typeof s.left&&"number"==typeof s.right&&"number"==typeof s.bottom&&t.center().translation.set(s.left+s.width/2,s.top+s.height/2),this.scene.add(t),t},makeText:function(t,e,i,r){r=new Ae(t,e,i,r);return this.add(r),r},makeLinearGradient:function(t,e,i,r){r=new Kt(t,e,i,r,Array.prototype.slice.call(arguments,4));return this.add(r),r},makeRadialGradient:function(t,e,i){i=new Jt(t,e,i,Array.prototype.slice.call(arguments,3));return this.add(i),i},makeSprite:function(t,e,i,r,n,s,a){s=new Le(t,e,i,r,n,s);return a&&s.play(),this.add(s),s},makeImageSequence:function(t,e,i,r,n){r=new je(t,e,i,r);return n&&r.play(),this.add(r),r},makeTexture:function(t,e){return new te(t,e)},makeGroup:function(t){var e=t;t instanceof Array||(e=Array.prototype.slice.call(arguments));t=new Ot;return this.scene.add(t),t.add(e),t},interpret:function(t,e,i){var r=t.tagName.toLowerCase();if(i=void 0===i||i,!(r in Pe))return null;t=Pe[r].call(this,t);return i?this.add(e&&t instanceof Ot?t.children:t):t.parent&&t.remove(),t},load:function(t,e){var i,r,n,s=new Ot,a=function(t){for(Ut.temp.innerHTML=t,r=0;r<Ut.temp.children.length;r++)if(i=Ut.temp.children[r],/svg/i.test(i.nodeName))for(n=0;n<i.children.length;n++)s.add(this.interpret(i.children[n]));else s.add(this.interpret(i));"function"==typeof e&&(t=Ut.temp.children.length<=1?Ut.temp.children[0]:Ut.temp.children,e(s,t))}.bind(this);return/.*\.svg/gi.test(t)?Ce(t,a):a(t),s}});var ii=Ut.getRequestAnimationFrame();function ri(){for(var t=0;t<ei.Instances.length;t++){var e=ei.Instances[t];e.playing&&e.update()}ei.nextFrameID=ii(ri)}ii.init=function(){ri(),ii.init=function(){}},G.extend(ei,{Anchor:et,Collection:wt,Events:Y,Group:Ot,Matrix:ot,Path:se,Registry:Yt,Shape:kt,Text:Ae,Vector:K,Gradient:Zt,ImageSequence:je,LinearGradient:Kt,RadialGradient:Jt,Sprite:Le,Stop:$t,Texture:te,ArcSegment:Be,Circle:ge,Ellipse:ve,Line:be,Polygon:De,Rectangle:xe,RoundedRectangle:we,Star:We,CanvasRenderer:Ht,SVGRenderer:Ye,WebGLRenderer:ti,Commands:L,Utils:G.extend({Error:Xt,getRatio:gt,defineGetterSetter:Wt,read:Pe,xhr:Ce},G,Dt,s,X)});var ni=a,si={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},ai={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},oi=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],hi={CSS:{},springs:{}};function li(t,e,i){return Math.min(Math.max(t,e),i)}function ci(t,e){return-1<t.indexOf(e)}function fi(t,e){return t.apply(null,e)}var ui={arr:function(t){return Array.isArray(t)},obj:function(t){return ci(Object.prototype.toString.call(t),"Object")},pth:function(t){return ui.obj(t)&&t.hasOwnProperty("totalLength")},svg:function(t){return t instanceof SVGElement},inp:function(t){return t instanceof HTMLInputElement},dom:function(t){return t.nodeType||ui.svg(t)},str:function(t){return"string"==typeof t},fnc:function(t){return"function"==typeof t},und:function(t){return void 0===t},nil:function(t){return ui.und(t)||null===t},hex:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)},rgb:function(t){return/^rgb/.test(t)},hsl:function(t){return/^hsl/.test(t)},col:function(t){return ui.hex(t)||ui.rgb(t)||ui.hsl(t)},key:function(t){return!si.hasOwnProperty(t)&&!ai.hasOwnProperty(t)&&"targets"!==t&&"keyframes"!==t}};function di(t){t=/\(([^)]+)\)/.exec(t);return t?t[1].split(",").map(function(t){return parseFloat(t)}):[]}function gi(r,i){var t=di(r),e=li(ui.und(t[0])?1:t[0],.1,100),n=li(ui.und(t[1])?100:t[1],.1,100),s=li(ui.und(t[2])?10:t[2],.1,100),t=li(ui.und(t[3])?0:t[3],.1,100),a=Math.sqrt(n/e),o=s/(2*Math.sqrt(n*e)),h=o<1?a*Math.sqrt(1-o*o):0,l=1,c=o<1?(o*a-t)/h:-t+a;function f(t){var e=i?i*t/1e3:t,e=o<1?Math.exp(-e*o*a)*(l*Math.cos(h*e)+c*Math.sin(h*e)):(l+c*e)*Math.exp(-e*a);return 0===t||1===t?t:1-e}return i?f:function(){var t=hi.springs[r];if(t)return t;for(var e=0,i=0;;)if(1===f(e+=1/6)){if(16<=++i)break}else i=0;return t=e*(1/6)*1e3,hi.springs[r]=t}}function pi(e){return void 0===e&&(e=10),function(t){return Math.ceil(li(t,1e-6,1)*e)*(1/e)}}var _i=function(s,e,a,i){if(0<=s&&s<=1&&0<=a&&a<=1){var o=new Float32Array(11);if(s!==e||a!==i)for(var t=0;t<11;++t)o[t]=yi(.1*t,s,a);return function(t){return s===e&&a===i||0===t||1===t?t:yi(r(t),e,i)}}function r(t){for(var e=0,i=1;10!==i&&o[i]<=t;++i)e+=.1;var r=e+.1*((t-o[--i])/(o[i+1]-o[i])),n=vi(r,s,a);return.001<=n?function(t,e,i,r){for(var n=0;n<4;++n){var s=vi(e,i,r);if(0===s)return e;e-=(yi(e,i,r)-t)/s}return e}(t,r,s,a):0===n?r:function(t,e,i,r,n){for(var s,a,o=0;0<(s=yi(a=e+(i-e)/2,r,n)-t)?i=a:e=a,1e-7<Math.abs(s)&&++o<10;);return a}(t,e,e+.1,s,a)}};function mi(t,e){return 1-3*e+3*t}function yi(t,e,i){return((mi(e,i)*t+(3*i-6*e))*t+3*e)*t}function vi(t,e,i){return 3*mi(e,i)*t*t+2*(3*i-6*e)*t+3*e}var bi,xi,wi=(bi={linear:function(){return function(t){return t}}},xi={Sine:function(){return function(t){return 1-Math.cos(t*Math.PI/2)}},Circ:function(){return function(t){return 1-Math.sqrt(1-t*t)}},Back:function(){return function(t){return t*t*(3*t-2)}},Bounce:function(){return function(t){for(var e,i=4;t<((e=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}},Elastic:function(t,e){void 0===e&&(e=.5);var i=li(t=void 0===t?1:t,1,10),r=li(e,.1,2);return function(t){return 0===t||1===t?t:-i*Math.pow(2,10*(t-1))*Math.sin((t-1-r/(2*Math.PI)*Math.asin(1/i))*(2*Math.PI)/r)}}},["Quad","Cubic","Quart","Quint","Expo"].forEach(function(t,e){xi[t]=function(){return function(t){return Math.pow(t,e+2)}}}),Object.keys(xi).forEach(function(t){var r=xi[t];bi["easeIn"+t]=r,bi["easeOut"+t]=function(e,i){return function(t){return 1-r(e,i)(1-t)}},bi["easeInOut"+t]=function(e,i){return function(t){return t<.5?r(e,i)(2*t)/2:1-r(e,i)(-2*t+2)/2}},bi["easeOutIn"+t]=function(e,i){return function(t){return t<.5?(1-r(e,i)(1-2*t))/2:(r(e,i)(2*t-1)+1)/2}}}),bi);function ki(t,e){if(ui.fnc(t))return t;var i=t.split("(")[0],r=wi[i],n=di(t);switch(i){case"spring":return gi(t,e);case"cubicBezier":return fi(_i,n);case"steps":return fi(pi,n);default:return fi(r,n)}}function Mi(t){try{return document.querySelectorAll(t)}catch(t){return}}function Ai(t,e){for(var i,r=t.length,n=2<=arguments.length?e:void 0,s=[],a=0;a<r;a++)a in t&&(i=t[a],e.call(n,i,a,t)&&s.push(i));return s}function Si(t){return t.reduce(function(t,e){return t.concat(ui.arr(e)?Si(e):e)},[])}function Oi(t){return ui.arr(t)?t:(t=ui.str(t)?Mi(t)||t:t)instanceof NodeList||t instanceof HTMLCollection?[].slice.call(t):[t]}function Ri(t,e){return t.some(function(t){return t===e})}function Fi(t){var e,i={};for(e in t)i[e]=t[e];return i}function Ti(t,e){var i,r=Fi(t);for(i in t)r[i]=(e.hasOwnProperty(i)?e:t)[i];return r}function Ei(t,e){var i,r=Fi(t);for(i in e)r[i]=(ui.und(t[i])?e:t)[i];return r}function Pi(t){return ui.rgb(t)?(e=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(s=t))?"rgba("+e[1]+",1)":s:ui.hex(t)?(a=(a=t).replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,i,r){return e+e+i+i+r+r}),a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a),"rgba("+parseInt(a[1],16)+","+parseInt(a[2],16)+","+parseInt(a[3],16)+",1)"):ui.hsl(t)?(s=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e=t)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),a=parseInt(s[1],10)/360,t=parseInt(s[2],10)/100,e=parseInt(s[3],10)/100,s=s[4]||1,0==t?i=r=n=e:(i=o(t=2*e-(e=e<.5?e*(1+t):e+t-e*t),e,a+1/3),r=o(t,e,a),n=o(t,e,a-1/3)),"rgba("+255*i+","+255*r+","+255*n+","+s+")"):void 0;var e,i,r,n,s,a;function o(t,e,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}}function Ci(t){t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(t);if(t)return t[1]}function ji(t,e){return ui.fnc(t)?t(e.target,e.id,e.total):t}function Li(t,e){return t.getAttribute(e)}function Ii(t,e,i){if(Ri([i,"deg","rad","turn"],Ci(e)))return e;var r=hi.CSS[e+i];if(!ui.und(r))return r;var n=document.createElement(t.tagName),r=t.parentNode&&t.parentNode!==document?t.parentNode:document.body;r.appendChild(n),n.style.position="absolute",n.style.width=100+i;t=100/n.offsetWidth;r.removeChild(n);t*=parseFloat(e);return hi.CSS[e+i]=t}function Ni(t,e,i){if(e in t.style){var r=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=t.style[e]||getComputedStyle(t).getPropertyValue(r)||"0";return i?Ii(t,r,i):r}}function Bi(t,e){return ui.dom(t)&&!ui.inp(t)&&(!ui.nil(Li(t,e))||ui.svg(t)&&t[e])?"attribute":ui.dom(t)&&Ri(oi,e)?"transform":ui.dom(t)&&"transform"!==e&&Ni(t,e)?"css":null!=t[e]?"object":void 0}function zi(t){if(ui.dom(t)){for(var e,i=t.style.transform||"",r=/(\w+)\(([^)]*)\)/g,n=new Map;e=r.exec(i);)n.set(e[1],e[2]);return n}}function Hi(t,e,i,r){var n=ci(e,"scale")?1:0+(ci(n=e,"translate")||"perspective"===n?"px":ci(n,"rotate")||ci(n,"skew")?"deg":void 0),n=zi(t).get(e)||n;return i&&(i.transforms.list.set(e,n),i.transforms.last=e),r?Ii(t,n,r):n}function Vi(t,e,i,r){switch(Bi(t,e)){case"transform":return Hi(t,e,r,i);case"css":return Ni(t,e,i);case"attribute":return Li(t,e);default:return t[e]||0}}function Di(t,e){var i=/^(\*=|\+=|-=)/.exec(t);if(!i)return t;var r=Ci(t)||0,n=parseFloat(e),s=parseFloat(t.replace(i[0],""));switch(i[0][0]){case"+":return n+s+r;case"-":return n-s+r;case"*":return n*s+r}}function Ui(t,e){if(ui.col(t))return Pi(t);if(/\s/g.test(t))return t;var i=Ci(t),t=i?t.substr(0,t.length-i.length):t;return e?t+e:t}function qi(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Xi(t){for(var e,i=t.points,r=0,n=0;n<i.numberOfItems;n++){var s=i.getItem(n);0<n&&(r+=qi(e,s)),e=s}return r}function Wi(t){if(t.getTotalLength)return t.getTotalLength();switch(t.tagName.toLowerCase()){case"circle":return 2*Math.PI*Li(t,"r");case"rect":return 2*Li(i=t,"width")+2*Li(i,"height");case"line":return qi({x:Li(e=t,"x1"),y:Li(e,"y1")},{x:Li(e,"x2"),y:Li(e,"y2")});case"polyline":return Xi(t);case"polygon":return e=t.points,Xi(t)+qi(e.getItem(e.numberOfItems-1),e.getItem(0))}var e,i}function Gi(t,e){var i=e||{},r=i.el||function(t){for(var e=t.parentNode;ui.svg(e)&&ui.svg(e.parentNode);)e=e.parentNode;return e}(t),n=r.getBoundingClientRect(),e=Li(r,"viewBox"),t=n.width,n=n.height,e=i.viewBox||(e?e.split(" "):[0,0,t,n]);return{el:r,viewBox:e,x:+e[0],y:+e[1],w:t,h:n,vW:e[2],vH:e[3]}}function Yi(t,e){var i=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=Ui(ui.pth(t)?t.totalLength:t,e)+"";return{original:r,numbers:r.match(i)?r.match(i).map(Number):[0],strings:ui.str(t)||e?r.split(i):[]}}function $i(t){return Ai(t?Si(ui.arr(t)?t.map(Oi):Oi(t)):[],function(t,e,i){return i.indexOf(t)===e})}function Zi(t){var i=$i(t);return i.map(function(t,e){return{target:t,id:e,total:i.length,transforms:{list:zi(t)}}})}function Ki(e){for(var i=Ai(Si(e.map(function(t){return Object.keys(t)})),function(t){return ui.key(t)}).reduce(function(t,e){return t.indexOf(e)<0&&t.push(e),t},[]),n={},t=0;t<i.length;t++)!function(t){var r=i[t];n[r]=e.map(function(t){var e,i={};for(e in t)ui.key(e)?e==r&&(i.value=t[e]):i[e]=t[e];return i})}(t);return n}function Ji(t,e){var i,r=[],n=e.keyframes;for(i in e=n?Ei(Ki(n),e):e)ui.key(i)&&r.push({name:i,tweens:function(t,i){var e,r=Fi(i);/^spring/.test(r.easing)&&(r.duration=gi(r.easing)),ui.arr(t)&&(2===(e=t.length)&&!ui.obj(t[0])?t={value:t}:ui.fnc(i.duration)||(r.duration=i.duration/e));var n=ui.arr(t)?t:[t];return n.map(function(t,e){t=ui.obj(t)&&!ui.pth(t)?t:{value:t};return ui.und(t.delay)&&(t.delay=e?0:i.delay),ui.und(t.endDelay)&&(t.endDelay=e===n.length-1?i.endDelay:0),t}).map(function(t){return Ei(t,r)})}(e[i],t)});return r}function Qi(o,h){var l;return o.tweens.map(function(t){var e=function(t,e){var i,r={};for(i in t){var n=ji(t[i],e);ui.arr(n)&&1===(n=n.map(function(t){return ji(t,e)})).length&&(n=n[0]),r[i]=n}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}(t,h),i=e.value,r=ui.arr(i)?i[1]:i,n=Ci(r),s=Vi(h.target,o.name,n,h),a=l?l.to.original:s,t=ui.arr(i)?i[0]:a,s=Ci(t)||Ci(s),s=n||s;return ui.und(r)&&(r=a),e.from=Yi(t,s),e.to=Yi(Di(r,t),s),e.start=l?l.end:0,e.end=e.start+e.delay+e.duration+e.endDelay,e.easing=ki(e.easing,e.duration),e.isPath=ui.pth(i),e.isPathTargetInsideSVG=e.isPath&&ui.svg(h.target),e.isColor=ui.col(e.from.original),e.isColor&&(e.round=1),l=e})}var tr={css:function(t,e,i){return t.style[e]=i},attribute:function(t,e,i){return t.setAttribute(e,i)},object:function(t,e,i){return t[e]=i},transform:function(t,e,i,r,n){var s;r.list.set(e,i),e!==r.last&&!n||(s="",r.list.forEach(function(t,e){s+=e+"("+t+") "}),t.style.transform=s)}};function er(t,a){Zi(t).forEach(function(t){for(var e in a){var i=ji(a[e],t),r=t.target,n=Ci(i),s=Vi(r,e,n,t),n=Di(Ui(i,n||Ci(s)),s),s=Bi(r,e);tr[s](r,e,n,t.transforms,!0)}})}function ir(t,i){return Ai(Si(t.map(function(e){return i.map(function(t){return function(t,e){var i=Bi(t.target,e.name);if(i){var r=Qi(e,t),n=r[r.length-1];return{type:i,property:e.name,animatable:t,tweens:r,duration:n.end,delay:r[0].delay,endDelay:n.endDelay}}}(e,t)})})),function(t){return!ui.und(t)})}function rr(t,e){function i(t){return t.timelineOffset||0}var r=t.length,n={};return n.duration=r?Math.max.apply(Math,t.map(function(t){return i(t)+t.duration})):e.duration,n.delay=r?Math.min.apply(Math,t.map(function(t){return i(t)+t.delay})):e.delay,n.endDelay=r?n.duration-Math.max.apply(Math,t.map(function(t){return i(t)+t.duration-t.endDelay})):e.endDelay,n}var nr=0;var sr,ar=[],or=("undefined"!=typeof document&&document.addEventListener("visibilitychange",function(){cr.suspendWhenDocumentHidden&&(lr()?sr=cancelAnimationFrame(sr):(ar.forEach(function(t){return t._onDocumentVisibility()}),or()))}),function(){sr||lr()&&cr.suspendWhenDocumentHidden||!(0<ar.length)||(sr=requestAnimationFrame(hr))});function hr(t){for(var e=ar.length,i=0;i<e;){var r=ar[i];r.paused?(ar.splice(i,1),e--):(r.tick(t),i++)}sr=0<i?requestAnimationFrame(hr):void 0}function lr(){return document&&document.hidden}function cr(t){var s,a=0,o=0,h=0,l=0,c=null;function f(t){var e=window.Promise&&new Promise(function(t){return c=t});return t.finished=e}var e,i,r,n,k=(i=Ti(si,e=t=void 0===t?{}:t),r=Ji(n=Ti(ai,e),e),t=Zi(e.targets),r=rr(e=ir(t,r),n),n=nr,nr++,Ei(i,{id:n,children:[],animatables:t,animations:e,duration:r.duration,delay:r.delay,endDelay:r.endDelay}));function u(){var t=k.direction;"alternate"!==t&&(k.direction="normal"!==t?"normal":"reverse"),k.reversed=!k.reversed,s.forEach(function(t){return t.reversed=k.reversed})}function d(t){return k.reversed?k.duration-t:t}function g(){a=0,o=d(k.currentTime)*(1/cr.speed)}function p(t,e){e&&e.seek(t-e.timelineOffset)}function _(e){for(var t=0,i=k.animations,r=i.length;t<r;){var n=i[t],s=n.animatable,a=n.tweens,o=a.length-1,h=a[o];o&&(h=Ai(a,function(t){return e<t.end})[0]||h);for(var a=li(e-h.start-h.delay,0,h.duration)/h.duration,l=isNaN(a)?1:h.easing(a),c=h.to.strings,f=h.round,u=[],d=h.to.numbers.length,g=void 0,p=0;p<d;p++){var _=void 0,m=h.to.numbers[p],y=h.from.numbers[p]||0,_=h.isPath?function(e,i,t){function r(t){return e.el.getPointAtLength(1<=i+(t=void 0===t?0:t)?i+t:0)}var n=Gi(e.el,e.svg),s=r(),a=r(-1),o=r(1),h=t?1:n.w/n.vW,l=t?1:n.h/n.vH;switch(e.property){case"x":return(s.x-n.x)*h;case"y":return(s.y-n.y)*l;case"angle":return 180*Math.atan2(o.y-a.y,o.x-a.x)/Math.PI}}(h.value,l*m,h.isPathTargetInsideSVG):y+l*(m-y);f&&(h.isColor&&2<p||(_=Math.round(_*f)/f)),u.push(_)}var v=c.length;if(v)for(var g=c[0],b=0;b<v;b++){c[b];var x=c[b+1],w=u[b];isNaN(w)||(g+=x?w+x:w+" ")}else g=u[0];tr[n.type](s.target,n.property,g,s.transforms),n.currentValue=g,t++}}function m(t){k[t]&&!k.passThrough&&k[t](k)}function y(t){var e=k.duration,i=k.delay,r=e-k.endDelay,n=d(t);k.progress=li(n/e*100,0,100),k.reversePlayback=n<k.currentTime,s&&function(t){if(k.reversePlayback)for(var e=l;e--;)p(t,s[e]);else for(var i=0;i<l;i++)p(t,s[i])}(n),!k.began&&0<k.currentTime&&(k.began=!0,m("begin")),!k.loopBegan&&0<k.currentTime&&(k.loopBegan=!0,m("loopBegin")),n<=i&&0!==k.currentTime&&_(0),(r<=n&&k.currentTime!==e||!e)&&_(e),i<n&&n<r?(k.changeBegan||(k.changeBegan=!0,k.changeCompleted=!1,m("changeBegin")),m("change"),_(n)):k.changeBegan&&(k.changeCompleted=!0,k.changeBegan=!1,m("changeComplete")),k.currentTime=li(n,0,e),k.began&&m("update"),e<=t&&(o=0,k.remaining&&!0!==k.remaining&&k.remaining--,k.remaining?(a=h,m("loopComplete"),k.loopBegan=!1,"alternate"===k.direction&&u()):(k.paused=!0,k.completed||(k.completed=!0,m("loopComplete"),m("complete"),!k.passThrough&&"Promise"in window&&(c(),f(k)))))}return f(k),k.reset=function(){var t=k.direction;k.passThrough=!1,k.currentTime=0,k.progress=0,k.paused=!0,k.began=!1,k.loopBegan=!1,k.changeBegan=!1,k.completed=!1,k.changeCompleted=!1,k.reversePlayback=!1,k.reversed="reverse"===t,k.remaining=k.loop,s=k.children;for(var e=l=s.length;e--;)k.children[e].reset();(k.reversed&&!0!==k.loop||"alternate"===t&&1===k.loop)&&k.remaining++,_(k.reversed?k.duration:0)},k._onDocumentVisibility=g,k.set=function(t,e){return er(t,e),k},k.tick=function(t){y(((h=t)+(o-(a=a||h)))*cr.speed)},k.seek=function(t){y(d(t))},k.pause=function(){k.paused=!0,g()},k.play=function(){k.paused&&(k.completed&&k.reset(),k.paused=!1,ar.push(k),g(),or())},k.reverse=function(){u(),k.completed=!k.reversed,g()},k.restart=function(){k.reset(),k.play()},k.remove=function(t){ur($i(t),k)},k.reset(),k.autoplay&&k.play(),k}function fr(t,e){for(var i=e.length;i--;)Ri(t,e[i].animatable.target)&&e.splice(i,1)}function ur(t,e){var i=e.animations,r=e.children;fr(t,i);for(var n=r.length;n--;){var s=r[n],a=s.animations;fr(t,a),a.length||s.children.length||r.splice(n,1)}i.length||r.length||e.pause()}cr.version="3.2.1",cr.speed=1,cr.suspendWhenDocumentHidden=!0,cr.running=ar,cr.remove=function(t){for(var e=$i(t),i=ar.length;i--;)ur(e,ar[i])},cr.get=Vi,cr.set=er,cr.convertPx=Ii,cr.path=function(t,e){var i=ui.str(t)?Mi(t)[0]:t,r=e||100;return function(t){return{property:t,el:i,svg:Gi(i),totalLength:Wi(i)*(r/100)}}},cr.setDashoffset=function(t){var e=Wi(t);return t.setAttribute("stroke-dasharray",e),e},cr.stagger=function(t,e){var o=(e=void 0===e?{}:e).direction||"normal",h=e.easing?ki(e.easing):null,l=e.grid,c=e.axis,f=e.from||0,u="first"===f,d="center"===f,g="last"===f,p=ui.arr(t),_=p?parseFloat(t[0]):parseFloat(t),m=p?parseFloat(t[1]):0,y=Ci(p?t[1]:t)||0,v=e.start||0+(p?_:0),b=[],x=0;return function(t,e,i){if(u&&(f=0),d&&(f=(i-1)/2),g&&(f=i-1),!b.length){for(var r,n,s,a=0;a<i;a++)l?(n=d?(l[0]-1)/2:f%l[0],s=d?(l[1]-1)/2:Math.floor(f/l[0]),r=n-a%l[0],n=s-Math.floor(a/l[0]),s=Math.sqrt(r*r+n*n),"x"===c&&(s=-r),b.push(s="y"===c?-n:s)):b.push(Math.abs(f-a)),x=Math.max.apply(Math,b);h&&(b=b.map(function(t){return h(t/x)*x})),"reverse"===o&&(b=b.map(function(t){return c?t<0?-1*t:-t:Math.abs(x-t)}))}return v+(p?(m-_)/x:_)*(Math.round(100*b[e])/100)+y}},cr.timeline=function(a){var o=cr(a=void 0===a?{}:a);return o.duration=0,o.add=function(t,e){var i=ar.indexOf(o),r=o.children;function n(t){t.passThrough=!0}-1<i&&ar.splice(i,1);for(var s=0;s<r.length;s++)n(r[s]);i=Ei(t,Ti(ai,a));i.targets=i.targets||a.targets;t=o.duration;i.autoplay=!1,i.direction=o.direction,i.timelineOffset=ui.und(e)?t:Di(e,t),n(o),o.seek(i.timelineOffset);i=cr(i);n(i),r.push(i);i=rr(r,a);return o.delay=i.delay,o.endDelay=i.endDelay,o.duration=i.duration,o.seek(0),o.reset(),o.autoplay&&o.play(),o},o},cr.easing=ki,cr.penner=wi,cr.random=function(t,e){return Math.floor(Math.random()*(e-t+1))+t};a=function(t){var r=this;e(this,"config",void 0),e(this,"api",void 0),e(this,"anime",void 0),e(this,"reconfigure",function(t){r.config=t,r.api.clear(),r.api.renderer.setSize(r.config.width,r.config.height,r.api.ratio)}),e(this,"generate",function(){var t,e=r.config,i=E(e);!function(i,t){var e,r=t.width||500,n=t.height||500,s=t.title,a=t.backgroundColor||"#fff",o=t.items,t=i.makeRectangle(r/2,n/2,r,n);t.noStroke(),t.fill=a,o.filter(function(t){return t.type===f.polygon}).forEach(function(t){var e=function(t,e){for(var i=[],r=0,n=t.length;r<n;r+=e)i.push(t.slice(r,r+e));return i}(t.points,2).map(function(t){return new ei.Vector(t[0],t[1])}),e=i.makePath(e,!0);e.fill=t.fill,t.gradient&&(e.fill=i.makeLinearGradient(t.gradient.x1,-t.gradient.y1,t.gradient.x2,t.gradient.y2,new ei.Stop(0,t.gradient.stops[0]),new ei.Stop(1,t.gradient.stops[1]))),e.noStroke(),t.target=e}),o.filter(function(t){return t.type===f.line}).forEach(function(t){var e=i.makeLine(t.points[0],t.points[1],t.points[2],t.points[3]);e.linewidth=t.strokeWidth,e.stroke=t.fill,e.cap="square",e.join="miter",t.target=e}),s&&(e=25,s.split(" ").forEach(function(t){i.makeText(t,15,e,{family:"Ubuntu",alignment:"left",size:14,fill:ni.isReadable(a,"#fff")?"#fff":"#000",weight:100}),e+=20}));n=i.makeRectangle(r/2,n/2,r,n);n.stroke=ni.isReadable(a,"#fff")?"#fff":"#000",n.linewidth=5,n.noFill(),i.bind("update",function(){})}(r.api,{items:i,container:e.container,width:e.width,height:e.height,title:null==(t=e.mondrian)?void 0:t.title,backgroundColor:null==(t=e.mondrian)?void 0:t.backgroundColor}),null!=(t=e.mondrian)&&t.enableSnaking&&i.filter(function(t){return t.type===f.line}).forEach(function(t){t.target.translation.x=x(-8,8),t.target.translation.y=x(-8,8)}),e.enableAnimation&&(r.anime=function(t,e){void 0===e&&(e=!1);var i=[];t.filter(function(t){return t.type===f.line}).forEach(function(t){var e={x:x(-700,700),y:x(-700,700),rotation:2.5,target:t.target};i.push(e),t.target.translation.x=e.x,t.target.translation.y=e.y}),t.filter(function(t){return t.type===f.polygon}).forEach(function(t){var e={opacity:0,target:t.target};i.push(e),t.target.opacity=0});var r=i.map(function(t){return v({},t,{target:null==(t=t.target)?void 0:t.id})}),e=cr({targets:i,x:[{value:e?x(-8,8):0,duration:1500,delay:0}],y:[{value:e?x(-8,8):0,duration:1500,delay:0}],opacity:[{value:1,duration:1e3,delay:1500}],duration:1500,easing:"linear",update:function(){i.forEach(function(t){void 0!==t.x&&(t.target.translation.x=t.x),void 0!==t.y&&(t.target.translation.y=t.y),void 0!==t.ending&&(t.target.ending=t.ending),void 0!==t.opacity&&(t.target.opacity=t.opacity)})}});return e.items=t,e.animation=r,e}(i,null==(e=e.mondrian)?void 0:e.enableSnaking)),r.items=i}),e(this,"play",function(){var t;null!=(t=r.anime)&&t.restart()});t=(this.config=t).mode||"svg";this.api=new ei({type:"svg"===t?ei.Types.svg:ei.Types.canvas,width:this.config.width,height:this.config.height,autostart:!0}),this.api.appendTo(this.config.container)};window.Mondrian=a}();
  </script>
</head>
<body>
<div id="container">

</div>
<div class="scripts">
  <script>
    window.onload = () => {
      const Mondrian = window.Mondrian
      const config = {
        width: 500,
        height: 500,
        container: document.querySelector("#container"),
      };

      const mondrian = new Mondrian(config);
      window.mondrian = mondrian; // Workaround
      // Generate
      mondrian.generate();

      document.addEventListener("click",  (e) => {
        // Generate
        window.mondrian.generate();
      });
    }
  </script>
</div>
</body>
</html>
